(function(_0xce6524,_0x26e628){const _0x53d6f5=_0xce6524();function _0x1d424d(_0x5b323f,_0x52548e,_0x2d6a21,_0x2d0387){return _0x5ba9(_0x52548e- -0x1f7,_0x2d6a21);}function _0x194019(_0x35ec8c,_0x2c4510,_0xeb1f1b,_0x3a0db9){return _0x5ba9(_0xeb1f1b- -0x3f,_0x3a0db9);}while(!![]){try{const _0x3a595a=parseInt(_0x1d424d(-0x149,-0xa4,-0x106,-0x65))/(-0x6*-0x241+-0x119+0xf*-0xd4)*(parseInt(_0x1d424d(-0x8e,-0x57,0xc,0x6f))/(0x1*0x1ac3+0x2502+-0x1*0x3fc3))+parseInt(_0x1d424d(0x5,0x5a,0x5,0x106))/(0x1*-0x16f7+0x6*0x32d+-0x1*-0x3ec)*(-parseInt(_0x194019(0x255,0x278,0x1c9,0x1da))/(0x1d33+0x794+0xc41*-0x3))+-parseInt(_0x1d424d(-0xef,-0x106,-0x1cd,-0x179))/(-0x1c3*0x14+0x2*-0x227+-0x278f*-0x1)+parseInt(_0x194019(0x1b6,0x1fa,0x1ed,0x1b7))/(-0xba+0x1532+-0x1472)*(-parseInt(_0x1d424d(0x9e,0x47,0x8c,-0x57))/(0x1*-0x51+0x1*0x49d+-0x445))+-parseInt(_0x194019(0x206,0x11b,0x15b,0x192))/(-0x164*-0xd+0x48+0x6*-0x30e)*(-parseInt(_0x194019(0x165,0x1b7,0x208,0x13a))/(0x145+-0xabe*0x3+0x1efe))+parseInt(_0x194019(0x117,0xf8,0x1a2,0x19d))/(0x2202+-0x1*0x7e6+-0x1a12)+parseInt(_0x194019(0x1b4,0x20a,0x168,0xbf))/(-0x140a+-0x169f+-0xc*-0x38f);if(_0x3a595a===_0x26e628)break;else _0x53d6f5['push'](_0x53d6f5['shift']());}catch(_0x1d3f2e){_0x53d6f5['push'](_0x53d6f5['shift']());}}}(_0x3f27,0x6*-0x218e9+0x108422+0x5851d));const _0x21a80b=(function(){const _0x1eb92c={};_0x1eb92c[_0x111daa(0x4b,0xd4,0xf,0x9)]=function(_0x1a6f98,_0x5acd71){return _0x1a6f98!==_0x5acd71;};function _0x111daa(_0x57ffe6,_0x4bf7f4,_0x180453,_0x193186){return _0x5ba9(_0x193186- -0x230,_0x180453);}_0x1eb92c[_0x111daa(-0x16,0x3c,0x91,-0x16)]=function(_0xe8430a,_0x1007c4){return _0xe8430a===_0x1007c4;};const _0x18dd42=_0x1eb92c;function _0x477975(_0x10483b,_0x3133c3,_0x2aaf27,_0x176493){return _0x5ba9(_0x3133c3- -0x320,_0x176493);}let _0x5081df=!![];return function(_0x4c468f,_0x17c223){const _0x5730ca={'sKNEC':function(_0x29664c,_0x259fa8){function _0x524cd5(_0x3aa943,_0x111a8f,_0x1cd1b5,_0x31ee51){return _0x5ba9(_0x1cd1b5-0x14d,_0x31ee51);}return _0x18dd42[_0x524cd5(0x2de,0x42b,0x386,0x3f5)](_0x29664c,_0x259fa8);},'kTvue':function(_0x3c5843,_0x190105){function _0xb3a262(_0x53a9eb,_0x18b827,_0x882646,_0x53f3ab){return _0x5ba9(_0x882646-0x2c,_0x18b827);}return _0x18dd42[_0xb3a262(0x2c3,0x1ce,0x246,0x212)](_0x3c5843,_0x190105);}},_0x20337d=_0x5081df?function(){function _0x41c19e(_0xe3f3f6,_0xd96fe2,_0x383b58,_0x1041c8){return _0x5ba9(_0x383b58-0x335,_0x1041c8);}function _0x14642d(_0x18d74f,_0x3e20a6,_0x4323d0,_0x1f97b7){return _0x5ba9(_0x4323d0- -0x379,_0x3e20a6);}if(_0x5730ca['sKNEC']('hxyeU','hxyeU'))throw new _0x99ee1c('请求失败:\x20'+_0x3cf2a2['status']+'\x20'+_0x43297b['statusText']);else{if(_0x17c223){if(_0x5730ca[_0x14642d(-0x173,-0x24b,-0x1ed,-0x2a5)](_0x41c19e(0x4f8,0x525,0x4a6,0x555),_0x14642d(-0x2c8,-0x1f6,-0x208,-0x1a6))){const _0x14faf6=_0x17c223['apply'](_0x4c468f,arguments);return _0x17c223=null,_0x14faf6;}else{if(_0x3b45e2){const _0x4e8edc=_0x18e6a6['apply'](_0x3e39d5,arguments);return _0x2982ce=null,_0x4e8edc;}}}}}:function(){};return _0x5081df=![],_0x20337d;};}()),_0x151574=_0x21a80b(this,function(){function _0x29bebd(_0x4cc24a,_0x422dce,_0x3ba1e1,_0x9f3895){return _0x5ba9(_0x3ba1e1- -0x1b4,_0x4cc24a);}function _0x5e8334(_0xeacf57,_0x2181a8,_0xf64630,_0x50080e){return _0x5ba9(_0xeacf57- -0x110,_0x50080e);}const _0x50562c={};_0x50562c['dJvvq']=_0x29bebd(0x86,0x128,0x9c,0xa)+'+$';const _0x3a4fab=_0x50562c;return _0x151574[_0x29bebd(-0x3e,-0xb3,-0x18,-0x97)]()[_0x5e8334(0x3d,0x1e,0xda,0x90)](_0x3a4fab[_0x29bebd(0x20,-0xe6,-0x1e,0x8c)])[_0x5e8334(0x8c,-0xf,0x1e,-0x35)]()[_0x29bebd(-0x1b,0x24,0x80,-0x6)+'r'](_0x151574)[_0x29bebd(-0x9e,0x1d,-0x67,-0x47)](_0x29bebd(0xd6,0x139,0x9c,0x74)+'+$');});_0x151574();import{extension_settings}from'../../../../../extensions.js';import{eventSource}from'../../../../../../script.js';import{extensionName,eventNames,LLMRequestTypes}from'../config.js';import{getRequestHeaders,clearLog,addLog}from'../utils.js';import{startFabLoading,stopFabLoading}from'./fab.js';import{checkTriggerWords,mergeAdjacentMessages}from'../promptProcessor.js';import{processRollPlaceholders}from'./rollProcessor.js';function _0x3f27(){const _0x5ee9de=['z21WvLe','y29UDgv4Da','wePhC2W','5OIwie1VzgvSioACQUMfJq','C3rYAw5N','qwjVCNrfCNjVCG','DgvZDf9JB250zq','x3bYB2zPBgu','zxrPB25FC291CG','rKzVuvm','zgvSDge','senmAei','z3Pdsvy','C2v0','y2nIvMS','qvfxzMC','ChvZAa','zvjWDhK','Bwf4x3rVA2vUCW','tNPpEKi','tK1xsgu','Exn6wwi','Bgv0Aw9UCW','Ce9Lqw8','nhWWFdj8m3WX','mtK2mJqZmeLeDK5vra','8j+tTYbB5zU+54Mh6zo+5O6LoIa','C2LNBMfS','l2DLBMvYyxrL','6k+35RgcieLeoIa','57o757UF5O+q56s66k+n','zgf0ytO','u1rtruW','ugLwuKm','wwrSt3C','B2jQzwn0','Dgv4Da','BgvUz3rO','v0LKt0G','twPdq00','C3rYzwfT','D2XbwLC','BI9QC29U','q1Pduvi','qw1OuwW','y2HHCL9KzxnPzW','rdOG','y29TCgXLDgvuyq','EKHIr3e','CM91BMq','Dvverhm','yMnRAuG','AMXWvey','rgXRDuO','vwfhvgu','sKXIzgy','D0HRA1G','r0f3txi','ievYCM9YoG','yLPZBMe','zw1PDa','CLDlBwe','5PAT44cbBwf4x3rVA2u','6BUy6k6K6k+35Rgc5BYa5AElid09pq','v3nTzvO','zNvUy3rPB24','Cxzwvhq','DhjPz2DLCG','DMnqDwu','zxjYB3i','s3PzDM0','DgvZDe1Vzgu','rhDuufa','CKL1B2y','iefqssblzxKSia','C2XPy2u','Aw9UoIaIqMvHCG','Aw5MBW','q01UteO','tuTpqvq','sgHzrgu','te1Hwg8','sLvuCM4','DhjPz2DLCLDVCG','CgzRsgu','u2DxDNy','tM9VEuO','B3rOD3q','AvrXt3i','C3rFy29UDgv4Da','AxnbCNjHEq','Dg9Wx3a','z1DTB2K','rNvRBfe','5Q2J5PAh5zU+54Mh55sF5OIq','rLnPAfC','5O+q56s66k+n6i635y+w6k+35RgcicHj','vNPJBvq','y3vYCMvUDf90zq','teXn6k+35Rgc5BEY5lIT5PAT77Ym5BYa','57g75z6loIa','rxjxrKW','ioAuTUwiSa','zvfjsgW','57g75z6loG','y3jQuhG','DNHmDgK','77Ym5y+V6io95PIV6k+35Rgc6kkR5OIQ5PAT44cb','ENPRCfa','y29UDgvUDa','z2jWtxO','5PYQ5Ps25yIW5PYj5Pwi5zUE5Asn44cc','EhrFChjVzMLSzq','B3j0zwq','5Q2J5zYO5Ase55cgia','EuzSCKi','wMLmtuW','C2vHCMnO','s0jD','DxrMltG','AhPeC3m','sLn0CMK','vMztBKm','mtnuD0n3s04','D2fYBMLUzW','l2nOyxqVy29TCa','cI0Tls0TieXmtq','uxrtAfO','BNDdELi','DKXVzgO','DLnzy0W','zw50CMLLCW','CgPHww0','teXniev4zwn1Da','suDOv08','D2rmv1G','qvbjifvstcWGqq','DujOtKu','u0TtCu4','BNrZwg0','ugjKvNm','zM9YrwfJAa','6k+35Rgc6zsz6k+VoIa','yxbPx3vYBa','5lUJ56cboIa','sfH2r3i','C3rHDhvZvgv4Da','yNvMzMvYktO','Aw1Hz2vFDxjS','zsbfCNjVCJO','AMfdAgK','yxbWBgLJyxrPBW','y1f2rhq','uwTxquW','l2fWAs9IywnRzq','A1nVyNK','Bv9WCM9MAwXL','vgfN5l+U5Ps5','CMTvwgm','qNfzugO','C3bSAxq','AMrbtwG','CwH1tei','B2zPBgu','AhzAufa','vxfHAKO','yM9KEq','teXnx0vyrunvva','thPmENu','CKLLvfG','wxLNsvi','BMPiDK0','t2v4yLu','C3rHCNrZv2L0Aa','EeXRquq','AuDNCLq','Awzqsfm','AgLZDg9YEq','mxW0Fdb8nxWZFa','BMfTzq','A1r2Dwu','8j+tTYbB55sO5OI35lIk5lYG55Qe5zU+54Mh','BKX6q0e','ywrKvgfZAW','q29UDgvUDc1uEq','rLrsyvi','txDlD3O','rwvUAK8','vKrMsNq','l3yXlW','zeP2DNe','DhLWzq','Awv3wNe','ueKGs2v5lcdMIjyG','mteZody0y0HTEgjR','tLbKrwC','Dg9tDhjPBMC','uenPq1G','uNL2CMe','y2HVAwnLCW','ndG4mZbjuxbzBKK','yKLSt3a','z0XUufa','Df90ExbLx2nVBG','ANnVBG','s3DrALC','yxvTrLC','ndy5mtK0meHjvfn1zq','5Rwb5BYp6kEJ5P6q6k2M5zgkicJMNidLKi4','zw5KC1DPDgG','CNbQzLG','l3yX','ksa9pt09pq','s3DjC3y','DwzIwNi','yxbPx3bYB2zPBa','DwTLtui','uMLezMW','DhjHBNnSyxrPBW','rK5JANm','u1ruvxK','su14veW','oIbmte0G6k+35Rgc6l+u5zUE','DLz0EKq','BuHAD0W','zgvJB2rL','qwfIEMe','Aw5JBhvKzxm','Dg9Rzw4','ExDuyve','w0Xmtv0G5lU75yQH5BEY5y+w','s0z2wxO','vgLrANe','wurOvLG','ALrqt2e','AM9PBG','6kEs6iMYl+ACJEIJHEIUVUIUOq','56In5yczlI4U','zNPhDK4','shzgDuK','sg1OsgK','sMzlvMq','sujkrve','zgf0ytOG','Bu9mAvm','teXnigv4zwn1Da','y3vZDg9Tx3vYBa','sfb1zhC','zeHUvvO','AgnYtva','yuj4sMS','CMvWBgfJzq','zMLNCW','DKryvui','AwHZq2u','wejUDwi','rfnhB1a','yvb3vw0','u2Xnzu0','sxDdrKe','BMrZl2nOyxqTyW','lcdNUQyG','vMzuEfO','Aw9U','DxnLCG','ntG5mdm5mhLUzxf1AW','tfDgwMi','6kEs6iMYl+ACJEIJHEwXLEEKUG','wujRBLu','BgT5tNy','BNmG6k6+572U6l+h5Bcp44cb5OIwia','BLjswKu','ssdOV57MJQxPL67POPJJGii','C3rHDhvZ','vevlvvy','C3rYAw5NAwz5','z2v0','zLfYsxC','CM9Szq','Du1ZzNi','yNLWyxnZx3bYBW','EMLVCKW','tg9SC2G','BgXTx3jLCxvLCW','rMDozLi','DhjPz2DLCK1Vza','qxv0Ag9YAxPHDa','BwvZC2fNzxm','5lUJ56cboG','5y+r6ycb55QeifbYB21WDa','r1jpwgy','oIbbueKGvvjmla','C3rFy2HHDhu4xW','C2fyvwq','yxnZAxn0yw50','ioIVT+AXGU+8JoIVT+EOJEwaMs4UlG','r0nMt24','q0HZyxq','CxvpEK0','y2HHCL9TB2rPzG','AuDrAg0','suzVEuq','teXnoIa','BgXTx3bYB2zPBa','nduYofvdshLNBq','wfv4Bvu','zgvSzxrL','DhjQEMu','vhfLAfC','C3qTy2HHDhu4oG','s2zfsfK','teXnoIdLPjBPG6JOR7FMSyi','Bg9N','yuHZt3e','wMfqwwq','z1bwAem','qvbjioI/NUAoPEMxRUMIMooaGG','DxjS','DxbKyxrLu3rHDa','rLnqzLe','ChjVBxb0','s0jvuha','zwP5sfK','wMLeqNO','twrov1a','C2LvqMq','y3vYCMvUDf9SBa','v3DyDhG','teXn','iowBNUwKJsaTls0Tlq','t1blBKm','zffptve','zw5HyMXLza','DhjPBq','y2HHDf9JB21WBa','uLvotKLorW','y2fUy2vSx2XSBq','EKTZsK8','C1DSy3K','wujOsKm','mJrdvfbvCgS','ywjVCNq','yLbRzLu','r0vAtLC','CgfYC2u','zxiG','DNLoAK0','zsbYzxf1zxn0ia','y29UC3rYDwn0BW','Dw5RBM93BG','6k+35Rgc5BYa5AElicG','swnUtM8','whzRr0y','Agj2CKe','whnKBw0','yxbPx2TLEq','y29UDgv4Df9WCG','q2XovKy','mte0mJy4uwPYrNPK','B21WBgv0Aw9UCW','C3LZDgvT','DwrUA0i','DvzdDeK','rv9srvnqt05trq','BhvKzv9OzwfKzq','A2v5CW','wufuDui','ndqXBgTLy05k','pt09pt0GteXnia','DgvTCgvYyxr1CG','zg9erhu','Bw9KzwW','sgLxsM0','sungu2q','zxjVswS','uKvYBu8','kcGOlISPkYKRkq','mJuYnNzeChfQBW','6k+35Rgc5AsX6lsLoIa','vNPJvvG','rgvfAKm','D2fYBG','C2Prsfa','q0foq0vmteve','Bxz1BNu','5yE95PwW6lcd55sO','Cu9rD2y','y3vZDg9T','CMvZDwX0','y29Kzq','z2v0uMvHzgvY','vxbXzwq','DhHZCfu','5Q2J5zYO5Ase55cg5Asw6yoO6k+35Rgc77Ym6k+3','teXnioIVT+AXGUw3SUs4REATOUoaGG','C3vJy2vZCW','mNWWFdv8m3W0Fa','Cg9W','q3HKtuC','AKnVyKq','uMvXDwvZDcbHyG','5AEl5PAW6k+35Rgc44cc','ioIUVUE9RUI/H+wWJ+oaGEAiLIbbua','y0PMsg8','qMvHCMvYia','tM56swq','rhDIDKK','r2TJrNG','BwvZC2fNzq','5lI656M677Ym5y+V6io95PIV6k+35Rgc6kkR5OIQ','DvDoC0S'];_0x3f27=function(){return _0x5ee9de;};return _0x3f27();}import{taskQueue,TaskType,TaskStatus}from'../taskQueue.js';let currentLLMRequestController=null;const llmTaskControllers=new Map();eventSource['on'](_0x1cb675(0x4cb,0x56e,0x43c,0x557)+_0xef6bec(0x265,0x1c7,0x30d,0x310)+'_task',({taskId:_0x1e3e0e})=>{function _0x56fe5c(_0xd1d008,_0x3772f1,_0x117088,_0x20adc0){return _0x1cb675(_0xd1d008- -0x62,_0x3772f1-0x89,_0x117088-0xc5,_0x20adc0);}const _0xc66e9d=llmTaskControllers[_0x18e62d(-0x16d,-0x15c,-0x114,-0x168)](_0x1e3e0e);function _0x18e62d(_0x2d654c,_0x52aaf8,_0x32d2c4,_0x5ef1ba){return _0x1cb675(_0x32d2c4- -0x5cf,_0x52aaf8-0x35,_0x32d2c4-0x1c4,_0x2d654c);}_0xc66e9d&&(_0xc66e9d['abort'](),llmTaskControllers[_0x56fe5c(0x477,0x518,0x481,0x3f2)](_0x1e3e0e),console['log'](_0x18e62d(-0x183,-0x19a,-0x142,-0x16a)+'消:\x20'+_0x1e3e0e));});export function getLLMRequestController(){return currentLLMRequestController;}export function setLLMRequestController(_0x165f4c){currentLLMRequestController=_0x165f4c;}export function isLLMRequestActive(){return!!currentLLMRequestController;}export function abortLLMRequest(){function _0x4ea950(_0x4e0645,_0x27587c,_0x34ea9e,_0x3b5596){return _0xef6bec(_0x27587c- -0x12d,_0x27587c-0x4b,_0x34ea9e-0x1b6,_0x3b5596);}const _0x4b5d6d={};function _0x4efc46(_0x58463e,_0x2b9a71,_0x1cf3c1,_0x4413e5){return _0x1cb675(_0x58463e- -0x6a3,_0x2b9a71-0x2d,_0x1cf3c1-0x83,_0x1cf3c1);}_0x4b5d6d[_0x4efc46(-0x217,-0x1d7,-0x1c5,-0x1ce)]=_0x4ea950(0x5d,-0x29,0x77,-0x32);const _0x425415=_0x4b5d6d;currentLLMRequestController&&(currentLLMRequestController['abort'](),toastr[_0x4ea950(-0xa,0x35,0xd8,0xb3)](_0x425415[_0x4ea950(0x7c,0xcd,0x19,0xd8)]));}function _0x5ba9(_0x3827b7,_0x1a87f9){_0x3827b7=_0x3827b7-(-0x26c+0x89c+-0x573);const _0x271e84=_0x3f27();let _0x458d69=_0x271e84[_0x3827b7];if(_0x5ba9['CVyiJA']===undefined){var _0x2a4452=function(_0x5721c8){const _0x1f453e='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x24cbec='',_0x346a9e='',_0x39ef85=_0x24cbec+_0x2a4452;for(let _0x149eae=-0x656*-0x2+0x2407+-0x7*0x6f5,_0x591109,_0xb15fd4,_0x46248d=-0x1506+-0x1bbc+0x30c2;_0xb15fd4=_0x5721c8['charAt'](_0x46248d++);~_0xb15fd4&&(_0x591109=_0x149eae%(-0x1012+-0x68*0x5f+-0x123a*-0x3)?_0x591109*(-0xf3*0x1+-0x874+0x9a7)+_0xb15fd4:_0xb15fd4,_0x149eae++%(0x1b3c+-0x2*0xabd+-0xf5*0x6))?_0x24cbec+=_0x39ef85['charCodeAt'](_0x46248d+(0x1e8a+-0x9*-0x10e+-0x27fe))-(0xbe9*0x1+-0x510+-0x6cf)!==0x190e+0x17e3+0x1*-0x30f1?String['fromCharCode'](0x3*0x77e+0x11*-0x49+-0x10a2&_0x591109>>(-(0x242+0x10*0x1c1+0x2*-0xf28)*_0x149eae&0x1*0x2509+-0x189e+-0xc65)):_0x149eae:0x2709+-0x1b8b+0x2*-0x5bf){_0xb15fd4=_0x1f453e['indexOf'](_0xb15fd4);}for(let _0x2ac3d5=0x5*0x420+0x1ae1+0x1*-0x2f81,_0x542f6b=_0x24cbec['length'];_0x2ac3d5<_0x542f6b;_0x2ac3d5++){_0x346a9e+='%'+('00'+_0x24cbec['charCodeAt'](_0x2ac3d5)['toString'](0x15*-0x15+0x9*0x289+0x1508*-0x1))['slice'](-(-0x88a+-0x3*-0x13+0x853));}return decodeURIComponent(_0x346a9e);};_0x5ba9['mApqaW']=_0x2a4452,_0x5ba9['eeksrp']={},_0x5ba9['CVyiJA']=!![];}const _0x1244f5=_0x271e84[0x3f*0x6c+0x263d+-0x159b*0x3],_0x2a0487=_0x3827b7+_0x1244f5,_0x545c0d=_0x5ba9['eeksrp'][_0x2a0487];if(!_0x545c0d){const _0x5c149b=function(_0x356527){this['lbuQpf']=_0x356527,this['kCNtnz']=[0x44d+-0x20b*-0xf+-0x6fd*0x5,-0x10e2+-0x44c+-0x2*-0xa97,0x1ad8+0x1102+0xe9e*-0x3],this['LFLoIJ']=function(){return'newState';},this['znoYZn']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['TnLQBJ']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x5c149b['prototype']['CqMDwd']=function(){const _0xbe7a5e=new RegExp(this['znoYZn']+this['TnLQBJ']),_0x2b2a06=_0xbe7a5e['test'](this['LFLoIJ']['toString']())?--this['kCNtnz'][0x7*0x3b3+-0x573+-0x1471]:--this['kCNtnz'][-0x23*-0x101+0x4ea*-0x7+-0xbd];return this['CxzyQt'](_0x2b2a06);},_0x5c149b['prototype']['CxzyQt']=function(_0x42ac10){if(!Boolean(~_0x42ac10))return _0x42ac10;return this['usTpDm'](this['lbuQpf']);},_0x5c149b['prototype']['usTpDm']=function(_0x4c524c){for(let _0xd066e5=0x37d+0x1894+-0x1c11,_0x4254e9=this['kCNtnz']['length'];_0xd066e5<_0x4254e9;_0xd066e5++){this['kCNtnz']['push'](Math['round'](Math['random']())),_0x4254e9=this['kCNtnz']['length'];}return _0x4c524c(this['kCNtnz'][0xa75*0x1+0x1dc3+-0x2838]);},new _0x5c149b(_0x5ba9)['CqMDwd'](),_0x458d69=_0x5ba9['mApqaW'](_0x458d69),_0x5ba9['eeksrp'][_0x2a0487]=_0x458d69;}else _0x458d69=_0x545c0d;return _0x458d69;}export function formatPromptForDisplay(_0x46d5b0){const _0x511c7b={'mlHIn':function(_0x228cde,_0x411e7b){return _0x228cde>_0x411e7b;},'saXUd':function(_0x2f9960,_0x4fde99){return _0x2f9960===_0x4fde99;},'KwQjW':_0x468a37(-0x138,-0x11b,-0x14f,-0x174),'tRpRB':_0x1d810a(0x5d,-0x28,0x2d,-0x5e)+'1','UqajJ':_0x468a37(0x24,-0x2b,-0x51,-0xf2)+_0x468a37(0x83,0x3b,0xdd,0x45)+'aborted.','vLodj':_0x1d810a(0x14,-0x2,0xad,0x36)+_0x1d810a(0x29,-0x2d,0x112,0x46),'fzGvN':function(_0x4ba704,_0x1e112f){return _0x4ba704(_0x1e112f);},'aHsOq':_0x1d810a(-0x2a,0x2a,-0x87,-0x2b),'xLkAD':_0x1d810a(0x3c,0x1d,0x122,0xb3),'yLkJm':_0x468a37(-0xe4,-0x8c,-0x8e,-0x20),'rIeTX':function(_0x77a2e7,_0x4acf3d){return _0x77a2e7*_0x4acf3d;},'ntsXm':'xnUAL','gPVhC':'unknown','DlkuJ':function(_0x5e3f01,_0x144687){return _0x5e3f01(_0x144687);},'bwLfp':function(_0x587d38,_0x119db8){return _0x587d38===_0x119db8;},'Xsdmm':function(_0x19f79e,_0x2b300c){return _0x19f79e!==_0x2b300c;},'DSGoP':'CFRMH','Upqed':_0x468a37(-0xe0,-0x11c,-0x127,-0xc7),'rkUXc':_0x1d810a(0xdc,0x146,0x161,0x123),'FuklQ':_0x1d810a(-0x2d,-0x64,-0x9b,-0x2c)};if(typeof _0x46d5b0===_0x511c7b[_0x468a37(-0x160,-0x134,-0x1d8,-0x16a)])return _0x46d5b0;function _0x468a37(_0x5d6628,_0x3b1516,_0x465cb9,_0x1c017a){return _0x1cb675(_0x3b1516- -0x4c7,_0x3b1516-0x67,_0x465cb9-0x112,_0x1c017a);}if(Array[_0x1d810a(0x34,-0x40,0x57,0xb)](_0x46d5b0)){if(_0x1d810a(0x72,0xca,0x9d,0x123)!==_0x511c7b[_0x1d810a(0x3e,0x5b,0x86,0x4f)]){_0x60c34c=''+_0x299535['error'][_0x1d810a(0x13,-0x33,-0x5,-0x52)];const _0x3ade78=[];if(_0x5d5eb8['error']['type'])_0x3ade78[_0x468a37(-0x152,-0x110,-0x1d4,-0x63)](_0x468a37(-0x147,-0xbc,0x3,-0x142)+_0xe26771['error']['type']);if(_0x50ea6a[_0x1d810a(-0x8e,0x1,-0x9,-0xa)][_0x468a37(-0x1fc,-0x136,-0x14f,-0x165)])_0x3ade78['push'](_0x468a37(-0x40,-0x90,-0x148,-0xda)+_0x25e3e4[_0x468a37(-0x61,-0xdb,-0x69,-0x10)][_0x1d810a(-0x89,0x4c,-0x5e,-0x65)]);_0x511c7b['mlHIn'](_0x3ade78[_0x1d810a(-0x2b,-0x32,-0x14,-0x2a)],0x3*-0x5e7+-0x1*0x24cb+-0x20*-0x1b4)&&(_0x49adfb+='\x20('+_0x3ade78[_0x1d810a(0xfb,0xfe,0x167,0x9c)](',\x20')+')');}else{const _0x5afcc6=[];return _0x46d5b0['forEach']((_0x482c4a,_0x1c011f)=>{const _0x360194={'HmhHi':function(_0x9e5a21,_0x18c4bc){function _0x44343f(_0x5d1d32,_0x31a009,_0x4c5386,_0x57c9fc){return _0x5ba9(_0x5d1d32- -0x2b9,_0x31a009);}return _0x511c7b[_0x44343f(-0xbc,-0x133,-0x38,-0xa5)](_0x9e5a21,_0x18c4bc);},'sjQHP':_0x511c7b[_0x4f5743(0xd8,0x134,0x17c,0x1f7)],'KBUPp':_0x511c7b['tRpRB'],'AmtxF':_0x511c7b[_0x405b18(-0x146,-0x1a9,-0x82,-0xc3)],'wHkkX':'Request\x20ab'+_0x4f5743(0x52,0xd8,0x8b,0x174),'IBJEQ':_0x511c7b[_0x4f5743(0x159,0xe8,0xdb,0x15c)],'pBhiq':function(_0x909e01,_0x27d8a5){function _0x35f45f(_0x3be6bb,_0x5ad525,_0x77ef20,_0xfc62fb){return _0x4f5743(_0x3be6bb,_0x77ef20- -0x337,_0x77ef20-0x196,_0xfc62fb-0x6e);}return _0x511c7b[_0x35f45f(-0x142,-0x12f,-0x1e2,-0x2ab)](_0x909e01,_0x27d8a5);},'IcnNo':_0x511c7b[_0x4f5743(0x127,0x1a0,0x1da,0x209)],'OexbU':_0x511c7b[_0x405b18(-0x13d,-0x11a,-0x1c4,-0x102)],'LWFZb':function(_0x2f4017,_0x184cbd){return _0x511c7b['saXUd'](_0x2f4017,_0x184cbd);},'PiVRC':_0x511c7b['yLkJm'],'lkyNv':function(_0x13ff20,_0x3c9a23){return _0x13ff20/_0x3c9a23;},'uWNsK':function(_0x3dc9d8,_0x220f0d){function _0x37bbcf(_0x12a77e,_0x2fe091,_0x3d78b7,_0xe133d9){return _0x405b18(_0x12a77e-0x5b1,_0x2fe091-0x1a7,_0x3d78b7,_0xe133d9-0xb1);}return _0x511c7b[_0x37bbcf(0x46f,0x422,0x3ec,0x4f7)](_0x3dc9d8,_0x220f0d);},'txspU':function(_0x46a328,_0x2f0d22){return _0x46a328!==_0x2f0d22;},'NzOzB':_0x511c7b[_0x4f5743(0xcd,0xf2,0x6b,0x7b)]};function _0x405b18(_0x35e96d,_0x28f3a2,_0x3ffc4b,_0x28f7ad){return _0x1d810a(_0x35e96d-0xe3,_0x3ffc4b,_0x3ffc4b-0x108,_0x35e96d- -0x19c);}const _0x16ae46=_0x482c4a[_0x4f5743(0xe9,0x17d,0x1fc,0xf6)]||_0x511c7b[_0x4f5743(0x219,0x1a2,0x13a,0x154)],_0x39b203=_0x511c7b[_0x405b18(-0x1b6,-0x26d,-0x170,-0x1a9)](getRoleLabel,_0x16ae46);function _0x4f5743(_0x188b23,_0x5e8d5d,_0xed765a,_0xc0118c){return _0x1d810a(_0x188b23-0x178,_0x188b23,_0xed765a-0x1c8,_0x5e8d5d-0xb6);}_0x5afcc6['push'](''+'═'['repeat'](0xeed+-0x24d3+-0x2c3*-0x8)),_0x5afcc6[_0x4f5743(0x13d,0x77,0x3a,0x69)]('【'+_0x39b203+'】'),_0x5afcc6[_0x4f5743(-0x44,0x77,0xef,-0x15)](''+'─'['repeat'](-0xc8e+0x48+-0x3*-0x428));const _0x325b3b=_0x482c4a[_0x4f5743(0x6e,0xd4,0xe7,0x147)];if(_0x511c7b['bwLfp'](typeof _0x325b3b,'string')){if(_0x511c7b[_0x405b18(-0x89,-0xf1,-0xb4,-0x114)](_0x511c7b['DSGoP'],_0x511c7b[_0x405b18(-0xeb,-0x101,-0x178,-0x13f)])){_0x1f369c=''+_0x4793d8[_0x405b18(-0x1a6,-0x17d,-0x1c3,-0xfb)][_0x405b18(-0x1ee,-0x211,-0x28b,-0x232)];const _0x16fca8=[];if(_0x57bbf1['error'][_0x405b18(-0x12c,-0x1dd,-0xa6,-0xde)])_0x16fca8[_0x405b18(-0x1db,-0x181,-0x158,-0x231)](_0x405b18(-0x187,-0x19b,-0xe5,-0x141)+_0x2f0711[_0x405b18(-0x1a6,-0x19d,-0x236,-0x1b9)]['type']);if(_0x52cb0b[_0x405b18(-0x1a6,-0x241,-0x108,-0x20e)][_0x405b18(-0x201,-0x281,-0x193,-0x2b0)])_0x16fca8[_0x4f5743(0xcb,0x77,0xed,0x11f)](_0x405b18(-0x15b,-0x1a9,-0x16b,-0x183)+_0x4587a7['error'][_0x4f5743(0x5,0x51,-0xe,0xa7)]);_0x16fca8[_0x4f5743(0x110,0x8c,-0x1b,0x40)]>0x1d3*0x2+-0x24bc+0x9a*0x37&&(_0x40bd5e+='\x20('+_0x16fca8[_0x405b18(-0x100,-0xfb,-0x13f,-0x52)](',\x20')+')');}else _0x5afcc6[_0x405b18(-0x1db,-0x116,-0x199,-0x1b2)](_0x325b3b);}else Array['isArray'](_0x325b3b)&&_0x325b3b[_0x405b18(-0x15e,-0x1ff,-0x15f,-0x1b2)](_0xf3b658=>{function _0x4fc39b(_0x1929e4,_0x58a7dd,_0x2118d5,_0x4a6650){return _0x4f5743(_0x2118d5,_0x58a7dd-0x19a,_0x2118d5-0x26,_0x4a6650-0x11e);}function _0x16c393(_0x250df6,_0x177b02,_0x109335,_0x244692){return _0x405b18(_0x250df6-0x661,_0x177b02-0x1ed,_0x177b02,_0x244692-0x1af);}if(_0x360194[_0x16c393(0x566,0x5cb,0x5bc,0x5ff)](_0xf3b658[_0x4fc39b(0x2d4,0x2c0,0x2f8,0x1fd)],_0x360194[_0x4fc39b(0x424,0x360,0x322,0x296)])){if(_0x360194[_0x4fc39b(0x33d,0x2ad,0x2f5,0x227)]!==_0x360194['OexbU']){if(_0x360194['HmhHi'](_0x13bb65['name'],_0x360194['sjQHP'])){const _0x5639d2=_0x360194[_0x16c393(0x5b7,0x582,0x5b5,0x532)][_0x16c393(0x516,0x5de,0x4a2,0x475)]('|');let _0xaec962=0xd46+0x1b36+0x143e*-0x2;while(!![]){switch(_0x5639d2[_0xaec962++]){case'0':_0x5ca9a2[_0x4fc39b(0x2d3,0x339,0x363,0x271)](_0x360194['AmtxF']);continue;case'1':return;case'2':_0xd2da7b=!![];continue;case'3':_0x14f09c['delete'](_0xfcb8d8);continue;case'4':const _0x545922={};_0x545922[_0x16c393(0x529,0x571,0x590,0x529)]=_0x360194[_0x4fc39b(0x3b3,0x37f,0x3bc,0x3f6)],_0x545922[_0x16c393(0x473,0x45c,0x45b,0x432)]=_0x360194[_0x16c393(0x4ae,0x4bc,0x51c,0x44b)];const _0x34b1d2={};_0x34b1d2['success']=![],_0x34b1d2[_0x16c393(0x45f,0x471,0x508,0x4f8)]=null,_0x34b1d2['id']=_0x2a691d,_0x34b1d2[_0x16c393(0x4bb,0x547,0x53b,0x41d)]=_0x545922,_0x171bad[_0x4fc39b(0x2f2,0x23d,0x2e4,0x275)](_0x498565['LLM_EXECUT'+_0x4fc39b(0x385,0x36c,0x353,0x3de)],_0x34b1d2);continue;case'5':_0x880190[_0x16c393(0x5b4,0x632,0x61e,0x5eb)+'us'](_0x103983,_0x2228f0[_0x4fc39b(0x2d9,0x380,0x3b3,0x346)]);continue;}break;}}_0x559baa[_0x16c393(0x4bb,0x4ce,0x44a,0x47f)](_0x360194[_0x4fc39b(0x310,0x2f3,0x3a1,0x32b)],_0x31c19);const _0x4069be=_0x4fc39b(0x2a4,0x28f,0x236,0x1f0)+_0x4777ea[_0x16c393(0x473,0x3bf,0x53b,0x3c5)];_0x4a152d&&_0x360194['pBhiq'](_0x43991d,_0x4069be);_0x12a54b[_0x4fc39b(0x1fe,0x246,0x298,0x2f1)](_0x13164b[_0x16c393(0x473,0x415,0x3d9,0x3c1)]),_0x92eae2[_0x16c393(0x4a5,0x3f6,0x415,0x49e)+'sk'](_0x2b2ceb,![]),_0x5b3f9b['delete'](_0x5b699f);const _0x316f79={};_0x316f79[_0x4fc39b(0x236,0x1f1,0x23b,0x16d)]=![],_0x316f79[_0x4fc39b(0x2a8,0x1ea,0x268,0x1c6)]=_0x4069be,_0x316f79['id']=_0x394304,_0x44fd2c[_0x4fc39b(0x18b,0x23d,0x2d7,0x2cc)](_0x2130e5[_0x16c393(0x51d,0x4ce,0x47e,0x4f8)+'E_RESPONSE'],_0x316f79);}else _0x5afcc6['push'](_0xf3b658[_0x4fc39b(0x2d4,0x225,0x2ce,0x264)]||'');}else{if(_0x360194[_0x16c393(0x580,0x528,0x4f7,0x504)](_0xf3b658['type'],_0x360194[_0x4fc39b(0x19b,0x222,0x1eb,0x2d4)])){const _0x414a98=_0xf3b658[_0x4fc39b(0x222,0x295,0x228,0x236)]?.[_0x4fc39b(0x3a1,0x33e,0x36d,0x2fc)]||'';if(_0x414a98[_0x16c393(0x523,0x46e,0x4d6,0x4a1)](_0x4fc39b(0x1e5,0x220,0x168,0x2b6))){const _0x2a02e7=_0x414a98['match'](/^data:([^;]+);/),_0x485be6=_0x2a02e7?_0x2a02e7[0x22d*0x4+0x205a+-0x290d]:_0x16c393(0x5d3,0x5a3,0x66c,0x5df),_0x485f6f=_0x414a98['split'](',')[0xf95*0x2+0x5bd+-0x24e6]||'',_0x1f2c34=Math[_0x4fc39b(0x206,0x232,0x26b,0x1b1)](_0x360194[_0x4fc39b(0x2bd,0x30e,0x280,0x373)](_0x360194[_0x16c393(0x583,0x630,0x5bd,0x647)](_0x360194[_0x16c393(0x475,0x4ca,0x4fc,0x428)](_0x485f6f[_0x4fc39b(0x1f7,0x226,0x277,0x2c5)],0x9*-0x33b+0x22b1+-0x59b),0x7c6+-0x38f+0x5*-0xd7),-0x19e6+0x2546+-0x760));_0x5afcc6[_0x4fc39b(0x2cf,0x211,0x1c9,0x1e0)](_0x4fc39b(0x27f,0x2b6,0x225,0x222)+':\x20'+_0x485be6+_0x16c393(0x57b,0x58f,0x5e0,0x517)+_0x1f2c34+_0x16c393(0x4ec,0x53a,0x449,0x444));}else _0x360194[_0x4fc39b(0x16e,0x1ee,0x18a,0x217)](_0x360194[_0x4fc39b(0x200,0x214,0x175,0x2c3)],_0x360194[_0x4fc39b(0x160,0x214,0x25a,0x2aa)])?_0x2d956e=_0x4b8970:_0x5afcc6[_0x4fc39b(0x291,0x211,0x2ac,0x2c5)](_0x16c393(0x490,0x474,0x3dc,0x435)+_0x414a98+']');}}});_0x5afcc6[_0x4f5743(0x2d,0x77,0xb8,0x79)]('');}),_0x5afcc6['join']('\x0a');}}function _0x1d810a(_0x52bd81,_0x4b0d3e,_0xd37973,_0x336a74){return _0xef6bec(_0x336a74- -0x164,_0x4b0d3e-0x1be,_0xd37973-0xda,_0x4b0d3e);}if(_0x511c7b['bwLfp'](typeof _0x46d5b0,_0x511c7b[_0x468a37(-0xaa,-0xc3,0x1,-0x5b)])&&_0x511c7b[_0x468a37(-0x5b,0x42,-0x40,0x1d)](_0x46d5b0,null))return JSON['stringify'](_0x46d5b0,null,-0x1e47+0x1edc+-0x93);return String(_0x46d5b0);}export function getRoleLabel(_0x235a5b){const _0x4374ae={};_0x4374ae[_0x3827af(0xe8,0x210,0x18f,0x25b)]=_0x329677(0x4a9,0x4c0,0x3f4,0x32e),_0x4374ae[_0x3827af(0x129,0x3b,0xc8,0xaa)]=_0x3827af(-0x36,0xee,0x3b,0xb2);const _0x2d7835=_0x4374ae,_0x4b3970={};function _0x329677(_0x1d09f1,_0x311282,_0x242cbe,_0x1e8a59){return _0xef6bec(_0x242cbe-0x2c1,_0x311282-0x45,_0x242cbe-0xac,_0x311282);}_0x4b3970[_0x3827af(0x1a4,0x1ee,0x1bd,0x242)]=_0x2d7835[_0x3827af(0x231,0x1fe,0x18f,0x208)],_0x4b3970[_0x329677(0x426,0x589,0x4de,0x589)]='用户',_0x4b3970[_0x329677(0x508,0x5c6,0x4fc,0x584)]='AI助手';function _0x3827af(_0x206097,_0x7b2560,_0x1f1901,_0x113f38){return _0xef6bec(_0x1f1901- -0xc0,_0x7b2560-0x10a,_0x1f1901-0x59,_0x206097);}_0x4b3970[_0x329677(0x381,0x410,0x417,0x4b7)]=_0x2d7835['yFlrB'],_0x4b3970['tool']='工具';const _0x29759c=_0x4b3970;return _0x29759c[_0x235a5b]||_0x235a5b;}export function getCurrentLLMProfile(){const _0x2c1af5=extension_settings[extensionName][_0x544c5c(-0x63,-0x102,-0xe0,-0x1a4)+'es']||{};function _0x303d35(_0x9a548a,_0xfb3546,_0x5a4127,_0xfc4030){return _0xef6bec(_0xfb3546- -0x1e6,_0xfb3546-0x1c7,_0x5a4127-0x8e,_0x9a548a);}const _0x51f07a=extension_settings[extensionName][_0x544c5c(-0x102,-0x151,-0xc9,-0xa7)+_0x544c5c(-0x199,-0xcb,-0x173,-0x1eb)];function _0x544c5c(_0x56f088,_0x2fca84,_0x3367d7,_0x5f450e){return _0x1cb675(_0x3367d7- -0x5b6,_0x2fca84-0x143,_0x3367d7-0x1a8,_0x56f088);}return _0x2c1af5[_0x51f07a]||_0x2c1af5[Object['keys'](_0x2c1af5)[0xa5f+0x416*-0x1+-0x649*0x1]]||{};}function _0xef6bec(_0x1f8c78,_0x854a2f,_0x2c1c19,_0x488ef1){return _0x5ba9(_0x1f8c78-0x3d,_0x488ef1);}export function getCurrentTestContext(){const _0x116dd8=extension_settings[extensionName][_0x1d3dc9(0x2b3,0x32b,0x261,0x2ee)+'xt_profile'+'s']||{};function _0x2377df(_0x28691f,_0x409e5a,_0x4e5944,_0x678d7c){return _0x1cb675(_0x409e5a- -0x555,_0x409e5a-0xa9,_0x4e5944-0x24,_0x28691f);}function _0x1d3dc9(_0x277d1b,_0x1c58f7,_0x52a263,_0x5086a3){return _0x1cb675(_0x277d1b- -0xfa,_0x1c58f7-0x14,_0x52a263-0x1d1,_0x52a263);}const _0x73456f=extension_settings[extensionName][_0x2377df(-0x99,-0x14c,-0xde,-0x1f5)+_0x1d3dc9(0x306,0x365,0x2f0,0x27a)+'_profile'];return _0x116dd8[_0x73456f]||_0x116dd8[Object[_0x2377df(0x6a,-0x41,-0xb,-0xd4)](_0x116dd8)[0x13a3+-0x2*0xaec+-0x235*-0x1]]||{};}export function getEffectiveConfigForRequestType(_0xc29b08){const _0x55aa65=extension_settings[extensionName]['llm_reques'+'t_type_con'+_0x410e6a(0x518,0x3e8,0x496,0x4b5)]||{},_0xfc0462={};_0xfc0462[_0x2043ab(0x40e,0x40f,0x4cf,0x50e)+'e']='默认',_0xfc0462['context_pr'+_0x2043ab(0x495,0x53d,0x49b,0x4b9)]='默认';const _0x3b9a81=_0x55aa65[_0xc29b08]||_0xfc0462,_0x331692=extension_settings[extensionName][_0x410e6a(0x487,0x4f0,0x4c9,0x45d)+'es']||{},_0x216a24=extension_settings[extensionName][_0x2043ab(0x424,0x3dc,0x3fe,0x3ef)+_0x410e6a(0x421,0x3b6,0x40a,0x351)+'s']||{};function _0x410e6a(_0x2eda88,_0x238b48,_0xda455c,_0x18ab64){return _0x1cb675(_0xda455c- -0xd,_0x238b48-0x3e,_0xda455c-0x160,_0x18ab64);}const _0x1b8ef3=_0x3b9a81['api_profil'+'e']||'默认',_0x3b599f=_0x331692[_0x1b8ef3]||_0x331692[Object[_0x2043ab(0x561,0x4cd,0x565,0x62c)](_0x331692)[0x1*-0x1447+0x2*0x112f+-0xe17]]||{},_0x447f97=_0x3b9a81['context_pr'+'ofile']||'默认',_0x31490d=_0x216a24[_0x447f97]||_0x216a24[Object['keys'](_0x216a24)[0x21e4+-0x178+-0x206c]]||{},_0x11780c={};_0x11780c[_0x2043ab(0x40b,0x418,0x487,0x4d0)]=_0x3b599f[_0x2043ab(0x457,0x495,0x487,0x4e3)]||'';function _0x2043ab(_0x32a53c,_0x3e1308,_0x432dc8,_0x5bbc3e){return _0xef6bec(_0x432dc8-0x2e3,_0x3e1308-0x156,_0x432dc8-0x1cc,_0x3e1308);}return _0x11780c['api_key']=_0x3b599f[_0x2043ab(0x4b6,0x51c,0x55b,0x4c7)]||'',_0x11780c[_0x2043ab(0x532,0x562,0x56b,0x57a)]=_0x3b599f[_0x410e6a(0x598,0x53c,0x50d,0x562)]||'',_0x11780c[_0x2043ab(0x504,0x5b2,0x569,0x611)+'e']=_0x3b599f[_0x2043ab(0x625,0x59c,0x569,0x51b)+'e']??-0x1*-0x11e3+0x898+-0x1a7b+0.7,_0x11780c[_0x2043ab(0x4cf,0x436,0x453,0x4f5)]=_0x3b599f[_0x410e6a(0x46b,0x418,0x3f5,0x3db)]??0x931+-0x2058+-0x3*-0x7b8,_0x11780c[_0x410e6a(0x421,0x3e3,0x3ac,0x451)]=_0x3b599f[_0x2043ab(0x491,0x398,0x40a,0x3bb)]??0x1c3e+0xdf*0x7+0x1*-0x2057,_0x11780c[_0x2043ab(0x39e,0x3ff,0x420,0x3ac)]=_0x3b599f[_0x2043ab(0x355,0x491,0x420,0x422)]??![],_0x11780c[_0x410e6a(0x42d,0x4df,0x4b2,0x408)+'xy']=_0x3b599f[_0x2043ab(0x520,0x5b1,0x510,0x47c)+'xy']??![],_0x11780c['context']=_0x31490d,_0x11780c;}export function buildPromptForRequestType(_0x3f6fc2,_0x333f6e=''){const _0x13c23f={'XUxmU':_0x4466be(0x1c0,0x222,0x170,0x214)+_0x4466be(0x1f7,0x14b,0x11a,0x1a7),'WIdOH':function(_0x47c7d5,_0x48c87c){return _0x47c7d5===_0x48c87c;},'yiwtq':'YvFOT','CZCQR':function(_0x5e2b81,_0x436262){return _0x5e2b81===_0x436262;},'qvVTt':_0x272fc5(0x3b2,0x35b,0x3a9,0x3d5),'uMsfr':_0x4466be(0x2b9,0x277,0x1bc,0x209),'bckiH':'user','VfTxZ':_0x272fc5(0x2ca,0x3ed,0x442,0x38d),'ifPHS':_0x272fc5(0x3a9,0x312,0x2f4,0x379),'xHPZa':function(_0x5c06e0,_0x4dac4e){return _0x5c06e0===_0x4dac4e;},'DwTPP':_0x272fc5(0x4c8,0x409,0x538,0x4ae),'vcLad':'assistant','eroIk':function(_0x1f9d24,_0xc0bdd6){return _0x1f9d24(_0xc0bdd6);}},_0x4bc60c=extension_settings[extensionName]['llm_reques'+_0x272fc5(0x42b,0x51b,0x41d,0x45d)+_0x272fc5(0x45f,0x491,0x3dd,0x48e)]||{},_0x6a5b7c={};_0x6a5b7c['context_pr'+_0x4466be(0x257,0x29f,0x2b3,0x220)]='默认';const _0x4745d8=_0x4bc60c[_0x3f6fc2]||_0x6a5b7c,_0x1dcf2e=_0x4745d8['context_pr'+_0x272fc5(0x4f7,0x369,0x4d5,0x435)]||'默认',_0x17f697=extension_settings[extensionName][_0x272fc5(0x43b,0x37f,0x445,0x398)+_0x4466be(0x12b,0x1f9,0x293,0x1ed)+'s']||{},_0x5c3dd2=_0x17f697[_0x1dcf2e]||_0x17f697[Object['keys'](_0x17f697)[0x2067+-0x1548+-0x49*0x27]]||{};function _0x272fc5(_0x27c5ff,_0x1072e2,_0x53dc27,_0x426100){return _0xef6bec(_0x426100-0x27d,_0x1072e2-0x41,_0x53dc27-0x70,_0x27c5ff);}const _0x316a5a=[];if(_0x5c3dd2['entries']&&Array[_0x4466be(0x115,0x171,0x11d,0x1d7)](_0x5c3dd2['entries']))_0x5c3dd2['entries'][_0x4466be(0x2b5,0x2a4,0x14c,0x20a)](_0x5e8977=>{const _0x1d86df={};function _0x4949b3(_0x532fda,_0x328077,_0x5c81b7,_0x5ecea5){return _0x4466be(_0x532fda-0x1b6,_0x532fda,_0x5c81b7-0x171,_0x5c81b7- -0x67);}function _0x3f7fa3(_0x1bf9ab,_0x3a60e1,_0x2d5a1a,_0x3dae8d){return _0x272fc5(_0x1bf9ab,_0x3a60e1-0x16e,_0x2d5a1a-0xeb,_0x3a60e1-0x53);}_0x1d86df[_0x4949b3(0x17a,0xde,0x127,0x199)]=_0x13c23f[_0x4949b3(0x2ef,0x296,0x247,0x2b5)];const _0x3df3aa=_0x1d86df;if(_0x13c23f['WIdOH'](_0x13c23f['yiwtq'],'YvFOT')){if(!_0x5e8977[_0x3f7fa3(0x4e1,0x531,0x501,0x5df)])return;if(!_0x5e8977[_0x3f7fa3(0x447,0x452,0x399,0x3bd)]||_0x5e8977['content'][_0x4949b3(0x314,0x30e,0x263,0x207)]()==='')return;if(_0x13c23f[_0x3f7fa3(0x3eb,0x410,0x4ca,0x445)](_0x5e8977['triggerMod'+'e'],_0x13c23f[_0x3f7fa3(0x41b,0x427,0x3f1,0x385)])){if(!_0x333f6e||!checkTriggerWords(_0x5e8977[_0x3f7fa3(0x42a,0x438,0x4b7,0x3de)+'ds'],_0x333f6e)){if(_0x13c23f[_0x4949b3(0x8f,0x122,0x13c,0x6f)](_0x13c23f[_0x3f7fa3(0x4d5,0x4fc,0x5a6,0x546)],_0x3f7fa3(0x3a9,0x45d,0x3c9,0x393)))return _0x4619a7;else return;}}const _0x3aac0c={};_0x3aac0c['role']=_0x5e8977[_0x3f7fa3(0x491,0x4fb,0x47f,0x56d)]||_0x13c23f[_0x4949b3(0xe2,0x1b0,0x149,0x1cc)],_0x3aac0c[_0x4949b3(0x24a,0x12d,0x183,0x10d)]=_0x5e8977[_0x4949b3(0x109,0x10f,0x183,0xfa)],_0x316a5a[_0x4949b3(0x15f,0x106,0x126,0x70)](_0x3aac0c);}else{_0x53ca7=_0x6987a5+(_0x3f7fa3(0x3f6,0x462,0x4fa,0x395)+_0x4949b3(0x69,0x9e,0x12c,0xae));const _0x38db7c={};_0x38db7c[_0x3f7fa3(0x46a,0x49d,0x49d,0x42e)+'pe']=_0x3df3aa[_0x3f7fa3(0x352,0x3f6,0x3d8,0x3a6)],_0x38db7c[_0x4949b3(0x294,0x1cb,0x234,0x2bc)+_0x4949b3(0x2a0,0x224,0x21d,0x2ad)]=_0x3f7fa3(0x31b,0x3de,0x41f,0x46d)+_0x2061fa,_0x3b019f=_0x38db7c;const _0x3932ae={};_0x3932ae[_0x4949b3(0x327,0x24f,0x289,0x25a)]=_0x473077,_0x3932ae[_0x4949b3(0x211,0x244,0x235,0x2e1)]=_0x53d3e9,_0x3932ae[_0x3f7fa3(0x502,0x556,0x536,0x523)+'e']=_0x38615e,_0x3932ae[_0x3f7fa3(0x4ce,0x440,0x3f2,0x375)]=_0x1337c2,_0x3932ae[_0x3f7fa3(0x3ed,0x3f7,0x3b7,0x495)]=_0x50e265,_0x3932ae['stream']=_0x254fb3,_0x2c340a=_0x3932ae;}});else _0x5c3dd2[_0x272fc5(0x38d,0x428,0x437,0x443)]&&Array[_0x272fc5(0x360,0x34c,0x373,0x3ec)](_0x5c3dd2[_0x4466be(0x271,0x2b7,0x1ff,0x22e)])&&_0x5c3dd2['history'][_0x272fc5(0x49b,0x49a,0x44b,0x41f)](_0x8e3923=>{function _0x33074b(_0x2dfb05,_0x42e06d,_0x575d4e,_0x2611c4){return _0x272fc5(_0x575d4e,_0x42e06d-0x14d,_0x575d4e-0x82,_0x2dfb05- -0x511);}function _0x9553e3(_0x406383,_0x228894,_0x440dc2,_0x5ec726){return _0x4466be(_0x406383-0x1cd,_0x228894,_0x440dc2-0x1df,_0x406383-0x9c);}if(_0x9553e3(0x214,0x256,0x16d,0x2c8)!==_0x13c23f[_0x33074b(-0x79,-0xf,-0xbd,0x20)]){const _0x1d8175=_0x5721c8[_0x1f453e][_0x9553e3(0x348,0x3ea,0x2e0,0x3db)+'es']||{},_0x16454b=_0x24cbec[_0x346a9e]['current_ll'+_0x33074b(-0xe3,-0x64,-0x1b0,-0xee)];return _0x1d8175[_0x16454b]||_0x1d8175[_0x39ef85[_0x9553e3(0x386,0x336,0x41d,0x443)](_0x1d8175)[0x8d2*0x1+-0x48*0x29+0x2b6]]||{};}else{if(_0x8e3923[_0x9553e3(0x321,0x2b8,0x311,0x333)]&&_0x8e3923[_0x9553e3(0x321,0x272,0x35a,0x275)]['trim']()!==''){if(_0x13c23f[_0x33074b(-0xcf,-0x17f,-0x111,-0x18e)]===_0x13c23f['ifPHS']){const _0x5d6049={};_0x5d6049[_0x9553e3(0x32f,0x313,0x3de,0x351)]=_0x13c23f[_0x33074b(-0x14c,-0x1c7,-0x19e,-0x144)],_0x5d6049[_0x9553e3(0x286,0x336,0x346,0x2cb)]=_0x8e3923['user'],_0x316a5a[_0x33074b(-0x16f,-0xf5,-0x237,-0x19c)](_0x5d6049);}else return!!_0x4829eb;}if(_0x8e3923[_0x33074b(-0x59,-0x7e,-0x46,0x20)]&&_0x8e3923[_0x9553e3(0x33f,0x303,0x2b2,0x382)][_0x33074b(-0x32,-0x16,-0x3b,0x99)]()!==''){if(_0x13c23f['xHPZa'](_0x13c23f[_0x33074b(-0x137,-0x17b,-0xc3,-0xd9)],_0x33074b(-0x63,-0xce,-0x4b,0x5a))){const _0x2c1c82={};_0x2c1c82[_0x9553e3(0x32f,0x282,0x386,0x34c)]=_0x13c23f['vcLad'],_0x2c1c82[_0x33074b(-0x112,-0xb7,-0x6d,-0xb7)]=_0x8e3923['assistant'],_0x316a5a['push'](_0x2c1c82);}else return;}}});const _0x2e0924=_0x13c23f[_0x4466be(0x373,0x2c8,0x2a8,0x2f3)](mergeAdjacentMessages,_0x316a5a);function _0x4466be(_0x4467d8,_0x55dd46,_0x461bb6,_0x36e6ae){return _0xef6bec(_0x36e6ae-0x68,_0x55dd46-0x153,_0x461bb6-0x1cd,_0x55dd46);}const _0x24150a=_0x13c23f[_0x4466be(0x2fb,0x3a2,0x322,0x2f3)](processRollPlaceholders,_0x2e0924);return _0x24150a;}const _0x546311={};_0x546311['image_gen']=_0xef6bec(0x173,0xb7,0xb7,0x233),_0x546311[_0xef6bec(0x142,0x7f,0x7c,0x155)+'n']=_0x1cb675(0x493,0x432,0x48f,0x556),_0x546311['char_displ'+'ay']=_0xef6bec(0x220,0x1f2,0x1e8,0x194),_0x546311[_0xef6bec(0x240,0x173,0x2bc,0x30e)+'y']='角色/服装修改',_0x546311[_0xef6bec(0x1ef,0x153,0x1f5,0x130)+'n']='翻译',_0x546311['tag_modify']=_0x1cb675(0x444,0x500,0x3f0,0x471);const REQUEST_TYPE_NAMES=_0x546311;function _0x1cb675(_0x15ce82,_0x13aa8a,_0xc0b9,_0x261aa9){return _0x5ba9(_0x15ce82-0x2cf,_0x261aa9);}export async function executeTypedLLMRequest(_0x333596,_0x4f9711,_0x8c1a27,_0x3352cf=null){const _0x214103={'fQrIw':_0x4bd747(0x362,0x389,0x30d,0x30f)+'+$','cQvDt':_0x4bd747(0x2ab,0x322,0x28a,0x28f)+_0x4bd747(0x242,0x2cd,0x2f0,0x2e4)+'aborted.','YDhVX':_0x373163(0x1c4,0x253,0x18d,0x2f5),'nwCzR':'Request\x20ab'+_0x4bd747(0x21d,0x20b,0x206,0x166),'CHsat':function(_0xbd0a62,_0x28e44e){return _0xbd0a62===_0x28e44e;},'jvibq':function(_0x3e0897,_0xcb1378,_0x26ef86){return _0x3e0897(_0xcb1378,_0x26ef86);},'aPwUm':_0x373163(0x2f4,0x356,0x331,0x34d),'ZiLML':function(_0x1680bc){return _0x1680bc();},'NMWHe':_0x373163(0x20f,0x271,0x2b3,0x292),'RiDfl':function(_0x22d2a9,_0x1f39cf){return _0x22d2a9>_0x1f39cf;},'TqehW':_0x4bd747(0x27c,0x20e,0x204,0x2a6),'gLnPP':_0x4bd747(0x1c3,0x122,0x184,0x251),'trjze':'流式解析警告:','XJGsl':_0x4bd747(0x100,0x1a5,0x1b3,0x178),'dHnUZ':'AI助手','aBxJk':'函数调用','QtjkK':function(_0x3f648d,_0x2fb6f5){return _0x3f648d(_0x2fb6f5);},'MwKwz':function(_0x7625fc,_0x317532){return _0x7625fc>_0x317532;},'LzLzu':'/v1/','ukeMB':function(_0xec14c1,_0x1cee68){return _0xec14c1+_0x1cee68;},'GEZNW':_0x4bd747(0x1d5,0x250,0x268,0x20b),'jdAMh':function(_0x2211b7,_0xea15e){return _0x2211b7(_0xea15e);},'mvunu':function(_0x1178ab,_0x412477){return _0x1178ab||_0x412477;},'VzcmT':_0x4bd747(0x2c4,0x2a7,0x1f8,0x1ae)+_0x4bd747(0x257,0x1c6,0x18b,0x12e),'ICFSd':function(_0xd7016,_0x4f8b0e){return _0xd7016(_0x4f8b0e);},'SKSqN':function(_0x9feba7,_0x5ead45){return _0x9feba7!==_0x5ead45;},'OoVAX':'oWEOd','gbpMz':function(_0x3cc80e,_0x493492){return _0x3cc80e===_0x493492;},'pTxQB':_0x4bd747(0x320,0x288,0x2e7,0x237),'pjaYm':_0x373163(0x201,0x242,0x2d4,0x27e),'HiWJm':_0x373163(0x356,0x398,0x2e3,0x3b2),'jlpTF':function(_0x39a8b5,_0xc37698){return _0x39a8b5+_0xc37698;},'JStri':_0x4bd747(0x243,0x102,0x17d,0x10b),'nLzCA':function(_0x2a59b4,_0x58c761){return _0x2a59b4!==_0x58c761;},'uBhNE':'jaChi','NooyJ':function(_0x529c95,_0x68dc75){return _0x529c95(_0x68dc75);},'HhYDe':function(_0x1aa55f,_0x40a92f){return _0x1aa55f===_0x40a92f;},'aumFW':'latTs','cJfHo':function(_0x35619b,_0x3413f1,_0x2eaa40){return _0x35619b(_0x3413f1,_0x2eaa40);},'HXvGr':'POST','udnkB':function(_0x54b512,_0x4d4ebf){return _0x54b512===_0x4d4ebf;},'NPdEg':_0x4bd747(0x28b,0x1e6,0x274,0x1c0),'vxLti':_0x373163(0x3cc,0x317,0x26a,0x261),'JLbdf':function(_0x4a465b,_0x274919){return _0x4a465b!==_0x274919;},'quOzM':_0x373163(0x3a7,0x367,0x38d,0x3df),'VzcUX':_0x4bd747(0x24a,0x235,0x2a4,0x33b),'yMpAf':function(_0x5e1b2b,_0x126b41){return _0x5e1b2b===_0x126b41;},'rIuof':_0x4bd747(0x183,0x15f,0x1ce,0x204),'GCfOn':'GjTTQ','gmpVQ':_0x373163(0x312,0x2b6,0x23c,0x2dd),'GROXf':_0x4bd747(0x1ef,0x22c,0x2b5,0x1ef),'ihsCe':_0x373163(0x24c,0x2c5,0x287,0x20e),'hvZPP':_0x4bd747(0x210,0x125,0x1be,0x273),'GkcFx':'LmwfI','mSdOt':function(_0x468b05,_0x1ca3f0){return _0x468b05===_0x1ca3f0;},'ccbVk':_0x4bd747(0x2b8,0x266,0x2d4,0x27f),'AmhQl':'EFYNQ','IGhWO':'data:\x20[DON'+'E]','STTUy':_0x373163(0x2c0,0x341,0x323,0x318),'PCiCX':_0x373163(0x2ad,0x368,0x414,0x2db),'Pjmer':_0x4bd747(0x2dd,0x2df,0x255,0x2dc),'iGQhm':_0x373163(0x255,0x2ba,0x22f,0x23c),'bZsna':function(_0xca89df,_0x13c0c6){return _0xca89df!==_0x13c0c6;},'hHGKM':'IHRDm','FFoQS':function(_0x2b3392,_0x20d39b){return _0x2b3392!==_0x20d39b;},'WsmeZ':function(_0xe9670,_0x1bfdac){return _0xe9670!==_0x1bfdac;},'KFvYz':_0x373163(0x3cf,0x32e,0x2bc,0x35f),'FNcjs':_0x373163(0x321,0x25a,0x252,0x1f2),'KcLTA':function(_0xd2a0f5,_0x2f2da6){return _0xd2a0f5(_0x2f2da6);},'XvkGF':_0x4bd747(0x2f6,0x340,0x27d,0x2b4),'IMxTL':_0x4bd747(0x2ab,0x303,0x265,0x27b)+_0x373163(0x37d,0x2e1,0x360,0x2b7),'Zchhs':function(_0x2f0650,_0x3d6c50){return _0x2f0650===_0x3d6c50;},'YygIR':_0x373163(0x39b,0x309,0x269,0x339),'BqYPj':_0x4bd747(0x2ef,0x23a,0x267,0x31e),'htKRC':'dVFhD','qWQYD':function(_0x59c19d,_0xfd4cc5){return _0x59c19d(_0xfd4cc5);},'bPkfU':function(_0x4367b5,_0x4b3ca8){return _0x4367b5(_0x4b3ca8);},'hcrMP':function(_0x23b600,_0x608d3f){return _0x23b600(_0x608d3f);},'iGgrT':_0x4bd747(0x353,0x2ef,0x30c,0x25e),'HPudw':_0x4bd747(0x2ec,0x280,0x277,0x29b)},{prompt:_0x2ca8aa,id:_0x201700}=_0x333596;if(_0x214103[_0x373163(0x2a1,0x233,0x1a7,0x2b4)](!_0x201700,!_0x2ca8aa))return;currentLLMRequestController&&(currentLLMRequestController[_0x4bd747(0x2e0,0x34a,0x2ea,0x2ec)](),toastr[_0x4bd747(0x218,0x22f,0x1e2,0x280)](_0x214103[_0x4bd747(0x25f,0x255,0x1f6,0x26d)]));currentLLMRequestController=new AbortController();function _0x4bd747(_0x1111c9,_0x3ca4dd,_0x5d345b,_0x5adb1c){return _0xef6bec(_0x5d345b-0x80,_0x3ca4dd-0x185,_0x5d345b-0xe9,_0x1111c9);}const _0x5763b8=currentLLMRequestController[_0x4bd747(0xe3,0x140,0x1b0,0x217)],_0x238a54=currentLLMRequestController,_0x21982b=REQUEST_TYPE_NAMES[_0x4f9711]||_0x4f9711,_0x3cb107={};_0x3cb107[_0x373163(0x313,0x301,0x2da,0x262)]=_0x373163(0x3d6,0x37c,0x445,0x324)+_0x21982b,_0x3cb107[_0x4bd747(0x1be,0x25d,0x254,0x2a2)]=TaskType['LLM'],_0x3cb107['prompt']=_0x201700;const _0x377a11=taskQueue[_0x4bd747(0x1c1,0x182,0x24c,0x217)](_0x3cb107);llmTaskControllers[_0x373163(0x1cc,0x25b,0x2a1,0x260)](_0x377a11,currentLLMRequestController),taskQueue[_0x4bd747(0x20a,0x21b,0x2d3,0x2d2)+'us'](_0x377a11,TaskStatus['RUNNING']),_0x214103[_0x373163(0x32a,0x2c2,0x236,0x274)](startFabLoading);let _0x2626c6=![];clearLog(),addLog('=====\x20LLM\x20'+_0x4bd747(0x2e4,0x2ed,0x2f3,0x33e)+_0x21982b+_0x4bd747(0x2f6,0x2b7,0x269,0x2d7)),_0x214103['jdAMh'](addLog,'请求\x20ID:\x20'+_0x201700),addLog('发送的\x20Prompt'+':'),addLog(formatPromptForDisplay(_0x2ca8aa));const _0x544a56=_0x214103[_0x373163(0x3f5,0x3c3,0x457,0x370)](getEffectiveConfigForRequestType,_0x4f9711);function _0x373163(_0x248957,_0x285b38,_0x1f9ad6,_0x152fd3){return _0x1cb675(_0x285b38- -0x159,_0x285b38-0xf0,_0x1f9ad6-0xce,_0x1f9ad6);}const {api_url:_0x53fa27,api_key:_0x892c0d,model:_0x26c4ad,temperature:_0x2720a1,top_p:_0x2a5525,max_tokens:_0x15b4f8,stream:_0x584147,bypass_proxy:_0x216586}=_0x544a56;if(!_0x53fa27||!_0x892c0d||!_0x26c4ad){if(_0x214103[_0x4bd747(0x210,0x25c,0x21f,0x29f)](_0x214103['OoVAX'],'yGqmz')){const _0x5c045f=_0x21982b+(_0x4bd747(0x332,0x2dd,0x2b8,0x2a6)+'\x20API\x20Key,\x20'+_0x373163(0x29e,0x251,0x1bb,0x24b)+'置。');toastr['error'](_0x5c045f);const _0x538a0f={};_0x538a0f['success']=![],_0x538a0f[_0x373163(0x216,0x237,0x26e,0x180)]=_0x5c045f,_0x538a0f['id']=_0x201700,eventSource[_0x373163(0x285,0x28a,0x221,0x1e0)](_0x8c1a27,_0x538a0f);return;}else return _0x4b1f71['toString']()['search'](CBPRut[_0x373163(0x3c8,0x363,0x314,0x2f4)])[_0x373163(0x3de,0x312,0x287,0x307)]()[_0x373163(0x2f4,0x3aa,0x45c,0x42a)+'r'](_0x29c596)[_0x4bd747(0x165,0x249,0x20a,0x1fd)](CBPRut[_0x4bd747(0x342,0x25c,0x2aa,0x2a1)]);}const _0x51a00b=_0x53fa27['replace'](/\/$/,'');let _0x9d3ac9,_0x32e915,_0x4c3e8f;if(_0x216586){if(_0x214103[_0x4bd747(0x15e,0x217,0x203,0x18b)](_0x373163(0x334,0x3a0,0x2f6,0x37e),_0x214103['pTxQB'])){_0x9d3ac9=_0x51a00b+(_0x373163(0x250,0x2cb,0x381,0x368)+_0x373163(0x1fd,0x264,0x27c,0x1ae));const _0x40e370={};_0x40e370[_0x373163(0x2ed,0x306,0x262,0x2b5)+'pe']=_0x4bd747(0x2b7,0x228,0x22c,0x206)+_0x373163(0x257,0x278,0x343,0x2e0),_0x40e370[_0x4bd747(0x32a,0x311,0x2b3,0x20f)+'ion']=_0x4bd747(0x14e,0x220,0x18e,0x140)+_0x892c0d,_0x32e915=_0x40e370;const _0x280849={};_0x280849[_0x4bd747(0x2b9,0x347,0x308,0x2bd)]=_0x26c4ad,_0x280849[_0x4bd747(0x32b,0x245,0x2b4,0x252)]=_0x2ca8aa,_0x280849[_0x373163(0x30d,0x3bf,0x3af,0x335)+'e']=_0x2720a1,_0x280849[_0x373163(0x366,0x2a9,0x2f8,0x30f)]=_0x2a5525,_0x280849[_0x4bd747(0x18a,0xe9,0x1a7,0x237)]=_0x15b4f8,_0x280849[_0x4bd747(0x232,0x1ea,0x1bd,0x21b)]=_0x584147,_0x4c3e8f=_0x280849;}else{_0x2f5b11=!![],_0x42010a[_0x4bd747(0x2c0,0x2b6,0x2cd,0x21e)](_0x214103[_0x373163(0x293,0x2e6,0x2b8,0x37e)]),_0x4202da['updateStat'+'us'](_0x41397f,_0x5cd7f4[_0x373163(0x346,0x3cd,0x444,0x40f)]),_0x4c5308[_0x373163(0x42c,0x380,0x2e5,0x33a)](_0x407ca1);const _0x486a41={};_0x486a41['name']=_0x214103[_0x373163(0x38e,0x337,0x2a4,0x296)],_0x486a41[_0x373163(0x2b1,0x24b,0x314,0x300)]=_0x214103[_0x4bd747(0x287,0x18d,0x215,0x2d4)];const _0x3e2025={};_0x3e2025['success']=![],_0x3e2025[_0x4bd747(0x17a,0xd8,0x17e,0x1b5)]=null,_0x3e2025['id']=_0x38ef31,_0x3e2025[_0x4bd747(0x14c,0x233,0x1da,0x1e5)]=_0x486a41,_0x26d496[_0x373163(0x1d3,0x28a,0x2a8,0x1e6)](_0x58b516['LLM_EXECUT'+'E_RESPONSE'],_0x3e2025);return;}}else{let _0x3014c9=_0x51a00b;!_0x3014c9[_0x373163(0x323,0x31f,0x2dd,0x26d)](_0x214103['GEZNW'])&&!_0x3014c9[_0x373163(0x2bd,0x331,0x39c,0x363)](_0x214103[_0x373163(0x39f,0x2f6,0x2f3,0x38f)])&&(_0x214103[_0x4bd747(0x305,0x2ba,0x2be,0x354)](_0x214103[_0x4bd747(0x1b8,0x2d9,0x219,0x1aa)],_0x214103[_0x373163(0x30b,0x3c2,0x394,0x362)])?_0x4eb152+='\x20('+_0x32bc58[_0x4bd747(0x311,0x1c7,0x280,0x2bc)](',\x20')+')':_0x3014c9=_0x214103[_0x373163(0x1d8,0x282,0x30e,0x1bf)](_0x3014c9,_0x4bd747(0x2dc,0x21a,0x268,0x269)));_0x3014c9=_0x3014c9['replace'](/\/v1\/$/,_0x214103['GEZNW']),_0x9d3ac9=_0x4bd747(0x22a,0x27e,0x22f,0x2c1)+_0x373163(0x3c2,0x352,0x32d,0x2b9)+_0x4bd747(0x295,0x350,0x2fc,0x2e4)+_0x4bd747(0x191,0x1a3,0x1b1,0x119),_0x32e915=_0x214103[_0x373163(0x23a,0x2ef,0x38b,0x366)](getRequestHeaders,window[_0x373163(0x280,0x332,0x2c1,0x3e9)]);const _0x2a094c={};_0x2a094c[_0x4bd747(0x34b,0x320,0x2e3,0x381)+_0x4bd747(0x19e,0x1bf,0x19d,0xf5)+'ce']=_0x214103[_0x4bd747(0x26d,0x158,0x20e,0x15c)],_0x2a094c[_0x4bd747(0x236,0x2ef,0x28b,0x272)]=_0x3014c9,_0x2a094c['custom_inc'+_0x373163(0x3c5,0x3ba,0x31b,0x2f6)+'rs']=_0x4bd747(0x2b6,0x302,0x2b3,0x28d)+_0x4bd747(0x1a2,0x272,0x1e1,0x297)+_0x4bd747(0x31b,0x2d9,0x2ee,0x234)+_0x892c0d+'\x22',_0x2a094c['model']=_0x26c4ad,_0x2a094c['messages']=_0x2ca8aa,_0x2a094c['temperatur'+'e']=_0x2720a1,_0x2a094c['top_p']=_0x2a5525,_0x2a094c[_0x4bd747(0x25d,0x17e,0x1a7,0x200)]=_0x15b4f8,_0x2a094c['stream']=_0x584147,_0x4c3e8f=_0x2a094c;}if(_0x3352cf){if(_0x214103[_0x373163(0x2bb,0x304,0x360,0x373)](_0x214103[_0x4bd747(0x164,0x28c,0x21e,0x225)],_0x373163(0x367,0x2e4,0x34a,0x232))){const _0x42ddf3={'ClNVF':function(_0x101be8,_0x4b434b){return _0x214103['CHsat'](_0x101be8,_0x4b434b);},'rWKma':function(_0x12c44a,_0x4deb33,_0x4d50bf){return _0x214103['jvibq'](_0x12c44a,_0x4deb33,_0x4d50bf);},'YBhJC':_0x214103[_0x373163(0x37b,0x34f,0x3cc,0x30b)]};_0x1cb8cd[_0x4bd747(0x2b6,0x186,0x218,0x255)][_0x4bd747(0x21b,0x238,0x222,0x2ed)](_0x5b5515=>{function _0x51ac8(_0x4cd4a6,_0x10c7f4,_0xc979c5,_0x14ba4d){return _0x373163(_0x4cd4a6-0x77,_0xc979c5-0x200,_0x10c7f4,_0x14ba4d-0x3b);}if(!_0x5b5515[_0x51ac8(0x5eb,0x5be,0x59a,0x54e)])return;if(!_0x5b5515[_0x51ac8(0x48c,0x4d1,0x4bb,0x3fd)]||_0x5b5515[_0xbe4bbf(-0xf7,-0x5b,-0xb3,-0xae)][_0xbe4bbf(0x9,-0x5d,0xdc,0x32)]()==='')return;function _0xbe4bbf(_0x32879f,_0x3c1035,_0x13248c,_0xdb5fe9){return _0x373163(_0x32879f-0x191,_0xdb5fe9- -0x369,_0x3c1035,_0xdb5fe9-0x8b);}if(_0x42ddf3[_0xbe4bbf(-0x12,-0x82,0xeb,0x4a)](_0x5b5515[_0x51ac8(0x52f,0x592,0x56b,0x5c4)+'e'],'trigger')){if(!_0x3f3fd5||!_0x42ddf3[_0x51ac8(0x556,0x467,0x48b,0x425)](_0x4c3b5b,_0x5b5515[_0x51ac8(0x445,0x433,0x4a1,0x52a)+'ds'],_0x897cb))return;}const _0x593fed={};_0x593fed['role']=_0x5b5515[_0x51ac8(0x4ed,0x5c3,0x564,0x61c)]||_0x42ddf3[_0x51ac8(0x52c,0x656,0x5a1,0x658)],_0x593fed[_0xbe4bbf(-0x1b,-0xf3,-0x16d,-0xae)]=_0x5b5515['content'],_0x5cce56['push'](_0x593fed);});}else _0x214103[_0x4bd747(0x17d,0x233,0x1eb,0x164)](_0x3352cf,_0x4bd747(0x18a,0x183,0x207,0x15f)+_0x21982b+_0x4bd747(0x36f,0x347,0x2bc,0x2d4));}try{if(_0x214103[_0x373163(0x2be,0x29e,0x2ba,0x1e8)]('odhSU',_0x214103[_0x373163(0x324,0x31c,0x3a9,0x3dc)]))_0x3048fb===_0x30a455&&(_0x10b947=null),(!_0x5bfeab||_0x214103[_0x4bd747(0x231,0x2ea,0x2be,0x31b)](_0x244b49,null))&&_0x214103[_0x4bd747(0x1f2,0x18c,0x209,0x18c)](_0x5d20a8);else{const _0x53548a=await _0x214103[_0x373163(0x28c,0x246,0x214,0x2a5)](fetch,_0x9d3ac9,{'method':_0x214103[_0x4bd747(0x28c,0x2c9,0x226,0x18f)],'headers':_0x32e915,'body':JSON[_0x4bd747(0x216,0x367,0x2a8,0x238)](_0x4c3e8f),'signal':_0x5763b8});if(!_0x53548a['ok']){try{const _0x4885a7=await _0x53548a['json']();if(_0x4885a7[_0x373163(0x22c,0x293,0x230,0x26c)]){let _0x4bf65a;if(typeof _0x4885a7[_0x4bd747(0x1c9,0x146,0x1da,0x1f3)]===_0x214103[_0x373163(0x269,0x262,0x309,0x19a)]&&_0x4885a7[_0x373163(0x358,0x293,0x310,0x1d0)]['message']){_0x4bf65a=''+_0x4885a7[_0x4bd747(0x207,0x147,0x1da,0x1da)][_0x373163(0x2ad,0x24b,0x273,0x29a)];const _0x136613=[];if(_0x4885a7['error']['type'])_0x136613[_0x4bd747(0x1f6,0x1f6,0x1a5,0x206)](_0x373163(0x204,0x2b2,0x272,0x2d1)+_0x4885a7[_0x4bd747(0x17b,0x163,0x1da,0x110)][_0x4bd747(0x24d,0x2a5,0x254,0x262)]);if(_0x4885a7[_0x373163(0x335,0x293,0x2a6,0x250)][_0x4bd747(0x226,0x24d,0x17f,0x17a)])_0x136613[_0x373163(0x248,0x25e,0x325,0x325)]('代码:\x20'+_0x4885a7[_0x4bd747(0x293,0x1a8,0x1da,0x29f)][_0x373163(0x272,0x238,0x2d5,0x22b)]);_0x214103['RiDfl'](_0x136613[_0x373163(0x294,0x273,0x1c8,0x290)],0x8*-0x18b+-0x134*-0xe+-0x480)&&(_0x214103['udnkB'](_0x214103[_0x4bd747(0x199,0x1f3,0x258,0x1cd)],_0x214103[_0x373163(0x2b5,0x2b8,0x2d3,0x1fa)])?_0xe1cf35[_0x373163(0x2be,0x25e,0x2df,0x2b1)](_0x34f045):_0x4bf65a+='\x20('+_0x136613[_0x4bd747(0x2fc,0x344,0x280,0x20d)](',\x20')+')');}else{if(_0x214103[_0x4bd747(0x21f,0x1a0,0x1cc,0x1ed)](_0x214103[_0x4bd747(0x365,0x2c0,0x2bf,0x31e)],_0x214103[_0x4bd747(0x26f,0x2b5,0x310,0x299)]))_0x4bf65a=''+JSON[_0x4bd747(0x31f,0x2e8,0x2a8,0x34c)](_0x4885a7[_0x373163(0x1e0,0x293,0x2c4,0x29f)]);else{let _0x12618d;if(_0x214103[_0x4bd747(0x364,0x2df,0x2be,0x2b2)](typeof _0x124f94[_0x373163(0x34d,0x293,0x1c6,0x1e1)],_0x214103[_0x373163(0x32c,0x262,0x2dc,0x1f6)])&&_0x5e1b77[_0x373163(0x259,0x293,0x27d,0x2eb)][_0x4bd747(0xe9,0x1ec,0x192,0x14b)]){_0x12618d=''+_0x367cb9[_0x373163(0x246,0x293,0x238,0x288)][_0x4bd747(0x146,0x1ff,0x192,0x22c)];const _0x123d68=[];if(_0x3a0f09[_0x4bd747(0x14b,0x1c0,0x1da,0x2a2)][_0x4bd747(0x308,0x1fe,0x254,0x23f)])_0x123d68[_0x4bd747(0x157,0x1da,0x1a5,0x20a)]('类型:\x20'+_0x3c874b[_0x4bd747(0x133,0x1e2,0x1da,0x29a)][_0x373163(0x39e,0x30d,0x3b3,0x2d8)]);if(_0x2a6953[_0x373163(0x2a9,0x293,0x29c,0x2e4)][_0x4bd747(0x15a,0x1ea,0x17f,0x23a)])_0x123d68[_0x4bd747(0x163,0x13e,0x1a5,0x230)]('代码:\x20'+_0x948554[_0x373163(0x23e,0x293,0x22f,0x29b)][_0x373163(0x1ba,0x238,0x28c,0x1d2)]);_0x214103[_0x373163(0x370,0x327,0x27a,0x313)](_0x123d68[_0x373163(0x206,0x273,0x25f,0x29a)],0x412+0x1*0x9e0+-0x23*0x66)&&(_0x12618d+='\x20('+_0x123d68[_0x373163(0x3ac,0x339,0x38d,0x3ab)](',\x20')+')');}else _0x12618d=''+_0x14295e[_0x4bd747(0x229,0x24b,0x2a8,0x202)](_0x4a9f4c[_0x373163(0x2f9,0x293,0x290,0x204)]);throw new _0xaaa173(_0x12618d);}}throw new Error(_0x4bf65a);}}catch(_0x329076){if(_0x214103['yMpAf'](_0x214103[_0x4bd747(0x2a8,0x2a2,0x1de,0x256)],_0x214103[_0x373163(0x31b,0x376,0x3bd,0x321)]))_0x47fc4d+=_0x1b8b47,_0x3aeae6&&_0x3a4e82(_0x2aa8a0);else{if(_0x329076[_0x4bd747(0x24f,0x1f8,0x192,0xd2)]['includes'](_0x214103[_0x4bd747(0x239,0x242,0x195,0x195)])||_0x329076['message'][_0x4bd747(0x1f7,0x2b0,0x278,0x28a)](_0x214103[_0x373163(0x3be,0x370,0x3b9,0x3c3)]))throw _0x329076;}}throw new Error(_0x4bd747(0x29c,0x309,0x30f,0x3b4)+_0x53548a[_0x4bd747(0x2d6,0x345,0x2a6,0x1e2)]+'\x20'+_0x53548a[_0x4bd747(0x184,0x29c,0x227,0x273)]);}let _0x2ed7c7='';if(_0x584147){const _0x349c36=_0x53548a[_0x373163(0x2e1,0x2f4,0x308,0x22d)][_0x4bd747(0x1c3,0x222,0x180,0x179)](),_0x41d60c=new TextDecoder(_0x214103[_0x4bd747(0x35c,0x249,0x293,0x344)]);let _0x3c5a84='';while(!![]){if(_0x214103[_0x373163(0x1bd,0x285,0x240,0x207)](_0x214103[_0x4bd747(0x176,0x2d4,0x239,0x1b4)],_0x214103[_0x373163(0x1b6,0x24a,0x23d,0x281)])){const {done:_0x50e17c,value:_0x5c5aa5}=await _0x349c36['read']();if(_0x50e17c)break;const _0x111185={};_0x111185[_0x373163(0x1ef,0x276,0x25b,0x2c8)]=!![],_0x3c5a84+=_0x41d60c[_0x373163(0x294,0x32f,0x3a8,0x29b)](_0x5c5aa5,_0x111185);const _0x5da938=_0x3c5a84['split']('\x0a');_0x3c5a84=_0x5da938[_0x4bd747(0x236,0x247,0x187,0xe1)]()||'';for(const _0x550d14 of _0x5da938){if(_0x214103['mSdOt'](_0x214103[_0x373163(0x20b,0x25c,0x20b,0x2b4)],_0x214103[_0x373163(0x2ad,0x27a,0x2cb,0x2c2)]))_0x112da5=_0x214103[_0x4bd747(0x33d,0x1fd,0x2c9,0x24f)],_0x29e799[_0x4bd747(0x21a,0x146,0x211,0x2ab)](_0x5d09f6+(_0x373163(0x375,0x32c,0x3c1,0x30d)+_0x4bd747(0xf9,0x167,0x193,0x151)+'断、max_toke'+'ns\x20设置过小、或\x20'+_0x4bd747(0x310,0x267,0x2d1,0x32a)));else{const _0x2ffcb3=_0x550d14[_0x4bd747(0x3a9,0x28d,0x2e2,0x242)]();if(!_0x2ffcb3||_0x214103[_0x373163(0x38e,0x377,0x43f,0x2c5)](_0x2ffcb3,_0x214103[_0x4bd747(0x162,0x227,0x21b,0x239)]))continue;if(_0x2ffcb3['startsWith'](_0x214103[_0x4bd747(0x2f5,0x1e3,0x271,0x333)]))try{if(_0x214103[_0x4bd747(0x2c0,0x2bc,0x2be,0x285)](_0x214103[_0x373163(0x2db,0x313,0x2f3,0x29b)],_0x214103[_0x4bd747(0x246,0x28b,0x25a,0x30a)])){const _0x571df9=_0x2ffcb3[_0x373163(0x322,0x299,0x32a,0x2c5)](0x1*0x1b22+0x2708+0xb06*-0x6),_0x5aaf50=JSON[_0x4bd747(0x3b0,0x2a4,0x2ed,0x386)](_0x571df9),_0x4d2853=_0x5aaf50[_0x373163(0x3b6,0x315,0x2cd,0x28b)]?.[-0xc0f+-0x2*-0xd0c+-0x1*0xe09]?.[_0x373163(0x2f4,0x258,0x21e,0x248)]?.['content'];if(_0x4d2853){if(_0x214103['nLzCA']('iUxtp',_0x214103['Pjmer']))_0x2ed7c7+=_0x4d2853,_0x3352cf&&(_0x214103['CHsat'](_0x214103[_0x373163(0x351,0x37a,0x2b5,0x3d3)],_0x373163(0x355,0x2ba,0x258,0x36b))?_0x214103[_0x373163(0x370,0x2a4,0x20c,0x312)](_0x3352cf,_0x2ed7c7):_0x5d2d95&&(_0x15457d['abort'](),_0x32cf6b[_0x4bd747(0x134,0x180,0x1e2,0x1ad)](_0x214103[_0x373163(0x3db,0x318,0x326,0x340)])));else{const _0x442e6e={};_0x442e6e['role']=_0x214103[_0x373163(0x2d6,0x34f,0x2b5,0x3a6)],_0x442e6e[_0x373163(0x234,0x2bb,0x20c,0x2fc)]=_0x16b3f4[_0x4bd747(0x366,0x256,0x29d,0x29a)],_0xedba3e[_0x373163(0x1c9,0x25e,0x30f,0x2d4)](_0x442e6e);}}}else _0x4f4b3b[_0x373163(0x399,0x3cb,0x3a6,0x44c)](_0x214103['trjze'],_0x29f06a[_0x4bd747(0x23a,0x1f6,0x192,0x167)]);}catch(_0x5b99c5){if(_0x214103[_0x373163(0x1f1,0x289,0x28b,0x26f)](_0x373163(0x338,0x3b8,0x43c,0x378),_0x214103['hHGKM']))console[_0x4bd747(0x2c8,0x3dc,0x312,0x269)](_0x214103[_0x373163(0x2d7,0x381,0x2ce,0x310)],_0x5b99c5[_0x4bd747(0x235,0x237,0x192,0x216)]);else{const _0xdd533a={};_0xdd533a[_0x373163(0x461,0x3b6,0x371,0x2f2)]=_0x214103[_0x4bd747(0x1f5,0x16b,0x197,0x21e)],_0xdd533a[_0x373163(0x299,0x356,0x2e4,0x3c7)]='用户',_0xdd533a[_0x373163(0x3b3,0x374,0x312,0x303)]=_0x214103[_0x4bd747(0x2df,0x211,0x28d,0x30a)],_0xdd533a[_0x4bd747(0x19a,0x290,0x1d6,0x189)]=_0x214103[_0x4bd747(0x354,0x1f3,0x28f,0x32f)],_0xdd533a['tool']='工具';const _0xd4d71e=_0xdd533a;return _0xd4d71e[_0x3827b7]||_0x1a87f9;}}}}}else _0x214103['QtjkK'](_0x13bcbb,_0x373163(0x18b,0x23c,0x1d3,0x2a8)+_0x373163(0x380,0x33b,0x3f6,0x382));}if(_0x3c5a84['trim']()&&_0x214103[_0x4bd747(0xe4,0x22d,0x19e,0xfa)](_0x3c5a84[_0x373163(0x2de,0x39b,0x448,0x461)](),_0x214103[_0x373163(0x2e8,0x2d4,0x2ea,0x2c2)])&&_0x3c5a84[_0x4bd747(0x296,0x2bb,0x2e2,0x215)]()[_0x4bd747(0x221,0x225,0x242,0x269)](_0x214103[_0x4bd747(0x285,0x291,0x271,0x1ef)])){if(_0x214103[_0x373163(0x288,0x28e,0x329,0x31a)](_0x214103['KFvYz'],_0x214103[_0x4bd747(0x342,0x2da,0x27c,0x227)]))_0x1fa5d+='\x20('+_0x4f316[_0x4bd747(0x1d6,0x285,0x280,0x22a)](',\x20')+')';else try{const _0x295be3=_0x3c5a84['trim']()['slice'](0x1ab4+-0x4be*0x5+0x28*-0x13),_0x3f916f=JSON['parse'](_0x295be3),_0x3cd1ef=_0x3f916f[_0x373163(0x294,0x315,0x3c9,0x332)]?.[0x277*-0x2+-0x1e7*0x1+0x6d5]?.['delta']?.[_0x373163(0x25c,0x2bb,0x33c,0x319)];if(_0x3cd1ef){if(_0x214103[_0x4bd747(0x245,0x1d7,0x270,0x261)]!==_0x214103['FNcjs']){_0x2d569f=''+_0x2a95db[_0x4bd747(0x1bd,0x1f4,0x1da,0x268)]['message'];const _0x5c3ec4=[];if(_0x116c4e[_0x4bd747(0x23c,0x127,0x1da,0x138)]['type'])_0x5c3ec4[_0x4bd747(0xed,0x120,0x1a5,0x20a)](_0x4bd747(0x1ca,0x20d,0x1f9,0x1b3)+_0x16b05d[_0x4bd747(0x257,0x1a6,0x1da,0x10d)]['type']);if(_0x54911a[_0x373163(0x223,0x293,0x1ca,0x24b)]['code'])_0x5c3ec4['push'](_0x4bd747(0x193,0x294,0x225,0x24a)+_0x473d0c[_0x373163(0x276,0x293,0x2f0,0x2b5)][_0x4bd747(0x158,0x1df,0x17f,0x248)]);_0x214103[_0x373163(0x276,0x308,0x2bf,0x381)](_0x5c3ec4[_0x373163(0x2b8,0x273,0x244,0x22d)],-0x6c6+0x12e*0x3+0x3*0x114)&&(_0x545e00+='\x20('+_0x5c3ec4[_0x373163(0x33c,0x339,0x3fc,0x393)](',\x20')+')');}else _0x2ed7c7+=_0x3cd1ef,_0x3352cf&&_0x214103['KcLTA'](_0x3352cf,_0x2ed7c7);}}catch(_0x5ce187){if(_0x214103['CHsat'](_0x4bd747(0x1d7,0x2bc,0x27d,0x2cb),_0x214103[_0x373163(0x459,0x3ae,0x429,0x324)]))console[_0x373163(0x470,0x3cb,0x445,0x468)](_0x214103[_0x4bd747(0x249,0x2ba,0x272,0x24f)],_0x5ce187[_0x373163(0x18c,0x24b,0x186,0x1b3)]);else{let _0x4d6a03=_0x16fd19;!_0x4d6a03[_0x4bd747(0x2f1,0x27c,0x266,0x242)](_0x4bd747(0x272,0x2a9,0x268,0x27d))&&!_0x4d6a03[_0x4bd747(0x1cd,0x293,0x278,0x28d)](_0x214103[_0x4bd747(0x2c7,0x1cc,0x23d,0x213)])&&(_0x4d6a03=_0x214103[_0x4bd747(0x2d4,0x201,0x26d,0x31d)](_0x4d6a03,_0x214103['GEZNW']));_0x4d6a03=_0x4d6a03['replace'](/\/v1\/$/,_0x214103[_0x373163(0x302,0x3a5,0x3fd,0x335)]),_0x4e2182=_0x4bd747(0x191,0x1f9,0x22f,0x22d)+_0x4bd747(0x2f7,0x2d8,0x299,0x22f)+_0x4bd747(0x2d2,0x3a7,0x2fc,0x231)+_0x4bd747(0x1da,0x126,0x1b1,0x261),_0x276977=_0x214103[_0x373163(0x31c,0x2ef,0x3a2,0x2a5)](_0x4e60f3,_0x2e320c['token']);const _0x4457fe={};_0x4457fe[_0x373163(0x35e,0x39c,0x304,0x3c5)+_0x4bd747(0x1d1,0x1ff,0x19d,0x153)+'ce']=_0x4bd747(0xf4,0xe0,0x17d,0x1ef),_0x4457fe[_0x373163(0x362,0x344,0x33b,0x30f)]=_0x4d6a03,_0x4457fe['custom_inc'+_0x373163(0x3ac,0x3ba,0x3a6,0x362)+'rs']=_0x373163(0x3a9,0x36c,0x3a0,0x350)+_0x373163(0x353,0x29a,0x309,0x20e)+'er\x20'+_0x28c313+'\x22',_0x4457fe[_0x373163(0x3cf,0x3c1,0x3d7,0x3d9)]=_0x330cab,_0x4457fe['messages']=_0x3d12a1,_0x4457fe[_0x4bd747(0x34c,0x2c7,0x306,0x391)+'e']=_0x1fc93a,_0x4457fe[_0x4bd747(0x1a3,0x214,0x1f0,0x1cc)]=_0x413dc6,_0x4457fe[_0x4bd747(0x135,0x1b3,0x1a7,0x19e)]=_0x2fbb7c,_0x4457fe[_0x4bd747(0x27c,0x12e,0x1bd,0x21e)]=![],_0x3947a1=_0x4457fe;}}}!_0x2ed7c7&&(_0x2ed7c7=_0x214103['TqehW'],toastr[_0x373163(0x20f,0x2ca,0x20e,0x21f)](_0x21982b+(':\x20LLM\x20请求返回'+_0x373163(0x1b5,0x24c,0x242,0x2f5)+_0x373163(0x310,0x28c,0x217,0x2d2)+_0x4bd747(0x215,0x2c4,0x2a3,0x353)+_0x373163(0x3f1,0x38a,0x3d4,0x3bf))));}else{const _0x5c3f3f=await _0x53548a['json']();if(_0x5c3f3f[_0x373163(0x29d,0x293,0x1e5,0x22a)]){if(_0x214103[_0x373163(0x204,0x29e,0x254,0x33f)](_0x373163(0x275,0x275,0x2cf,0x27b),_0x4bd747(0x187,0x2b3,0x1fc,0x1cb)))_0x124ea0=_0x228865+_0x214103[_0x4bd747(0x3a2,0x231,0x2ec,0x3b9)];else{let _0x4d87dc;if(typeof _0x5c3f3f[_0x373163(0x28d,0x293,0x1da,0x2d4)]===_0x214103[_0x373163(0x199,0x262,0x30c,0x27a)]&&_0x5c3f3f['error']['message']){_0x4d87dc=''+_0x5c3f3f[_0x373163(0x1ff,0x293,0x33c,0x1f2)][_0x373163(0x1ca,0x24b,0x205,0x214)];const _0xa5df48=[];if(_0x5c3f3f[_0x4bd747(0x1c7,0x120,0x1da,0x285)][_0x4bd747(0x2c8,0x207,0x254,0x193)])_0xa5df48[_0x373163(0x23b,0x25e,0x2cb,0x25f)]('类型:\x20'+_0x5c3f3f[_0x373163(0x1d6,0x293,0x2b9,0x2cf)][_0x4bd747(0x1bd,0x2c9,0x254,0x294)]);if(_0x5c3f3f[_0x373163(0x1fc,0x293,0x2e2,0x263)][_0x373163(0x2ff,0x238,0x1d6,0x24d)])_0xa5df48[_0x373163(0x250,0x25e,0x30f,0x2c1)](_0x373163(0x2f9,0x2de,0x2d4,0x391)+_0x5c3f3f['error'][_0x4bd747(0x14d,0x229,0x17f,0x17d)]);_0xa5df48['length']>-0x1*0x6e1+-0x19*-0x101+-0xd4*0x16&&(_0x4d87dc+='\x20('+_0xa5df48[_0x373163(0x319,0x339,0x298,0x2d5)](',\x20')+')');}else{if(_0x214103['Zchhs'](_0x214103[_0x373163(0x235,0x2f8,0x2c6,0x32a)],_0x214103['YygIR']))_0x4d87dc=''+JSON[_0x4bd747(0x23e,0x265,0x2a8,0x25d)](_0x5c3f3f[_0x373163(0x1ca,0x293,0x2ec,0x2bb)]);else return function(_0x29f2a8){const {id:_0x252bdb}=_0x29f2a8;function _0x114328(_0x3a3f1e,_0x57499d,_0x1186c1,_0x26ccb7){return _0x4bd747(_0x3a3f1e,_0x57499d-0x7f,_0x26ccb7- -0x313,_0x26ccb7-0x1e9);}if(!_0x252bdb)return;const _0x27cc2b=_0x4eefa4[_0x59f49b]||_0x2d8f44;_0x589fa8['log'](_0x3f9c31(0x4c7,0x505,0x470,0x4e5)+'\x20收到'+_0x27cc2b+(_0x114328(-0x142,-0x109,-0x68,-0x11e)+_0x114328(-0x207,-0x1b7,-0x16e,-0x150))+_0x252bdb+')');const _0xe742bc=_0x2cdc8c(_0x227be0);function _0x3f9c31(_0x5064d9,_0x86574f,_0x367d8a,_0x3f37f3){return _0x4bd747(_0x3f37f3,_0x86574f-0x23,_0x86574f-0x23b,_0x3f37f3-0xc3);}const _0x4f83ac={};_0x4f83ac['prompt']=_0xe742bc,_0x4f83ac['id']=_0x252bdb,_0x3afb6d['emit'](_0x2dab34,_0x4f83ac);};}throw new Error(_0x4d87dc);}}_0x2ed7c7=_0x5c3f3f[_0x4bd747(0x203,0x2e0,0x25c,0x237)]?.[-0x7c7*-0x4+-0x1ae6+0x1*-0x436]?.[_0x373163(0x2e1,0x24b,0x1fd,0x188)]?.[_0x4bd747(0x1ca,0x2b9,0x202,0x13d)]||'',!_0x2ed7c7&&(_0x2ed7c7=_0x214103[_0x4bd747(0x2dd,0x344,0x2c9,0x2f8)],toastr[_0x373163(0x306,0x2ca,0x27b,0x2d3)](_0x21982b+(_0x4bd747(0x28f,0x249,0x273,0x26c)+_0x373163(0x1a3,0x24c,0x1f6,0x2aa)+'断、max_toke'+_0x4bd747(0x1ea,0x350,0x2a3,0x248)+_0x4bd747(0x313,0x23c,0x2d1,0x35a)))),_0x3352cf&&(_0x214103[_0x4bd747(0x18c,0x1fd,0x234,0x211)]===_0x214103['htKRC']?_0x37359f=''+_0x146e54[_0x373163(0x2a4,0x361,0x309,0x3d8)](_0x4d63a3[_0x4bd747(0x1b2,0x22b,0x1da,0x148)]):_0x214103['qWQYD'](_0x3352cf,_0x2ed7c7));}_0x214103[_0x373163(0x2ec,0x3a4,0x3ad,0x381)](addLog,_0x373163(0x2be,0x2cc,0x346,0x201)+'\x20回复\x20-----'),_0x214103['KcLTA'](addLog,_0x2ed7c7),_0x214103[_0x373163(0x2ec,0x347,0x284,0x3d6)](addLog,_0x373163(0x3c1,0x3be,0x484,0x370)+'请求完成\x20====='),taskQueue[_0x373163(0x2dd,0x27d,0x268,0x319)+'sk'](_0x377a11,!![]),llmTaskControllers[_0x373163(0x417,0x380,0x3c6,0x3a9)](_0x377a11);const _0x315782={};_0x315782[_0x4bd747(0x1ad,0x24e,0x185,0x142)]=!![],_0x315782[_0x373163(0x24b,0x237,0x1c0,0x25b)]=_0x2ed7c7,_0x315782['id']=_0x201700,_0x315782[_0x373163(0x2f8,0x295,0x33d,0x1fa)]=![],eventSource[_0x373163(0x28e,0x28a,0x325,0x240)](_0x8c1a27,_0x315782);}}catch(_0xe94bd8){if(_0xe94bd8[_0x373163(0x37e,0x301,0x39b,0x2f9)]==='AbortError'){const _0x467e65=_0x373163(0x1ff,0x266,0x202,0x297)[_0x373163(0x386,0x2ee,0x2cb,0x2e4)]('|');let _0x13efea=-0x83f*0x2+-0x1*-0xd39+0x345;while(!![]){switch(_0x467e65[_0x13efea++]){case'0':taskQueue['updateStat'+'us'](_0x377a11,TaskStatus['CANCELLED']);continue;case'1':return;case'2':llmTaskControllers[_0x4bd747(0x284,0x24e,0x2c7,0x27b)](_0x377a11);continue;case'3':const _0x2e6c99={};_0x2e6c99[_0x373163(0x249,0x301,0x382,0x2b4)]=_0x214103[_0x4bd747(0x220,0x314,0x27e,0x2b4)],_0x2e6c99['message']=_0x214103[_0x373163(0x284,0x2ce,0x291,0x205)];const _0x3c4226={};_0x3c4226[_0x4bd747(0x1fe,0x13e,0x185,0x1cd)]=![],_0x3c4226[_0x373163(0x209,0x237,0x19e,0x2fa)]=null,_0x3c4226['id']=_0x201700,_0x3c4226['error']=_0x2e6c99,eventSource[_0x373163(0x31a,0x28a,0x1c6,0x298)](_0x8c1a27,_0x3c4226);continue;case'4':_0x2626c6=!![];continue;}break;}}console[_0x373163(0x287,0x293,0x281,0x342)](_0x21982b+_0x373163(0x1d6,0x288,0x200,0x32e),_0xe94bd8);const _0x3b6f7a=_0x4bd747(0x1d8,0x22f,0x223,0x231)+_0xe94bd8['message'];_0x3352cf&&_0x3352cf(_0x3b6f7a);toastr[_0x4bd747(0x1b0,0x1c4,0x1da,0x116)](_0xe94bd8[_0x4bd747(0x170,0xf8,0x192,0xf8)]),taskQueue[_0x373163(0x271,0x27d,0x204,0x287)+'sk'](_0x377a11,![]),llmTaskControllers[_0x373163(0x302,0x380,0x37d,0x312)](_0x377a11);const _0x14b372={};_0x14b372[_0x373163(0x2ff,0x23e,0x247,0x28e)]=![],_0x14b372[_0x373163(0x1c6,0x237,0x231,0x303)]=_0x3b6f7a,_0x14b372['id']=_0x201700,eventSource[_0x4bd747(0x140,0x1b3,0x1d1,0x1e5)](_0x8c1a27,_0x14b372);}finally{_0x214103[_0x4bd747(0x236,0x312,0x244,0x236)]!==_0x214103[_0x373163(0x371,0x345,0x298,0x305)]?(_0x214103[_0x373163(0x2f5,0x29e,0x215,0x340)](currentLLMRequestController,_0x238a54)&&(currentLLMRequestController=null),(!_0x2626c6||_0x214103[_0x4bd747(0x2e6,0x25d,0x2fe,0x29e)](currentLLMRequestController,null))&&_0x214103['ZiLML'](stopFabLoading)):_0x2c374c[_0x4bd747(0x131,0x247,0x1a5,0x1a7)](_0x4bd747(0xe6,0xe5,0x1af,0x21d)+_0x58c942+']');}}export async function executeDefaultLLMRequest(_0x3d9e1b,_0x23a2b0,_0x359e03=null){const _0x1b533d={'Ryvra':_0x5e66d1(-0x220,-0x16e,-0x160,-0x1c1)+_0x5b5286(-0x74,-0x46,0x4,-0xad)+'Model\x20未配置。','mOLiS':function(_0xe0a641,_0x1216cb){return _0xe0a641(_0x1216cb);},'ErWFL':function(_0x523b9c,_0x1f1e1d){return _0x523b9c===_0x1f1e1d;},'YATuB':function(_0x199d03,_0x410631){return _0x199d03===_0x410631;},'QHkkf':'user','yszYb':_0x5b5286(-0x79,0x16,-0x27,-0x43),'gzyiu':'LLM请求已中断，开'+_0x5e66d1(-0x2bc,-0x1d1,-0x1d7,-0x253),'CxdMG':_0x5e66d1(-0x1bf,-0x1bf,-0x1bc,-0x112),'MKOAT':function(_0x21e019){return _0x21e019();},'gWmoi':function(_0x3eabb4,_0x51dcac){return _0x3eabb4(_0x51dcac);},'LMaXo':function(_0x53f8b6,_0x2f216e){return _0x53f8b6(_0x2f216e);},'vcPue':function(_0x343bc2,_0x42114){return _0x343bc2(_0x42114);},'KwIsv':function(_0xa55794,_0x3b19b5){return _0xa55794(_0x3b19b5);},'njHvM':function(_0x22d26f,_0x13c90d){return _0x22d26f||_0x13c90d;},'Ayofn':_0x5b5286(-0x9e,-0x89,-0xcc,-0xf5)+'n/json','TEKUV':function(_0x587a9c,_0x1d3d83){return _0x587a9c??_0x1d3d83;},'STSEL':_0x5e66d1(-0x242,-0x11a,-0x1d4,-0x176),'HCLhB':_0x5b5286(-0x78,-0x122,0x16,-0x15),'iTqOr':function(_0x5076fa,_0x4be03a){return _0x5076fa+_0x4be03a;},'QtShZ':_0x5e66d1(-0x2fd,-0x2d8,-0x2df,-0x261),'KzYvm':function(_0x578490,_0x198db2){return _0x578490!==_0x198db2;},'AQWfg':_0x5e66d1(-0x191,-0xac,-0x103,-0x13d),'yZtcX':function(_0x236612,_0x59d16b){return _0x236612(_0x59d16b);},'OFpEI':_0x5e66d1(-0x1f9,-0x2f1,-0x29e,-0x25b)+_0x5b5286(-0x48,0x2f,0x48,-0xb4),'CMnLJ':function(_0xc4536e,_0xc75fa5,_0x35256f){return _0xc4536e(_0xc75fa5,_0x35256f);},'zKsJO':'POST','pfkHe':function(_0x805fa6,_0x4209f2){return _0x805fa6===_0x4209f2;},'qhuLB':_0x5b5286(-0x44,0x22,-0x36,-0x10d),'ZiDBz':function(_0x4ea756,_0x409be3){return _0x4ea756===_0x409be3;},'XBnub':'object','jTPOa':'lXhCa','DeEjC':_0x5b5286(-0x5f,-0xfc,-0xe8,-0x102),'KfEHY':function(_0x34c645,_0x1c0aff){return _0x34c645>_0x1c0aff;},'IwCFA':_0x5b5286(-0xe3,-0x166,-0x185,-0x12b),'FSihW':'WwXtx','kSoby':'LLM\x20请求返回为空'+_0x5e66d1(-0x131,-0x162,-0x188,-0x1de)+_0x5b5286(-0x123,-0x6d,-0x17a,-0x1a3)+_0x5b5286(-0x13e,-0x8e,-0xe9,-0x168)+_0x5b5286(-0x25,-0x92,-0xd6,0xa1),'YdlOw':_0x5b5286(0x25,0x90,-0x33,0x7c),'vDXUB':function(_0x52919b,_0x1b54da){return _0x52919b(_0x1b54da);},'VfSnC':function(_0x1e09d8,_0x550056){return _0x1e09d8(_0x550056);},'UaGTe':function(_0x446a3d,_0x5ddf15){return _0x446a3d(_0x5ddf15);},'SgWvv':function(_0x2af14a,_0x16cb57){return _0x2af14a!==_0x16cb57;},'jVvCG':'uwPfk','HvFuI':_0x5e66d1(-0x16b,-0x2b7,-0x225,-0x232),'MdNWP':_0x5e66d1(-0x1e8,-0x168,-0x150,-0x197)+'2','uUDDs':_0x5b5286(-0x130,-0x1f4,-0x1f0,-0xe6),'NnzId':'LLM\x20Execut'+_0x5e66d1(-0x114,-0x12d,-0x11b,-0x1b4),'crjPx':_0x5b5286(0x10,0x36,-0x25,0x4f),'xxWwA':'IFoyD','wdLWX':function(_0x2163b1,_0x169fcc){return _0x2163b1===_0x169fcc;}},{prompt:_0x3546fc,id:_0x4b3e68}=_0x3d9e1b;if(!_0x4b3e68||!_0x3546fc)return;if(currentLLMRequestController){if(_0x1b533d[_0x5e66d1(-0x9a,-0xd,-0x26,-0xdb)]('VDfJt',_0x1b533d[_0x5e66d1(-0x1a0,-0x2f1,-0x1a9,-0x234)]))currentLLMRequestController[_0x5b5286(0x20,-0x57,0x20,0x37)](),toastr[_0x5b5286(-0xe8,-0x190,-0xa3,-0x107)](_0x1b533d['gzyiu']);else{const _0x397000=_0x1b533d[_0x5b5286(-0x6f,-0x2c,-0x92,-0x6d)];_0x2a359c[_0x5e66d1(-0x1af,-0x27b,-0x274,-0x204)](_0x397000);const _0x33343a={};_0x33343a['success']=![],_0x33343a['result']=_0x397000,_0x33343a['id']=_0x3c35c0,_0x43b902[_0x5b5286(-0xf9,-0x16d,-0x16d,-0x4d)](_0x348ba4['LLM_EXECUT'+_0x5b5286(0x36,-0x58,-0x1b,-0x6f)],_0x33343a);return;}}currentLLMRequestController=new AbortController();const _0x522acc=currentLLMRequestController['signal'],_0x4b6ac6=currentLLMRequestController,_0x306828={};_0x306828[_0x5e66d1(-0x1b8,-0x156,-0x257,-0x196)]=_0x1b533d[_0x5b5286(-0x142,-0x161,-0x94,-0x167)],_0x306828['type']=TaskType[_0x5e66d1(-0x83,-0x169,-0x103,-0x101)],_0x306828[_0x5e66d1(-0xbb,-0x54,-0x5e,-0x109)]=_0x4b3e68;const _0xa61ce6=taskQueue[_0x5e66d1(-0x175,-0x11c,-0x1f8,-0x192)](_0x306828);llmTaskControllers['set'](_0xa61ce6,currentLLMRequestController),taskQueue[_0x5e66d1(-0xdb,-0x174,-0x144,-0x10b)+'us'](_0xa61ce6,TaskStatus[_0x5b5286(0x1a,-0x58,-0x36,0x80)]),_0x1b533d[_0x5e66d1(-0x21b,-0x1dc,-0x2ba,-0x1fa)](startFabLoading);function _0x5b5286(_0x4b9a46,_0x551a37,_0x4e419d,_0x3099bd){return _0xef6bec(_0x4b9a46- -0x24a,_0x551a37-0xd6,_0x4e419d-0x14c,_0x3099bd);}let _0x3d5090=![];_0x1b533d['MKOAT'](clearLog),_0x1b533d[_0x5e66d1(-0x141,-0x15c,-0x242,-0x1ed)](addLog,'=====\x20LLM\x20'+_0x5b5286(-0xf6,-0x115,-0x59,-0x164)+'=='),_0x1b533d[_0x5b5286(-0xe4,-0x18d,-0xc0,-0x139)](addLog,_0x5b5286(-0x118,-0x1e3,-0xba,-0x1c7)+_0x4b3e68),_0x1b533d[_0x5e66d1(-0x279,-0x265,-0x221,-0x205)](addLog,_0x5b5286(-0x14,-0x93,-0x6c,0x57)+':'),_0x1b533d[_0x5b5286(-0xf1,-0x9a,-0x137,-0xb5)](addLog,_0x1b533d[_0x5b5286(-0x60,-0x11b,-0xc,-0x59)](formatPromptForDisplay,_0x3546fc));const {api_url:_0xcde781,api_key:_0x2fbf4a,model:_0x4d7efc,temperature:_0x57ee8c,top_p:_0x1905ca,max_tokens:_0x3e0663,stream:_0x2fb534,bypass_proxy:_0x370d1f}=_0x23a2b0;if(_0x1b533d[_0x5e66d1(-0x248,-0x1d9,-0x176,-0x19e)](!_0xcde781,!_0x2fbf4a)||!_0x4d7efc){const _0x59cfdf=_0x1b533d[_0x5b5286(-0x6f,-0x3b,-0x94,-0x81)];toastr['error'](_0x59cfdf);const _0x378472={};_0x378472['success']=![],_0x378472[_0x5e66d1(-0x1db,-0x1dc,-0x21c,-0x260)]=_0x59cfdf,_0x378472['id']=_0x4b3e68,eventSource[_0x5b5286(-0xf9,-0xb6,-0xd0,-0x143)](eventNames[_0x5b5286(-0x8e,-0x109,0x32,-0x120)+_0x5b5286(0x36,-0x42,0x47,-0x7d)],_0x378472);return;}const _0x15d963=_0xcde781[_0x5b5286(-0x3a,0x27,0x5e,0x3c)](/\/$/,'');let _0x2d37d1,_0x1ebd7d,_0x1597c0;function _0x5e66d1(_0x275d34,_0x4fff01,_0x24a6d7,_0x18816e){return _0xef6bec(_0x18816e- -0x35e,_0x4fff01-0xdf,_0x24a6d7-0x1c3,_0x275d34);}if(_0x370d1f){_0x2d37d1=_0x15d963+(_0x5e66d1(-0x243,-0x160,-0x101,-0x1cc)+'letions');const _0xe7a66e={};_0xe7a66e[_0x5e66d1(-0x11b,-0x256,-0x1e9,-0x191)+'pe']=_0x1b533d['Ayofn'],_0xe7a66e[_0x5e66d1(-0x1d0,-0x10b,-0x128,-0x12b)+_0x5b5286(-0x2e,0x55,0x2b,0x13)]=_0x5b5286(-0x13c,-0xd2,-0xc5,-0xe7)+_0x2fbf4a,_0x1ebd7d=_0xe7a66e,_0x1597c0={'model':_0x4d7efc,'messages':_0x3546fc,'temperature':_0x57ee8c,'top_p':_0x1905ca,'max_tokens':_0x3e0663,'stream':_0x1b533d[_0x5e66d1(-0x191,-0x127,-0xfa,-0x137)](_0x2fb534,![])};}else{let _0x469510=_0x15d963;!_0x469510[_0x5b5286(-0x64,-0x28,0x49,-0x83)](_0x1b533d[_0x5e66d1(-0x1bf,-0x1f9,-0x203,-0x229)])&&!_0x469510[_0x5e66d1(-0x179,-0x1a3,-0x19a,-0x166)](_0x1b533d[_0x5e66d1(-0x2b5,-0x1a5,-0x2b8,-0x23e)])&&(_0x469510=_0x1b533d[_0x5e66d1(-0x1fc,-0x1a3,-0x293,-0x1f1)](_0x469510,_0x1b533d['STSEL']));_0x469510=_0x469510[_0x5b5286(-0x3a,-0xc6,-0xd4,-0xbd)](/\/v1\/$/,_0x1b533d[_0x5b5286(-0x115,-0x131,-0x1d5,-0x12f)]),_0x2d37d1=_0x5b5286(-0x9b,-0x138,-0xcd,-0xad)+'nds/chat-c'+'ompletions'+_0x5b5286(-0x119,-0x1c2,-0xe5,-0xa2),_0x1ebd7d=_0x1b533d[_0x5e66d1(-0x18f,-0x1ac,-0x2b0,-0x1f8)](getRequestHeaders,window[_0x5e66d1(-0x1ab,-0x169,-0xcc,-0x165)]);const _0x1fddc6={};_0x1fddc6['chat_compl'+_0x5b5286(-0x12d,-0xe8,-0x1f3,-0x13d)+'ce']=_0x1b533d[_0x5b5286(-0xb6,-0xda,-0x68,-0x136)],_0x1fddc6[_0x5b5286(-0x3f,-0x8c,-0x107,-0xef)]=_0x469510,_0x1fddc6['custom_inc'+_0x5b5286(0x37,0x48,0x6d,0x97)+'rs']='Authorizat'+_0x5b5286(-0xe9,-0x76,-0x79,-0x94)+_0x5e66d1(-0x13b,-0x38,-0x134,-0xf0)+_0x2fbf4a+'\x22',_0x1fddc6[_0x5e66d1(-0x183,-0x2c,-0xdf,-0xd6)]=_0x4d7efc,_0x1fddc6[_0x5e66d1(-0xf7,-0x188,-0xf1,-0x12a)]=_0x3546fc,_0x1fddc6[_0x5e66d1(-0x35,-0x190,-0xec,-0xd8)+'e']=_0x57ee8c,_0x1fddc6['top_p']=_0x1905ca,_0x1fddc6[_0x5b5286(-0x123,-0x187,-0x10d,-0x18a)]=_0x3e0663,_0x1fddc6[_0x5e66d1(-0x19c,-0x29c,-0x1bb,-0x221)]=![],_0x1597c0=_0x1fddc6;}_0x359e03&&(_0x1b533d[_0x5e66d1(-0x14e,-0x1a7,-0x278,-0x203)]('DVJPT',_0x1b533d[_0x5e66d1(-0x18d,-0x2b1,-0x1a0,-0x23a)])?_0x1b533d['yZtcX'](_0x359e03,_0x1b533d['OFpEI']):_0x1b533d[_0x5b5286(-0x41,-0x41,-0x8c,-0x28)](_0x51b67b,_0x5a7100));try{const _0x11cbe4=await _0x1b533d[_0x5b5286(-0xe7,-0xcc,-0xe2,-0x118)](fetch,_0x2d37d1,{'method':_0x1b533d[_0x5b5286(0x1c,-0x19,0xdd,0xdb)],'headers':_0x1ebd7d,'body':JSON[_0x5e66d1(-0x1b7,-0x182,-0xb8,-0x136)](_0x1597c0),'signal':_0x522acc}),_0x1ed285=await _0x11cbe4[_0x5e66d1(-0x102,-0xe3,-0xff,-0x17d)]();if(_0x1ed285[_0x5e66d1(-0x218,-0x1d9,-0x28d,-0x204)]){if(_0x1b533d[_0x5b5286(-0xe1,-0xbe,-0xc5,-0xbf)](_0x5e66d1(-0x201,-0x268,-0x1ab,-0x219),_0x1b533d[_0x5e66d1(-0x158,-0x216,-0x23e,-0x1a7)]))return _0x358d72[_0x5b5286(-0x22,0x2b,-0x1a,-0x7)](_0x5a78d2,null,-0x85f+0x17dd+-0xf7c);else{let _0x5dc8ac;if(_0x1b533d[_0x5b5286(0xe,-0x18,-0x66,0x66)](typeof _0x1ed285[_0x5e66d1(-0x19a,-0x2bf,-0x28b,-0x204)],_0x1b533d[_0x5e66d1(-0x12f,-0x10d,-0xa4,-0x14a)])&&_0x1ed285['error'][_0x5e66d1(-0x216,-0x210,-0x287,-0x24c)]){if(_0x1b533d[_0x5e66d1(-0x163,-0x21a,-0x216,-0x15f)]===_0x1b533d[_0x5e66d1(-0x9a,-0xd1,-0x18f,-0xcd)]){const _0x2ac5df=_0x3a041a[_0x10a0dc][_0x5e66d1(-0xaa,-0xc5,-0x19b,-0x12e)+_0x5e66d1(-0x1b9,-0x21d,-0x177,-0x17e)+'figs']||{},_0xfa9d39={};_0xfa9d39[_0x5b5286(-0x5e,-0xba,0x3f,-0xed)+'e']='默认',_0xfa9d39[_0x5e66d1(-0x18e,-0xbb,-0x14e,-0xe5)+_0x5b5286(-0x92,-0xf5,0x28,0xd)]='默认';const _0x3e6a1f=_0x2ac5df[_0x126e0f]||_0xfa9d39,_0xe6ab88=_0x52d1ea[_0x421702][_0x5b5286(-0x6,0x32,-0xca,-0x97)+'es']||{},_0x4402a4=_0x1ee270[_0x3b489b][_0x5b5286(-0x12f,-0x1d8,-0x125,-0x10b)+_0x5e66d1(-0x177,-0x143,-0x112,-0x1d9)+'s']||{},_0x207a82=_0x3e6a1f[_0x5e66d1(-0x215,-0x172,-0x20c,-0x172)+'e']||'默认',_0x15cdab=_0xe6ab88[_0x207a82]||_0xe6ab88[_0x174d08[_0x5e66d1(-0x22,-0xfe,-0x137,-0xdc)](_0xe6ab88)[-0x5*-0x29+-0x3*0x45b+0xc44]]||{},_0x175798=_0x3e6a1f[_0x5b5286(0x2f,0x79,0xe,-0x29)+'ofile']||'默认',_0x6be0d2=_0x4402a4[_0x175798]||_0x4402a4[_0x4ba50b['keys'](_0x4402a4)[0x220+-0x1d66+0x1b46]]||{},_0x263cef={};return _0x263cef[_0x5e66d1(-0x270,-0x1ac,-0x172,-0x1ba)]=_0x15cdab[_0x5b5286(-0xa6,-0xf9,-0x12f,-0xb7)]||'',_0x263cef['api_key']=_0x15cdab[_0x5b5286(0x2e,-0x43,-0x77,0xbe)]||'',_0x263cef[_0x5b5286(0x3e,0x19,-0x7,0x1e)]=_0x15cdab[_0x5e66d1(-0x1e,-0x1d,-0x4a,-0xd6)]||'',_0x263cef[_0x5b5286(0x3c,-0x1c,-0x8a,0xa9)+'e']=_0x15cdab['temperatur'+'e']??0xb57+0x4*-0x86f+0x1665+0.7,_0x263cef['top_p']=_0x15cdab[_0x5b5286(-0xda,-0x12b,-0x197,-0x122)]??-0x25b8+-0x3d3*0x1+0x298c,_0x263cef[_0x5b5286(-0x123,-0x83,-0xb3,-0x8a)]=_0x15cdab[_0x5b5286(-0x123,-0x1f1,-0xa4,-0x1a5)]??0xfb*0x22+-0x6d3*0x2+-0x11b0,_0x263cef[_0x5e66d1(-0x1aa,-0x1b6,-0x1d0,-0x221)]=_0x15cdab[_0x5e66d1(-0x1c2,-0x2d0,-0x29b,-0x221)]??![],_0x263cef[_0x5b5286(-0x1d,-0x76,-0xc1,-0xb5)+'xy']=_0x15cdab[_0x5e66d1(-0x89,-0x160,-0x166,-0x131)+'xy']??![],_0x263cef[_0x5e66d1(-0x1b2,-0x2e6,-0x1dd,-0x248)]=_0x6be0d2,_0x263cef;}else{_0x5dc8ac=''+_0x1ed285['error']['message'];const _0x1fce87=[];if(_0x1ed285[_0x5b5286(-0xf0,-0x15c,-0x5d,-0x81)][_0x5e66d1(-0xe3,-0xd7,-0x1b9,-0x18a)])_0x1fce87[_0x5e66d1(-0x20c,-0x226,-0x186,-0x239)](_0x5b5286(-0xd1,-0x189,-0xa0,-0xf4)+_0x1ed285[_0x5e66d1(-0x1d6,-0x248,-0x1bd,-0x204)][_0x5e66d1(-0x11e,-0x203,-0xfa,-0x18a)]);if(_0x1ed285['error'][_0x5b5286(-0x14b,-0xee,-0x11a,-0x126)])_0x1fce87[_0x5e66d1(-0x23f,-0x307,-0x26e,-0x239)](_0x5b5286(-0xa5,-0xd,-0xee,-0xd4)+_0x1ed285[_0x5b5286(-0xf0,-0x151,-0xb9,-0x7e)][_0x5b5286(-0x14b,-0xad,-0xab,-0xeb)]);_0x1b533d[_0x5b5286(0x1,-0x5e,-0x3f,0x82)](_0x1fce87[_0x5e66d1(-0x2b4,-0x19a,-0x1bd,-0x224)],-0x5*0x71d+-0x14c+0x1*0x24dd)&&(_0x5dc8ac+='\x20('+_0x1fce87[_0x5e66d1(-0x132,-0x1d3,-0x188,-0x15e)](',\x20')+')');}}else{if(_0x1b533d[_0x5b5286(-0xe1,-0xfa,-0x15f,-0xec)]('JUTrn',_0x1b533d[_0x5e66d1(-0x83,-0xa7,-0x1cf,-0x146)]))_0x5dc8ac=''+JSON[_0x5b5286(-0x22,-0xb9,0x3e,-0xa9)](_0x1ed285[_0x5e66d1(-0x2a6,-0x1d7,-0x254,-0x204)]);else{const _0x178ee1=_0x356527[_0xbe7a5e]['test_conte'+'xt_profile'+'s']||{},_0x48d822=_0x2b2a06[_0x42ac10]['current_te'+_0x5e66d1(-0x298,-0x169,-0x1d4,-0x1f0)+_0x5e66d1(-0x246,-0x258,-0x266,-0x242)];return _0x178ee1[_0x48d822]||_0x178ee1[_0x4c524c['keys'](_0x178ee1)[-0x1*0xe09+-0x728+0x43d*0x5]]||{};}}throw new Error(_0x5dc8ac);}}if(!_0x11cbe4['ok']){if(_0x5b5286(0x12,-0x4b,0xaf,0xab)!==_0x1b533d[_0x5b5286(-0xd6,-0x138,-0x8a,-0x148)])_0x1b533d[_0x5b5286(-0x41,-0x8d,0x1e,-0x10b)](_0x228dd6,_0xa4a0c3);else throw new Error('请求失败:\x20'+_0x11cbe4[_0x5b5286(-0x24,-0xf0,-0xe,-0x4e)]+'\x20'+_0x11cbe4[_0x5e66d1(-0x271,-0x187,-0x237,-0x1b7)]);}const _0x187cb9=_0x1ed285[_0x5e66d1(-0x1dc,-0xe4,-0x12c,-0x182)]?.[-0x1e36+-0x562+0x86*0x44]?.[_0x5e66d1(-0x2dc,-0x1f1,-0x312,-0x24c)]?.[_0x5e66d1(-0x272,-0x1f7,-0x29b,-0x1dc)]||'';if(!_0x187cb9){if(_0x1b533d[_0x5e66d1(-0x252,-0x281,-0x258,-0x1e4)](_0x5e66d1(-0x69,-0x155,-0x5d,-0xfe),'IJYVs'))return _0xa500d0;else toastr[_0x5e66d1(-0x27c,-0x1cc,-0x112,-0x1cd)](_0x1b533d[_0x5e66d1(-0x1c7,-0x131,-0x24c,-0x1ae)]);}if(_0x359e03){if(_0x1b533d['KzYvm'](_0x1b533d['YdlOw'],_0x1b533d[_0x5e66d1(-0x1b7,-0x2bd,-0x2ca,-0x227)]))throw _0x4317bb;else _0x1b533d[_0x5e66d1(-0x20b,-0x8b,-0x1aa,-0x14c)](_0x359e03,_0x187cb9);}_0x1b533d[_0x5e66d1(-0x21a,-0x285,-0x225,-0x1cf)](addLog,_0x5e66d1(-0x22a,-0x24a,-0x1d3,-0x1cb)+_0x5b5286(0x14,0x79,-0x21,0xda)),_0x1b533d[_0x5e66d1(-0x146,-0x297,-0x248,-0x213)](addLog,_0x187cb9),_0x1b533d[_0x5b5286(-0x38,-0x24,-0xe9,0x2e)](addLog,_0x5b5286(0x3b,-0x36,-0x7b,-0x4f)+'请求完成\x20====='),taskQueue[_0x5b5286(-0x106,-0xd2,-0x143,-0xf8)+'sk'](_0xa61ce6,!![]),llmTaskControllers['delete'](_0xa61ce6);const _0xd80ab0={};_0xd80ab0[_0x5b5286(-0x145,-0xbe,-0x194,-0x1c4)]=!![],_0xd80ab0[_0x5b5286(-0x14c,-0x201,-0x10d,-0x1f9)]=_0x187cb9,_0xd80ab0['id']=_0x4b3e68,eventSource[_0x5e66d1(-0x28c,-0x296,-0x1ec,-0x20d)](eventNames[_0x5e66d1(-0x14c,-0x1a8,-0xf2,-0x1a2)+_0x5e66d1(-0x64,-0x10c,-0x8e,-0xde)],_0xd80ab0);}catch(_0x32101a){if(_0x1b533d[_0x5e66d1(-0x227,-0x283,-0x2b6,-0x1f4)](_0x1b533d['jVvCG'],_0x1b533d[_0x5b5286(-0x46,-0xe8,-0x102,-0xc9)])){if(_0x32101a['name']===_0x5b5286(-0x130,-0xe8,-0x1be,-0x1d9)){const _0x39291e=_0x1b533d[_0x5e66d1(-0x1b3,-0xe4,-0x9b,-0x105)][_0x5b5286(-0x95,-0x111,-0xf4,-0x3)]('|');let _0x48da3f=-0x1d9*-0xa+-0x6dd*-0x4+0x1*-0x2dee;while(!![]){switch(_0x39291e[_0x48da3f++]){case'0':taskQueue['updateStat'+'us'](_0xa61ce6,TaskStatus[_0x5e66d1(-0xab,-0x18e,-0x10d,-0xca)]);continue;case'1':_0x3d5090=!![];continue;case'2':return;case'3':const _0xe215d7={};_0xe215d7[_0x5b5286(-0x82,-0x12f,-0x7c,0x3e)]=_0x1b533d[_0x5e66d1(-0x1b2,-0x2c4,-0x239,-0x217)],_0xe215d7['message']=_0x5e66d1(-0x1fd,-0x1dd,-0x2f1,-0x254)+_0x5b5286(-0xc4,-0xb7,-0x151,-0x174);const _0x12b68f={};_0x12b68f[_0x5b5286(-0x145,-0x130,-0x89,-0xed)]=![],_0x12b68f['result']=null,_0x12b68f['id']=_0x4b3e68,_0x12b68f[_0x5e66d1(-0x1f4,-0x197,-0x17b,-0x204)]=_0xe215d7,eventSource[_0x5b5286(-0xf9,-0x42,-0x10d,-0x1a0)](eventNames[_0x5b5286(-0x8e,-0x142,-0x5,-0x96)+_0x5b5286(0x36,-0x69,0x48,-0x89)],_0x12b68f);continue;case'4':console[_0x5b5286(0x3,0x10,-0xc7,0xaf)]('LLM\x20execut'+_0x5b5286(0x26,-0x33,0xa3,-0x80)+'aborted.');continue;case'5':llmTaskControllers[_0x5b5286(-0x3,0x31,0x46,-0xf)](_0xa61ce6);continue;}break;}}console[_0x5e66d1(-0x2b9,-0x2c7,-0x272,-0x204)](_0x1b533d[_0x5b5286(-0x13b,-0xbc,-0x15b,-0x197)],_0x32101a);const _0x3f14d8=_0x5e66d1(-0x19f,-0x24a,-0x26d,-0x1bb)+_0x32101a[_0x5e66d1(-0x2ca,-0x257,-0x2a3,-0x24c)];_0x359e03&&_0x1b533d[_0x5b5286(-0x41,0x55,-0xf7,-0xe1)](_0x359e03,_0x3f14d8);toastr[_0x5e66d1(-0x13f,-0x14a,-0x1ec,-0x204)](_0x32101a['message']),taskQueue['completeTa'+'sk'](_0xa61ce6,![]),llmTaskControllers[_0x5e66d1(-0x150,-0x110,-0x74,-0x117)](_0xa61ce6);const _0xeb0b43={};_0xeb0b43[_0x5e66d1(-0x1d0,-0x1b4,-0x2e3,-0x259)]=![],_0xeb0b43[_0x5e66d1(-0x23e,-0x258,-0x192,-0x260)]=_0x3f14d8,_0xeb0b43['id']=_0x4b3e68,eventSource['emit'](eventNames[_0x5e66d1(-0x1ab,-0x1f2,-0x112,-0x1a2)+_0x5b5286(0x36,0xc8,0xa2,0x5)],_0xeb0b43);}else{const _0x2c6387=_0x115eca+(':\x20API\x20URL,'+_0x5b5286(-0xeb,-0xcd,-0x8f,-0xb8)+_0x5b5286(-0x132,-0x16e,-0x18f,-0x122)+'置。');_0x1393e2[_0x5b5286(-0xf0,-0x7d,-0xc8,-0x19e)](_0x2c6387);const _0x3bd92c={};_0x3bd92c[_0x5b5286(-0x145,-0x11c,-0x126,-0x155)]=![],_0x3bd92c[_0x5e66d1(-0x261,-0x303,-0x2b1,-0x260)]=_0x2c6387,_0x3bd92c['id']=_0x3d572f,_0x349aca['emit'](_0x46c29a,_0x3bd92c);return;}}finally{if(_0x1b533d['crjPx']!==_0x1b533d[_0x5b5286(-0xcc,-0xc0,-0xb7,-0x61)]){let _0x35a1bf;if(_0x1b533d[_0x5b5286(-0xd0,-0x10c,-0x136,-0x123)](typeof _0x44540c[_0x5b5286(-0xf0,-0xd6,-0x5b,-0x175)],_0x5b5286(-0x112,-0x113,-0xb9,-0x7a))&&_0x468bf9[_0x5e66d1(-0x151,-0x20c,-0x152,-0x204)][_0x5e66d1(-0x241,-0x315,-0x2bc,-0x24c)]){_0x35a1bf=''+_0x4233a3['error'][_0x5b5286(-0x138,-0x13b,-0xd9,-0x13d)];const _0x54e98a=[];if(_0x11ea05[_0x5e66d1(-0x28c,-0x1ed,-0x28f,-0x204)][_0x5b5286(-0x76,-0xa1,-0xf9,-0x141)])_0x54e98a[_0x5b5286(-0x125,-0x6b,-0x1c2,-0xa2)]('类型:\x20'+_0x308a44[_0x5b5286(-0xf0,-0x38,-0x8e,-0xb8)]['type']);if(_0x3cba9f[_0x5b5286(-0xf0,-0x184,-0x5c,-0x181)][_0x5b5286(-0x14b,-0xdd,-0xc2,-0x218)])_0x54e98a[_0x5b5286(-0x125,-0xf9,-0x191,-0x116)](_0x5e66d1(-0x1a6,-0x240,-0x19d,-0x1b9)+_0x128dcd[_0x5b5286(-0xf0,-0xe8,-0x7c,-0x65)][_0x5e66d1(-0x24b,-0x1f8,-0x223,-0x25f)]);_0x54e98a[_0x5e66d1(-0x1da,-0x166,-0x15b,-0x224)]>0x21cd+0x17*-0x9d+-0x13b2&&(_0x35a1bf+='\x20('+_0x54e98a[_0x5e66d1(-0x221,-0xf8,-0x17f,-0x15e)](',\x20')+')');}else _0x35a1bf=''+_0x146835[_0x5e66d1(-0x19d,-0x8d,-0xdc,-0x136)](_0xfa0b04[_0x5e66d1(-0x174,-0x227,-0x1d2,-0x204)]);throw new _0x2545af(_0x35a1bf);}else{if(_0x1b533d[_0x5e66d1(-0x4e,-0x47,-0xbe,-0x106)](currentLLMRequestController,_0x4b6ac6)){if(_0x1b533d[_0x5e66d1(-0x63,-0x1ad,-0xa6,-0x106)](_0x1b533d['xxWwA'],_0x5e66d1(-0x140,-0xae,-0x1e0,-0x11c)))currentLLMRequestController=null;else{if(!_0x4fa718[_0x5e66d1(-0x154,-0x9e,-0xb4,-0xfd)])return;if(!_0x11b967['content']||_0x1b533d[_0x5e66d1(-0x7f,-0x6a,-0x13d,-0xdb)](_0x22c853[_0x5e66d1(-0x1df,-0x157,-0x236,-0x1dc)][_0x5b5286(0x18,0xc,-0x75,0xd9)](),''))return;if(_0x1b533d[_0x5b5286(0x39,0x94,0xa7,0xee)](_0x441320[_0x5e66d1(-0x1be,-0x1c7,-0xd3,-0x12c)+'e'],_0x5e66d1(-0x2d0,-0x144,-0x1e4,-0x206))){if(!_0xdf525b||!_0x1dc19e(_0x722c22[_0x5e66d1(-0x1ec,-0x1bf,-0x215,-0x1f6)+'ds'],_0x24fd98))return;}const _0x3b9d99={};_0x3b9d99[_0x5b5286(-0x1f,-0x68,-0x37,-0x31)]=_0x215904[_0x5b5286(-0x1f,0x7,-0x53,0x65)]||_0x1b533d['QHkkf'],_0x3b9d99['content']=_0x413fcb[_0x5e66d1(-0x1ad,-0x1ac,-0x13e,-0x1dc)],_0x5540cd[_0x5b5286(-0x125,-0x15a,-0xae,-0x15a)](_0x3b9d99);}}(!_0x3d5090||_0x1b533d[_0x5b5286(-0xae,-0x100,-0xe7,-0xb7)](currentLLMRequestController,null))&&_0x1b533d[_0x5b5286(-0xe6,-0x116,-0x94,-0x186)](stopFabLoading);}}}export function createGetPromptHandler(_0x4d5965,_0x25619e){const _0xd06e01={'FTRaR':function(_0x4a12c2,_0x1e1c51){return _0x4a12c2(_0x1e1c51);}};return function(_0x23d76f){const {id:_0xe6efe0}=_0x23d76f;if(!_0xe6efe0)return;function _0x41dd15(_0x596a56,_0x1b72e3,_0x17094f,_0x42a74d){return _0x5ba9(_0x42a74d-0x190,_0x1b72e3);}const _0x3a6536=REQUEST_TYPE_NAMES[_0x4d5965]||_0x4d5965;console[_0x1e9463(-0x15c,-0x12b,-0x105,-0x9d)](_0x1e9463(-0x1ac,-0xce,-0x108,-0x109)+_0x1e9463(-0x10c,-0x232,-0x1d7,-0x281)+_0x3a6536+(_0x1e9463(-0x19a,-0x18b,-0x1dd,-0x2a2)+_0x41dd15(0x300,0x2e1,0x26a,0x296))+_0xe6efe0+')');const _0x49feff=_0xd06e01[_0x1e9463(-0x1cc,-0x1be,-0x184,-0x1ac)](buildPromptForRequestType,_0x4d5965),_0x17d8ea={};_0x17d8ea['prompt']=_0x49feff,_0x17d8ea['id']=_0xe6efe0;function _0x1e9463(_0x12e8f9,_0x18e9b7,_0x32ef4c,_0x58ca5e){return _0x5ba9(_0x32ef4c- -0x315,_0x18e9b7);}eventSource['emit'](_0x25619e,_0x17d8ea);};}export function createExecuteHandler(_0xf8f6ad,_0x31c589,_0x4289de=null){function _0x3619ba(_0xf7ae91,_0x16e0ef,_0x30fc77,_0x5ae3da){return _0x1cb675(_0x16e0ef- -0x59,_0x16e0ef-0xff,_0x30fc77-0x107,_0x5ae3da);}const _0x1f096f={};_0x1f096f[_0x3619ba(0x2e8,0x3a5,0x353,0x44b)]=_0x3619ba(0x3ef,0x33d,0x340,0x32e);function _0x5c423d(_0x1a4107,_0x5d66ce,_0x21ec3b,_0x329cfa){return _0xef6bec(_0x21ec3b- -0x14c,_0x5d66ce-0x15e,_0x21ec3b-0x131,_0x5d66ce);}_0x1f096f[_0x5c423d(0x60,0x70,0x4b,-0x7f)]='QYlYd';const _0x3a7924=_0x1f096f;return async function(_0x37c625){function _0x4c8ae5(_0x14d639,_0x1fabd6,_0x4730c1,_0x1ef6b2){return _0x3619ba(_0x14d639-0xd8,_0x4730c1- -0x4e1,_0x4730c1-0xe7,_0x14d639);}function _0x55dd8c(_0x475ab2,_0x341170,_0x4e5121,_0x28f36d){return _0x3619ba(_0x475ab2-0x4e,_0x341170- -0x24d,_0x4e5121-0x1f0,_0x4e5121);}if(_0x3a7924[_0x4c8ae5(-0xbd,-0xf8,-0x111,-0x118)]!==_0x3a7924[_0x55dd8c(0xb8,0x183,0x16d,0x237)])_0x502033[_0x55dd8c(0x1aa,0x256,0x225,0x293)](),_0x5e5c74[_0x4c8ae5(-0x99,-0x203,-0x146,-0x14e)](_0x3a7924['othwt']);else{const _0x558251=_0x4289de?_0x4289de():null;await executeTypedLLMRequest(_0x37c625,_0xf8f6ad,_0x31c589,_0x558251);}};}