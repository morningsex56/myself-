(function(_0x3cc71c,_0x5ec093){function _0x3299d0(_0x132f22,_0x1e9905,_0x45fc31,_0x5cf201){return _0x1c72(_0x5cf201-0xc2,_0x132f22);}const _0x27a7f1=_0x3cc71c();function _0x4bf4f6(_0x5d138a,_0x5dc8c4,_0x52d45d,_0x477c7f){return _0x1c72(_0x5d138a-0x32a,_0x5dc8c4);}while(!![]){try{const _0x44e47e=-parseInt(_0x3299d0(0x295,0x2d9,0x22d,0x28e))/(0x3c5+0x17*0xf4+0x19b0*-0x1)+parseInt(_0x3299d0(0x338,0x339,0x313,0x2da))/(0x73b*-0x1+-0x1*-0xa95+-0x358)+parseInt(_0x4bf4f6(0x4cc,0x479,0x4a6,0x50a))/(-0x1293+0x1ea*-0x3+0x1854)+-parseInt(_0x4bf4f6(0x531,0x50e,0x55c,0x4f3))/(-0x1fee+-0x20b9+0x40ab)+parseInt(_0x3299d0(0x2d8,0x2df,0x2fe,0x2b5))/(0x1*0x14b7+0x1*0x264b+0x3afd*-0x1)+-parseInt(_0x3299d0(0x349,0x35a,0x29d,0x2f9))/(-0x18ee+-0x110d+0x2a01*0x1)+parseInt(_0x4bf4f6(0x515,0x564,0x4ee,0x4e4))/(0x6*0x632+0x1863+-0xf62*0x4)*(parseInt(_0x3299d0(0x324,0x361,0x2cc,0x31c))/(-0x1*0x664+-0x98+0x1*0x704));if(_0x44e47e===_0x5ec093)break;else _0x27a7f1['push'](_0x27a7f1['shift']());}catch(_0xc97e90){_0x27a7f1['push'](_0x27a7f1['shift']());}}}(_0x7068,-0x1*0x5615b+0x5*0x14801+-0x139ff*-0x2));const _0x2b760c=(function(){const _0x318867={};_0x318867['Ryfqq']=_0x27e1e3(-0x157,-0x121,-0x10a,-0xdd);function _0x27e1e3(_0x52dbd9,_0x3e5fae,_0x126a04,_0x378c49){return _0x1c72(_0x126a04- -0x2d8,_0x52dbd9);}_0x318867[_0x2b25fb(-0x5,-0x50,0x50,-0x34)]=function(_0x5652eb,_0x16397a){return _0x5652eb!==_0x16397a;},_0x318867[_0x2b25fb(0x1e,-0x18,0x5d,0x74)]=_0x2b25fb(0xb,-0x18,0x29,0x34),_0x318867[_0x2b25fb(0x57,0x3c,0x54,0x79)]='RFOSB';function _0x2b25fb(_0x5ca89a,_0x5f083f,_0xf0fe21,_0x2a34fc){return _0x1c72(_0x5ca89a- -0x1c0,_0x5f083f);}const _0xe13afc=_0x318867;let _0x5ec220=!![];return function(_0x47759c,_0x59478f){function _0x48eaeb(_0x4eb8f9,_0x137187,_0x3dd2bd,_0x80530e){return _0x27e1e3(_0x80530e,_0x137187-0x2,_0x4eb8f9-0x118,_0x80530e-0x1a2);}function _0x22baa2(_0x9cd273,_0x5b6787,_0x3e0597,_0x427845){return _0x2b25fb(_0x9cd273-0x28b,_0x427845,_0x3e0597-0x18b,_0x427845-0xa);}const _0x10b72b={};_0x10b72b['zcnSD']=function(_0x4ddbea,_0x582f23){return _0x4ddbea===_0x582f23;},_0x10b72b[_0x48eaeb(0x75,0x54,0x36,0x2a)]=_0x22baa2(0x2f0,0x2b7,0x2bd,0x2a8),_0x10b72b['zQkrd']=_0xe13afc[_0x48eaeb(-0x1d,-0x27,-0x3,-0x25)],_0x10b72b[_0x48eaeb(0x24,0x40,0x23,0x35)]='ruUsj';const _0x111155=_0x10b72b;if(_0xe13afc[_0x22baa2(0x286,0x2c6,0x2ab,0x2ac)](_0xe13afc[_0x48eaeb(0x1e,-0x24,0x51,0xc)],_0xe13afc[_0x48eaeb(0x57,0x4b,0x36,0x58)])){const _0x525cd2=_0x5ec220?function(){function _0x2693d5(_0x622b99,_0x14d198,_0x38c93d,_0x3e8a33){return _0x48eaeb(_0x622b99- -0x1ed,_0x14d198-0x2f,_0x38c93d-0x9f,_0x38c93d);}function _0x5a0341(_0x5b7083,_0x56c702,_0x44fda5,_0x40a83a){return _0x22baa2(_0x5b7083- -0x482,_0x56c702-0xbb,_0x44fda5-0x10f,_0x56c702);}if(_0x111155['zcnSD'](_0x111155[_0x5a0341(-0x182,-0x1c8,-0x1a5,-0x177)],_0x5a0341(-0x177,-0x1d4,-0x16d,-0x15d)))return[];else{if(_0x59478f){if(_0x111155[_0x2693d5(-0x1f4,-0x1fe,-0x1c3,-0x209)]!==_0x111155[_0x2693d5(-0x1c9,-0x1f0,-0x1f6,-0x1d0)]){const _0x5a9b09=_0x59478f[_0x2693d5(-0x1d6,-0x1be,-0x1c2,-0x22d)](_0x47759c,arguments);return _0x59478f=null,_0x5a9b09;}else _0x244a8e+=_0x5993aa;}}}:function(){};return _0x5ec220=![],_0x525cd2;}else return _0x211cde[_0x22baa2(0x29e,0x248,0x297,0x29e)]();};}()),_0x159be1=_0x2b760c(this,function(){const _0x3c074c={};function _0x312083(_0x26bd5e,_0x55fd30,_0x547301,_0x12d666){return _0x1c72(_0x547301-0x220,_0x12d666);}function _0x3388c4(_0x182f84,_0x46f64b,_0x4ed2fd,_0x213309){return _0x1c72(_0x4ed2fd- -0x113,_0x182f84);}_0x3c074c[_0x312083(0x4b3,0x443,0x461,0x49c)]=_0x3388c4(0x101,0x9f,0xf3,0xa0)+'+$';const _0x2ddd12=_0x3c074c;return _0x159be1[_0x312083(0x442,0x409,0x448,0x401)]()[_0x3388c4(0x103,0x114,0xfa,0xe8)](_0x2ddd12[_0x312083(0x48e,0x46b,0x461,0x412)])[_0x312083(0x44a,0x41f,0x448,0x485)]()['constructo'+'r'](_0x159be1)[_0x312083(0x43c,0x46d,0x42d,0x476)](_0x2ddd12['ywtFj']);});_0x159be1();function _0x1c72(_0x3e12cf,_0x395b37){_0x3e12cf=_0x3e12cf-(-0x1b0f+-0x1576+0x321f);const _0x178ecc=_0x7068();let _0x29bda0=_0x178ecc[_0x3e12cf];if(_0x1c72['gTemHm']===undefined){var _0x32850c=function(_0x328bd5){const _0x5dd6ab='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xbcc725='',_0x1b30a5='',_0x265b37=_0xbcc725+_0x32850c;for(let _0x32889a=-0x2151*0x1+-0xfc4+0x3115,_0x5a62f4,_0x551df0,_0x1a05c0=0x3b*-0x91+-0x3fb*-0x6+0x989;_0x551df0=_0x328bd5['charAt'](_0x1a05c0++);~_0x551df0&&(_0x5a62f4=_0x32889a%(0x1d50+0x1*-0x242b+0x6df)?_0x5a62f4*(0x25ba+-0xa25+-0x1b55)+_0x551df0:_0x551df0,_0x32889a++%(-0x3*0x1a7+-0x9d9*-0x1+0x1*-0x4e0))?_0xbcc725+=_0x265b37['charCodeAt'](_0x1a05c0+(0x1*0x18fd+-0x1bae+0x3*0xe9))-(0x77f+-0x1a5*0x3+0x286*-0x1)!==-0xf*-0x259+0x68*-0x32+0x7*-0x221?String['fromCharCode'](0x51c+0x53*-0x20+0xe5*0x7&_0x5a62f4>>(-(-0xe6e+0x381*-0x4+0x4*0x71d)*_0x32889a&-0x1*-0x1f3+-0x2339+0x214c)):_0x32889a:-0x11c0+-0x5*-0x25a+0x5fe){_0x551df0=_0x5dd6ab['indexOf'](_0x551df0);}for(let _0xd96b06=0xe5d+0x1*-0x10ac+0x24f*0x1,_0x1f498a=_0xbcc725['length'];_0xd96b06<_0x1f498a;_0xd96b06++){_0x1b30a5+='%'+('00'+_0xbcc725['charCodeAt'](_0xd96b06)['toString'](0x115*-0x9+-0x4f*-0x1b+-0x2f*-0x8))['slice'](-(0x2*0x115d+0xe7b+-0x3133));}return decodeURIComponent(_0x1b30a5);};_0x1c72['aZhfzu']=_0x32850c,_0x1c72['qOXgoF']={},_0x1c72['gTemHm']=!![];}const _0x13997a=_0x178ecc[-0x6c*-0x3+-0x1b*0x141+-0x3*-0xadd],_0x209dad=_0x3e12cf+_0x13997a,_0x5df8e7=_0x1c72['qOXgoF'][_0x209dad];if(!_0x5df8e7){const _0xa90073=function(_0x53da2f){this['honqpx']=_0x53da2f,this['JZlapo']=[0x1ba8+0xad0+-0x2677,0x1*-0x1597+0x3*-0x31d+0x6b*0x4a,0x9d*0xd+0x66+-0x85f],this['WBHEqN']=function(){return'newState';},this['IEAruO']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['ERAREl']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0xa90073['prototype']['ezmhwc']=function(){const _0x11a9a3=new RegExp(this['IEAruO']+this['ERAREl']),_0x3ec6dc=_0x11a9a3['test'](this['WBHEqN']['toString']())?--this['JZlapo'][-0x2*-0x1257+0x1*0x135d+-0x380a]:--this['JZlapo'][-0x2564+0xd02+0x1862];return this['dQMNHD'](_0x3ec6dc);},_0xa90073['prototype']['dQMNHD']=function(_0x5676b1){if(!Boolean(~_0x5676b1))return _0x5676b1;return this['UGZXAu'](this['honqpx']);},_0xa90073['prototype']['UGZXAu']=function(_0x4620d2){for(let _0x2cfc92=-0xf73+-0xd*-0x1af+-0x670,_0x15e6f1=this['JZlapo']['length'];_0x2cfc92<_0x15e6f1;_0x2cfc92++){this['JZlapo']['push'](Math['round'](Math['random']())),_0x15e6f1=this['JZlapo']['length'];}return _0x4620d2(this['JZlapo'][0x166e+-0x1654+-0x1a*0x1]);},new _0xa90073(_0x1c72)['ezmhwc'](),_0x29bda0=_0x1c72['aZhfzu'](_0x29bda0),_0x1c72['qOXgoF'][_0x209dad]=_0x29bda0;}else _0x29bda0=_0x5df8e7;return _0x29bda0;}import{extension_settings}from'../../../../extensions.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{extensionName,eventNames}from'./config.js';import{addLog}from'./utils.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{mergeAdjacentMessages}from'./promptProcessor.js';let settings;const SD_SYMBOL_PATTERN=/^([\(\[\{<]+)?(.*?)([\)\]\}>]+)?(:[\d.]+)?$/,SKIP_PATTERNS=[/^<lora:/i,/^<lyco:/i,/^<hypernet:/i,/^[\d.:]+$/,/^$/,/^\$.*\$$/];function shouldSkipTranslation(_0x22f1a3){function _0x10ad1e(_0xe03aa4,_0x442e35,_0x2b2eca,_0x232b50){return _0x1c72(_0x442e35-0x12e,_0x2b2eca);}function _0x545c01(_0x404ca4,_0x8519e9,_0x38463b,_0x5516e8){return _0x1c72(_0x38463b- -0x2ce,_0x5516e8);}return SKIP_PATTERNS[_0x10ad1e(0x303,0x326,0x2d0,0x375)](_0x266e6f=>_0x266e6f['test'](_0x22f1a3[_0x10ad1e(0x333,0x309,0x2ef,0x315)]()));}function _0x7068(){const _0xe1e0d4=['Dg9tDhjPBMC','y0jswK0','DhLtyNa','yLfJC2q','BhvcC0W','sgDrqMS','qxbPC3y','EgrKy3e','B3jPz2LUywXuyq','CMfUzg9T','vLj3rvG','tuTMz3u','qvrjt05FuKvrvq','Cvriz1O','iePtt07OP6pMNPdLPlhOTkxVViW','mJy5ntCXmhzUv0nluG','zMXVELi','uuvkDhm','zKzMyLG','wuXkEwu','De5UB3a','5BcD6k+v5PEN5Qc85BYpoG','vgrwu1C','wKLYz00','uMvQuMC','ExD0rMO','iow3SUIoT+wpLUE/U+IVKEApKoEKUUIVJsa','Ew16Dfq','rLHHtfi','yNzxwhC','qxvJq2u','CMvZDwX0CW','C2v0','C2LsvhC','ywHvveK','y0Tuug8','teXnx1rsqu5tta','EfjwtLK','BMfTzq','zw1PDa','y2XLyw5Lza','iow3SUAuTUwiSoE/U+IVKsbmte0','t1Lzvw0','ue9ou0u','yvvtBxK','rvnu','AMH0Cfu','wwTWCxm','vNzvDM0','yMDNExi','mtuYAMLfyKXh','qLzRDM0','r25KAKO','zxjYB3i','keLeoIa','t1H6wKS','Be1Syvy','zKzRrNO','sLrQCMG','ioAjP+IHJoE7K+AENcaOsuq6','zMLSDgvY','zeTxqu4','ieXmtsdORR7NVA7POBxPNAi','otu5mtu3tvfXrKv0','uNLMCxe','qvrjt05Fr0vuxW','wNj1z2O','zKroBeq','rvfTAfe','Ce9bCg8','B2jQzwn0','Bwf0y2G','AxnbCNjHEq','C3qTy2HHDhu4oG','A2LxAMq','svPUCg8','icHjrdOG','B3jPz2LUywW','vvjtEw4','qwjVCNrfCNjVCG','sMjxrgO','seHvAwm','Bhniwxi','qvrjt05FuKvtua','zw5LCG','C2TPCa','ELfRCMq','vuvtva','y29et1G','Aw5KzxHpzG','wKHfq0W','C3rYAw5N','vfb2vMO','BMHwEeG','ChDgyMi','rhLXyxG','vMn4DNC','DM15Du8','DhjHBNnSyxrPBW','whnbtNa','57+76k+r5AsX6lsLoIa','rgrYDey','Bg9N','q3DZr3O','whrjr3O','mZaZodK5DMH5y2Tc','ufjptvbux1jfuW','zxDxzLm','C3rYAw5NAwz5','6i635y+w57+76k+r5O+q56s66k+n6lAf5PE2','zgLZCgXHEvrLEa','r2D6EgS','CMfUzg9Tvvvjra','r2nSEwm','z0fZsgK','uM13EuK','yxbWBhK','57+76k+rieXmtsdMIAFOOyZOTOu','rNnhqxO','q2LbALi','DhjPBq','CgfYC2u','zvDAAxm','DKrZAeq','BMfqAvq','AKrJCfC','C2XPy2u','Dg9mB3DLCKnHCW','BM93','BvrACxy','CMvWBgfJzq','ChvZAa','yLfdv3y','BwfW','sM5MBwe','t05trq','mtyYnZaXB2fOAgHJ','qNPlCuC','BfjrtMO','CuXRzNq','uur0EMO','B2vIzwq','yNvev1G','q3voyLy','mtK2mtKXnu5YwK5Sua','y29UC3rYDwn0BW','B0XZsxK','BwvZC2fNzq','quHYzeO','C29Tzq','57+76k+r5AsX6lsLoG','DMvss2K','qxzltgW','qwnsvKm','uKnRwLG','q3PgAKG','ExH6Bva','qvPTzK8','C2TPChbLza','EwnLzLa','vNf5tMK','yvfHuxy','tNbXEhK','kcGOlISPkYKRkq','mtiYmZa4ng5hCMv0Dq','uhLpD24','Dwf4Dgq','qu5ss0W','vhrnDvK','t1bPuxK','C2vHCMnO','EvLfB1C','EMfKBNO','ufjptvbux1jfuq','uMjrzgS','CMvTB3zLtgLZDa','ChjVBxb0','r2fHEMO','swrjzeq','y1fhu24','rxnNCNO','mJy2ndG4A3r4u1z0','tNrxEMW','svretwW','t2PxBMe','AgDTqxG','ioIVT+AXGUIoT+wpLUE/U+IVKEApKoEKUUIVJq','wxDAvxy','AM9PBG','BwrUCvC','DfDfvMq','CMvZDwX0','C2nHzLG','vfndDNG','A29gvve','svblB04','ioE/U+IVKEApKoEKUUIVJEAGH+ETVUwKSEI0Pq'];_0x7068=function(){return _0xe1e0d4;};return _0x7068();}export function tagsToJsonString(_0x168a42){function _0x22ea14(_0x22c86a,_0x139666,_0x48ee91,_0x2c953d){return _0x1c72(_0x22c86a- -0x354,_0x2c953d);}if(!Array[_0x61b913(-0x5,0x3f,0x56,0x7)](_0x168a42))return'[]';function _0x61b913(_0x528f8d,_0x520804,_0x519031,_0x34d942){return _0x1c72(_0x34d942- -0x1a4,_0x528f8d);}return JSON[_0x22ea14(-0x185,-0x1ca,-0x1a4,-0x179)](_0x168a42[_0x22ea14(-0x1b5,-0x18d,-0x1a9,-0x208)](_0x4d1bfe=>_0x4d1bfe&&typeof _0x4d1bfe===_0x61b913(0x74,0x70,0x6b,0x1a)));}export function preprocessPromptForTranslation(_0x3f7dc2){const _0x4c7cd9={'rFAjA':function(_0x4f2ee3,_0x4956ab){return _0x4f2ee3!==_0x4956ab;},'QDtzj':_0x2021d1(-0x16,-0x22,-0x92,-0x44),'bXhNO':function(_0x11d123,_0x50825c){return _0x11d123<_0x50825c;},'OjWna':function(_0x372096,_0x3c24d0){return _0x372096===_0x3c24d0;},'cBRZM':function(_0x1f33e6,_0x3b0f17){return _0x1f33e6===_0x3b0f17;},'FsGAz':function(_0x339b82,_0x12ab5b){return _0x339b82===_0x12ab5b;},'bQcsd':'zJCFX','tNnop':'ebAUw','gFmKg':'wFuNT','ltWHx':function(_0x475109){return _0x475109();},'qKtCg':function(_0x2c61ca,_0xd6dcc2){return _0x2c61ca(_0xd6dcc2);},'BVkvm':function(_0x600d68,_0x5cf68e){return _0x600d68!==_0x5cf68e;},'uBeVV':function(_0x1deb23,_0x3e781b){return _0x1deb23===_0x3e781b;},'aQaQv':'gHmDB','WNhpv':function(_0x3ffa8d,_0x392c24){return _0x3ffa8d(_0x392c24);},'fFfbX':_0x2021d1(-0x45,-0xc6,-0x2d,-0x7f),'Vauhy':function(_0x3a04f7,_0x5d4c00){return _0x3a04f7===_0x5d4c00;},'cQGSn':'gvqwh','YwZUv':function(_0x4c7ca7,_0x17cce){return _0x4c7ca7(_0x17cce);}};if(!_0x3f7dc2||_0x4c7cd9[_0x2021d1(-0xc,0x67,0x4a,0x37)](typeof _0x3f7dc2,_0x2021d1(-0x70,-0x2f,-0x4d,-0x66)))return _0x4c7cd9['uBeVV']('gHmDB',_0x4c7cd9[_0x1e5f29(0x4e7,0x4b0,0x48f,0x4c5)])?{'originalTags':[],'cleanedTags':[],'cleanedText':'','tagMap':new Map()}:_0x43e304['toString']()[_0x1e5f29(0x444,0x48f,0x498,0x495)](_0x2021d1(0x28,-0x25,-0x79,-0x1e)+'+$')[_0x1e5f29(0x4f1,0x4f1,0x4b3,0x464)]()[_0x2021d1(-0x6e,-0xf,-0x44,-0x30)+'r'](_0x4bba7a)[_0x1e5f29(0x4cd,0x46f,0x498,0x4e3)](_0x2021d1(0x10,0x3f,-0x76,-0x1e)+'+$');const _0x13642b=_0x1dd7ed=>{function _0x43c716(_0x38afac,_0x1bf3bf,_0x8aeb85,_0x865bf0){return _0x1e5f29(_0x38afac-0x36,_0x1bf3bf-0x6d,_0x8aeb85- -0x267,_0x865bf0);}function _0x29292d(_0x285ffd,_0x469e00,_0x31a735,_0x1d19a9){return _0x2021d1(_0x285ffd-0xf2,_0x469e00-0x2a,_0x285ffd,_0x31a735-0x4c7);}if(_0x4c7cd9['rFAjA'](_0x43c716(0x1b7,0x1d6,0x1ea,0x1e0),_0x4c7cd9[_0x43c716(0x248,0x20a,0x213,0x1ba)])){const _0x1d395a=[];let _0x109d1f='',_0x9c054a=![];for(let _0x4583c5=0x86*0x34+0x91*-0x3b+0x633;_0x4c7cd9['bXhNO'](_0x4583c5,_0x1dd7ed['length']);_0x4583c5++){const _0x32c7c0=_0x1dd7ed[_0x4583c5];if(_0x4c7cd9[_0x43c716(0x269,0x1de,0x23f,0x27d)](_0x32c7c0,'$'))_0x9c054a=!_0x9c054a,_0x109d1f+=_0x32c7c0;else{if((_0x4c7cd9[_0x29292d(0x4fc,0x484,0x4cc,0x4e4)](_0x32c7c0,',')||_0x4c7cd9['OjWna'](_0x32c7c0,'，'))&&!_0x9c054a){if(_0x4c7cd9[_0x43c716(0x1f3,0x212,0x1fd,0x1fb)](_0x4c7cd9[_0x29292d(0x492,0x4e6,0x4ce,0x51a)],_0x4c7cd9[_0x43c716(0x200,0x22c,0x24f,0x1f7)])){const _0x7d0398=_0x109d1f[_0x43c716(0x22b,0x234,0x1ff,0x240)]();if(_0x7d0398)_0x1d395a[_0x43c716(0x1e7,0x26c,0x20a,0x1aa)](_0x7d0398);_0x109d1f='';}else{const _0x219880={};return _0x219880[_0x29292d(0x484,0x43b,0x453,0x3f3)]=_0x11589b,_0x219880['translatio'+'n']='',_0x219880[_0x29292d(0x4a1,0x4a4,0x4f3,0x530)]=_0x2165df,_0x219880['skipped']=!![],_0x219880;}}else{if(_0x4c7cd9[_0x29292d(0x4cd,0x51f,0x4cc,0x4a1)](_0x4c7cd9[_0x43c716(0x281,0x26b,0x260,0x239)],_0x4c7cd9['gFmKg']))for(const [_0xa381ad,_0x202bec]of _0x4d21b7['entries'](_0x1dc25a)){_0x233cb7[_0xa381ad[_0x29292d(0x43b,0x46c,0x485,0x451)+'e']()]=_0x202bec;}else _0x109d1f+=_0x32c7c0;}}}if(_0x109d1f[_0x29292d(0x424,0x4d1,0x47e,0x4da)]())_0x1d395a[_0x29292d(0x4cb,0x4dc,0x489,0x4b7)](_0x109d1f[_0x29292d(0x4bd,0x434,0x47e,0x4db)]());return _0x1d395a;}else return{'originalTags':[],'cleanedTags':[],'cleanedText':'','tagMap':new _0x321165()};};function _0x2021d1(_0x141a9b,_0x404e92,_0x1f0a26,_0x203edf){return _0x1c72(_0x203edf- -0x224,_0x1f0a26);}const _0x4fcf2f=_0x4c7cd9['WNhpv'](_0x13642b,_0x3f7dc2),_0x1ff4db=[],_0x384d8c=[],_0x4d5e8f=new Map();function _0x1e5f29(_0x396ff7,_0x34bc18,_0x2983d3,_0x692307){return _0x1c72(_0x2983d3-0x28b,_0x692307);}for(const _0x4b0a33 of _0x4fcf2f){if(_0x4c7cd9[_0x2021d1(-0x23,-0x21,-0x2a,0x37)](_0x4c7cd9[_0x1e5f29(0x471,0x4ff,0x4c5,0x4bd)],_0x4c7cd9[_0x2021d1(0x2d,0x69,0x39,0x16)]))_0x4c7cd9['ltWHx'](_0x596945),_0x4c7cd9['qKtCg'](_0x2f54fd,new _0xd520e5('翻译\x20LLM\x20执行超'+'时（'+_0x1819ae+'ms）'));else{const _0x2e75ac=_0x4b0a33[_0x1e5f29(0x480,0x471,0x435,0x462)](SD_SYMBOL_PATTERN);if(_0x2e75ac){const _0x3a7320=_0x2e75ac[-0x5a4+-0xbc*0xb+0xdb9*0x1]||'',_0x330106=(_0x2e75ac[-0x3ce*-0x2+0x1c76+-0x2410]||'')[_0x1e5f29(0x465,0x4ab,0x466,0x42c)](),_0x57fca0=_0x2e75ac[-0x2054+0x1*-0x13de+0x3435]||'',_0x29259e=_0x2e75ac[-0x1edb+-0xa2+0x1f81]||'',_0x460602={'original':_0x4b0a33,'cleaned':_0x330106,'prefix':_0x3a7320,'suffix':_0x57fca0,'weight':_0x29259e,'skip':shouldSkipTranslation(_0x4b0a33)||_0x4c7cd9['WNhpv'](shouldSkipTranslation,_0x330106)};_0x1ff4db[_0x1e5f29(0x435,0x492,0x471,0x447)](_0x460602),!_0x460602[_0x2021d1(-0xc0,-0xba,-0x93,-0x6c)]&&_0x330106&&(_0x384d8c[_0x1e5f29(0x499,0x4b8,0x471,0x439)](_0x330106),_0x4d5e8f['set'](_0x330106[_0x1e5f29(0x46b,0x411,0x46d,0x497)+'e'](),_0x460602));}else{const _0x363d63={'original':_0x4b0a33,'cleaned':_0x4b0a33,'prefix':'','suffix':'','weight':'','skip':shouldSkipTranslation(_0x4b0a33)};_0x1ff4db[_0x2021d1(-0x2d,-0x66,0x1a,-0x3e)](_0x363d63);if(!_0x363d63[_0x1e5f29(0x411,0x3f7,0x443,0x435)]&&_0x4b0a33){if(_0x4c7cd9['Vauhy'](_0x4c7cd9[_0x2021d1(-0x69,-0x32,-0x2c,-0xe)],_0x4c7cd9[_0x1e5f29(0x4c4,0x504,0x4a1,0x45a)]))_0x384d8c[_0x1e5f29(0x449,0x4a0,0x471,0x411)](_0x4b0a33),_0x4d5e8f[_0x2021d1(0x83,0x85,-0x2,0x24)](_0x4b0a33[_0x1e5f29(0x494,0x46e,0x46d,0x40e)+'e'](),_0x363d63);else{const _0x55ec08=_0x5171b9[_0x1e5f29(0x4bd,0x489,0x466,0x46e)]();if(_0x55ec08)_0x3ce334[_0x2021d1(-0x6b,-0x92,0x5,-0x3e)](_0x55ec08);_0x111424='';}}}}}return{'originalTags':_0x1ff4db,'cleanedTags':_0x384d8c,'cleanedText':_0x4c7cd9[_0x2021d1(-0x24,-0x54,0x4d,-0x6)](tagsToJsonString,_0x384d8c),'tagMap':_0x4d5e8f};}export function combineTranslationResult(_0x3ffdb6,_0x513960){const _0x2a4ea3={'zadnz':function(_0x23361c,_0x3ea552){return _0x23361c!==_0x3ea552;},'RbQdk':function(_0x114e5d,_0x2068fd){return _0x114e5d(_0x2068fd);},'NtWzl':function(_0x2c9183,_0x2e419f){return _0x2c9183(_0x2e419f);},'HHUic':function(_0x20eef2){return _0x20eef2();},'eyHrI':function(_0x58b4bd,_0x4c0c69,_0xce2443){return _0x58b4bd(_0x4c0c69,_0xce2443);},'MKfgu':_0x2e64d3(0x2ed,0x2a1,0x2b8,0x2e4),'vmyuO':'mubSQ','ymztT':_0x2e64d3(0x27f,0x212,0x241,0x242),'PRdjD':'yfbxU','lsHYr':_0x4b2817(0x43d,0x496,0x4ec,0x4ed)};if(!_0x3ffdb6||!Array[_0x4b2817(0x47c,0x4a6,0x489,0x4e5)](_0x3ffdb6))return[];const _0x28efc1={};function _0x2e64d3(_0x5e65d0,_0x2f617e,_0x1a8b0e,_0x23cc22){return _0x1c72(_0x23cc22-0x99,_0x5e65d0);}if(_0x513960&&typeof _0x513960===_0x2a4ea3[_0x2e64d3(0x330,0x2cf,0x2ee,0x2dc)])for(const [_0x3051dd,_0x754e1f]of Object['entries'](_0x513960)){if(_0x2a4ea3['PRdjD']!==_0x2a4ea3[_0x2e64d3(0x285,0x24b,0x234,0x24e)])_0x28efc1[_0x3051dd[_0x2e64d3(0x254,0x2c1,0x22d,0x27b)+'e']()]=_0x754e1f;else{const _0x4bc734=_0x2a4ea3[_0x4b2817(0x4cc,0x4af,0x491,0x484)](_0xa97007);_0x5d870f[_0x4b2817(0x4b9,0x4c4,0x4f7,0x501)](_0x4b2817(0x4b0,0x4a7,0x490,0x45b)+'\x20请求获取翻译提示词'+_0x2e64d3(0x205,0x27c,0x28a,0x248)+_0x4bc734+')');const _0x13d71e=_0x2df03f=>{if(_0x2a4ea3[_0x2c2b31(-0x1ac,-0x171,-0x125,-0x130)](_0x2df03f['id'],_0x4bc734))return;_0x2e8dc1[_0x2f1e74(0x394,0x3e3,0x37a,0x366)+'ener'](_0x5197d7['LLM_TRANSL'+'ATION_GET_'+_0x2f1e74(0x34f,0x32b,0x339,0x2fb)+'PONSE'],_0x13d71e);function _0x2f1e74(_0x4ba2f0,_0x41e8ac,_0x2cc026,_0x2ed301){return _0x2e64d3(_0x41e8ac,_0x41e8ac-0x1d0,_0x2cc026-0x40,_0x4ba2f0-0xe9);}const {prompt:_0x546379}=_0x2df03f;_0xcd9281[_0x2c2b31(-0x207,-0x1b7,-0x1ab,-0x179)]('st-chatu8:'+_0x2c2b31(-0x137,-0x13e,-0x142,-0x10a)+_0x2c2b31(-0xc8,-0x122,-0x10b,-0x151)+_0x4bc734+'):',_0x546379);function _0x2c2b31(_0x100ac2,_0x26b049,_0x15bbc2,_0x5d6019){return _0x2e64d3(_0x100ac2,_0x26b049-0x82,_0x15bbc2-0x18e,_0x26b049- -0x419);}_0x2a4ea3[_0x2f1e74(0x393,0x344,0x34c,0x39b)](_0x631289,_0x546379);};_0x27773['on'](_0x683cbf[_0x4b2817(0x550,0x547,0x580,0x4f5)+'ATION_GET_'+_0x2e64d3(0x2a1,0x257,0x277,0x266)+_0x2e64d3(0x28c,0x334,0x293,0x2ec)],_0x13d71e);const _0x51872e={};_0x51872e['id']=_0x4bc734,_0x5f4d71['emit'](_0x4c83a8[_0x2e64d3(0x29e,0x2a0,0x32b,0x2e5)+'ATION_GET_'+_0x2e64d3(0x2d1,0x2e2,0x25c,0x2a9)+_0x2e64d3(0x23f,0x23b,0x25c,0x253)],_0x51872e),_0x2a4ea3['eyHrI'](_0x22770b,()=>{_0x27acfa['removeList'+'ener'](_0x251651['LLM_TRANSL'+_0x33eb4e(-0xfa,-0x61,-0x75,-0xb1)+_0x579544(0x433,0x49f,0x4ba,0x480)+_0x579544(0x533,0x4f5,0x506,0x506)],_0x13d71e);function _0x579544(_0x140fe5,_0x58c241,_0x3b56aa,_0x15b61b){return _0x4b2817(_0x140fe5-0xce,_0x15b61b- -0x48,_0x140fe5,_0x15b61b-0x1a5);}function _0x33eb4e(_0x2c03df,_0x3a0b97,_0x31ae47,_0x45329a){return _0x2e64d3(_0x2c03df,_0x3a0b97-0x24,_0x31ae47-0xe5,_0x45329a- -0x2ee);}_0x2a4ea3[_0x579544(0x50c,0x476,0x473,0x4cc)](_0x2b0aee,new _0xb6a651(_0x33eb4e(-0x98,-0x5c,-0x8a,-0x85)));},-0x1*-0x45aa+0x79e*0x1+-0x2638);}}function _0x4b2817(_0x10670f,_0x8afee0,_0x971aaf,_0x5053f4){return _0x1c72(_0x8afee0-0x2fb,_0x971aaf);}return _0x3ffdb6[_0x2e64d3(0x24b,0x27c,0x2a6,0x281)](_0x5f3871=>{function _0xbb42c7(_0x2b8650,_0x28cac1,_0xe739d5,_0x124a59){return _0x4b2817(_0x2b8650-0x15f,_0xe739d5- -0x3ac,_0x2b8650,_0x124a59-0x106);}function _0x3fa328(_0x5c5f82,_0x2f11e1,_0x4b5623,_0x12f366){return _0x4b2817(_0x5c5f82-0x100,_0x5c5f82- -0x16c,_0x4b5623,_0x12f366-0x84);}if(_0x2a4ea3[_0xbb42c7(0x171,0x1a5,0x182,0x121)]===_0x2a4ea3[_0x3fa328(0x353,0x3a5,0x320,0x3ad)])_0x477abe[_0x3fa328(0x375,0x349,0x3d5,0x3b2)](_0x102b36),_0x7e6aed[_0x3fa328(0x3d7,0x399,0x3df,0x3b1)](_0xe1eb48[_0x3fa328(0x371,0x34c,0x32a,0x352)+'e'](),_0x11ddcd);else{const {original:_0x306c93,cleaned:_0x7b784,skip:_0x3b274f}=_0x5f3871;if(_0x3b274f){const _0x33829a={};return _0x33829a[_0xbb42c7(0x136,0x9e,0xff,0x146)]=_0x306c93,_0x33829a['translatio'+'n']='',_0x33829a[_0xbb42c7(0x1fa,0x1d8,0x19f,0x193)]=_0x7b784,_0x33829a[_0xbb42c7(0x19e,0x171,0x150,0x191)]=!![],_0x33829a;}const _0x18421f=_0x28efc1[_0x7b784[_0xbb42c7(0x14c,0xdc,0x131,0x132)+'e']()]||'',_0x4cef2e={};return _0x4cef2e[_0x3fa328(0x33f,0x345,0x328,0x2f2)]=_0x306c93,_0x4cef2e[_0x3fa328(0x354,0x2f4,0x32a,0x398)+'n']=_0x18421f,_0x4cef2e[_0x3fa328(0x3df,0x3e5,0x3f8,0x3c5)]=_0x7b784,_0x4cef2e[_0x3fa328(0x390,0x3f2,0x3a0,0x35a)]=![],_0x4cef2e;}});}export function formatTranslationDisplay(_0x430b9c,_0x57b0e8={}){function _0x49fc07(_0x57a915,_0x3f5d8b,_0x44dd9f,_0x41226b){return _0x1c72(_0x41226b- -0x235,_0x57a915);}const _0x2f9e1d={'Gclyc':_0x2cea65(-0x184,-0x1b5,-0x13f,-0x160),'VqyNi':function(_0x10b88b,_0x209517){return _0x10b88b(_0x209517);},'IiJis':_0x2cea65(-0x112,-0x10a,-0x112,-0x152),'Rgykc':'BrQBZ','euNUv':function(_0x17b2d0,_0x326347){return _0x17b2d0!==_0x326347;}},{separator:separator=',\x20',showOriginal:showOriginal=!![],showTranslation:showTranslation=!![]}=_0x57b0e8;function _0x2cea65(_0x457021,_0x1ae556,_0x4a9d82,_0x2d472a){return _0x1c72(_0x457021- -0x336,_0x1ae556);}if(!_0x430b9c||!Array['isArray'](_0x430b9c))return _0x2f9e1d['euNUv']('dGHtk','dGHtk')?_0x26b5bc?_0x3d8013[_0x49fc07(-0x8c,-0xbe,-0x67,-0x85)]:'':'';return _0x430b9c[_0x2cea65(-0x14e,-0x195,-0x12b,-0x161)](_0x23040e=>{function _0x10d7bb(_0x144d36,_0x30a428,_0x3d98a3,_0x4c47fe){return _0x2cea65(_0x30a428-0x5bb,_0x4c47fe,_0x3d98a3-0x16d,_0x4c47fe-0x1aa);}const _0x1acd2a={'BzKqG':_0x2f9e1d[_0x10d7bb(0x427,0x459,0x44e,0x464)],'xRVNY':function(_0x3aa60f,_0x49a0b9){function _0x3404c3(_0x264d7f,_0x6593,_0x1e88ba,_0x5c6ccc){return _0x10d7bb(_0x264d7f-0x98,_0x264d7f- -0x267,_0x1e88ba-0x1dd,_0x6593);}return _0x2f9e1d[_0x3404c3(0x221,0x25b,0x276,0x1e9)](_0x3aa60f,_0x49a0b9);}};function _0x8343b(_0x197b6f,_0x7e1c4c,_0x23e172,_0x1e360a){return _0x49fc07(_0x197b6f,_0x7e1c4c-0x1b3,_0x23e172-0x8e,_0x7e1c4c-0x3fc);}if(_0x2f9e1d['IiJis']!==_0x2f9e1d['Rgykc']){if(_0x23040e[_0x8343b(0x3b0,0x3c8,0x429,0x3f3)])return showOriginal?_0x23040e[_0x8343b(0x35d,0x377,0x379,0x3ce)]:'';const _0x4f22ca=[];if(showOriginal)_0x4f22ca[_0x10d7bb(0x4a9,0x46b,0x4a7,0x46e)](_0x23040e[_0x8343b(0x3b7,0x377,0x3cc,0x3d5)]);return showTranslation&&_0x23040e[_0x10d7bb(0x4a2,0x44a,0x409,0x487)+'n']&&_0x4f22ca[_0x10d7bb(0x475,0x46b,0x477,0x467)]('('+_0x23040e[_0x8343b(0x3ec,0x38c,0x3d2,0x342)+'n']+')'),_0x4f22ca[_0x10d7bb(0x505,0x4a4,0x4ad,0x4da)]('\x20');}else{const _0x566c73=new _0x2f524d(_0x4c0c28[_0x10d7bb(0x4a3,0x4e2,0x49e,0x500)][_0x8343b(0x3a9,0x3bd,0x3e3,0x382)]);_0x566c73['name']=_0x1acd2a[_0x8343b(0x36c,0x3b3,0x36e,0x3e0)],_0x1acd2a[_0x8343b(0x443,0x414,0x44c,0x464)](_0x423828,_0x566c73);}})['filter'](Boolean)[_0x2cea65(-0x117,-0x132,-0x156,-0xc2)](separator);}export async function translatePromptTags(_0x5d6e){function _0x403733(_0x181d6c,_0x5f113d,_0x4bd252,_0x12b99b){return _0x1c72(_0x5f113d- -0x270,_0x181d6c);}const _0x440704={'kiWjd':function(_0x1ffbfc,_0x1910a3){return _0x1ffbfc!==_0x1910a3;},'Ykpqs':_0x403733(-0x91,-0x38,0x19,-0x7d),'JbWDj':function(_0x31c1c1,_0x41f10b){return _0x31c1c1(_0x41f10b);},'oebed':function(_0x2d4a11,_0x45770c,_0x30d97a){return _0x2d4a11(_0x45770c,_0x30d97a);},'TPvVj':function(_0x4aa5db,_0x3d2dc4){return _0x4aa5db(_0x3d2dc4);}},{originalTags:_0x5c82f3,cleanedText:_0x3fdde4}=preprocessPromptForTranslation(_0x5d6e);function _0x190902(_0x3e7c9e,_0x2b1783,_0x5eab2f,_0x51cd3a){return _0x1c72(_0x5eab2f- -0x389,_0x3e7c9e);}if(!_0x3fdde4){const _0x289e1a={};return _0x289e1a[_0x403733(-0x12,-0x29,-0xd,0x19)]=[],_0x289e1a['displayTex'+'t']='',_0x289e1a[_0x403733(-0x4b,-0x40,-0x31,-0x6c)+'gs']=[],_0x289e1a;}try{if(_0x440704[_0x403733(-0x9b,-0xc3,-0x9a,-0xdc)](_0x440704['Ykpqs'],_0x440704[_0x403733(-0x3e,-0x19,0xa,-0x1a)])){if(_0xde7ca2){const _0x2972d3=_0x36d056[_0x190902(-0x207,-0x1d8,-0x1b2,-0x1d0)](_0x3be870,arguments);return _0x38d65a=null,_0x2972d3;}}else{const _0x412a72=await callTranslation(_0x3fdde4),_0x368bd4=_0x440704[_0x190902(-0x216,-0x1ef,-0x1d6,-0x1a2)](parseTranslationResult,_0x412a72),_0x538d74=_0x440704[_0x403733(-0xac,-0x80,-0x31,-0xac)](combineTranslationResult,_0x5c82f3,_0x368bd4),_0x11540c=_0x440704[_0x403733(-0x82,-0xb1,-0xb4,-0x78)](formatTranslationDisplay,_0x538d74),_0x4a7f5b={};return _0x4a7f5b[_0x190902(-0x111,-0x18d,-0x142,-0x19d)]=_0x538d74,_0x4a7f5b[_0x190902(-0x1d4,-0x219,-0x1b8,-0x1d5)+'t']=_0x11540c,_0x4a7f5b['originalTa'+'gs']=_0x5c82f3,_0x4a7f5b;}}catch(_0x16d7fd){console[_0x403733(0x20,-0x13,-0x45,0x4d)](_0x190902(-0x1c7,-0x1c5,-0x1dd,-0x1ff)+_0x403733(0x3,-0x49,-0x2b,-0x47)+':',_0x16d7fd);throw _0x16d7fd;}}export function parseTranslationResult(_0x12d854){const _0x1c09dc={'CPENf':function(_0x4b8203,_0xd07eec){return _0x4b8203===_0xd07eec;},'PyOwn':_0x18731f(0x1d2,0x1d8,0x22e,0x1f8),'FmlUr':function(_0x3faf70,_0x381101){return _0x3faf70!==_0x381101;},'naPiT':function(_0x5c98bd,_0x540107){return _0x5c98bd!==_0x540107;},'CiAjR':'kbxTK','AHrdJ':function(_0x5ceffb,_0x4233a2){return _0x5ceffb===_0x4233a2;},'ahUTI':_0x18731f(0x2ed,0x2f9,0x2a8,0x2b2),'tySbp':_0x18731f(0x246,0x2c9,0x29f,0x2d4),'Gaazj':_0x18731f(0x289,0x27b,0x231,0x249)+_0x18731f(0x300,0x2b5,0x2bb,0x308)+_0x18731f(0x30d,0x2a2,0x2c2,0x2ca),'jhtpU':function(_0xc2e425,_0x543fa9){return _0xc2e425(_0x543fa9);},'EQmhQ':function(_0x1c524f,_0x1f071f){return _0x1c524f>_0x1f071f;}};if(!_0x12d854)return{};function _0x4fbd0d(_0x14c5d8,_0x368e8f,_0x10fbc7,_0x2cceef){return _0x1c72(_0x2cceef- -0x2eb,_0x14c5d8);}try{const _0x1a5ac7=_0x12d854[_0x18731f(0x1fc,0x23f,0x22f,0x25a)](/\{[\s\S]*\}/);if(_0x1a5ac7){const _0xf4b29=JSON[_0x4fbd0d(-0x11d,-0x116,-0xc7,-0x10f)](_0x1a5ac7[-0x90b*-0x1+-0x7a1*0x3+0xdd8]);if(_0x1c09dc['CPENf'](typeof _0xf4b29,_0x1c09dc[_0x4fbd0d(-0x12b,-0x87,-0x12f,-0xe3)])&&_0x1c09dc[_0x18731f(0x262,0x217,0x264,0x28a)](_0xf4b29,null)){if(_0x1c09dc['FmlUr'](_0x1c09dc[_0x18731f(0x2c1,0x28e,0x25f,0x22f)],_0x1c09dc[_0x4fbd0d(-0xb7,-0xe2,-0x145,-0x111)])){const _0x13169b={};return _0x13169b[_0x4fbd0d(-0x51,-0xba,-0xc9,-0xa4)]=[],_0x13169b[_0x4fbd0d(-0x114,-0x172,-0x164,-0x11a)+'t']='',_0x13169b[_0x18731f(0x27c,0x294,0x2b5,0x2fa)+'gs']=[],_0x13169b;}else return _0xf4b29;}}}catch(_0x5365b7){if(_0x1c09dc[_0x4fbd0d(-0xf8,-0xd4,-0x125,-0xf4)](_0x1c09dc[_0x18731f(0x2f1,0x325,0x2cf,0x32f)],_0x1c09dc[_0x4fbd0d(-0x99,-0x66,-0x8b,-0xc1)])){const _0x22196c=_0x17df31['match'](/\{[\s\S]*\}/);if(_0x22196c){const _0x1a3a01=_0x5576cd[_0x18731f(0x24a,0x25a,0x261,0x258)](_0x22196c[-0x1530+0x269f+-0x116f]);if(_0x1c09dc['CPENf'](typeof _0x1a3a01,_0x1c09dc[_0x4fbd0d(-0x120,-0xd8,-0x80,-0xe3)])&&_0x1c09dc['FmlUr'](_0x1a3a01,null))return _0x1a3a01;}}else console['warn'](_0x1c09dc[_0x18731f(0x26d,0x28f,0x299,0x25b)],_0x5365b7[_0x18731f(0x250,0x2b3,0x27b,0x286)]);}const _0x38cf05=_0x1c09dc[_0x4fbd0d(-0xa9,-0x35,-0xdf,-0x95)](String,_0x12d854)[_0x4fbd0d(-0x100,-0xd1,-0x108,-0x106)](/[\r\n]+/g,'\x20')['replace'](/^[\s"'`]+|[\s"'`]+$/g,'')[_0x18731f(0x220,0x228,0x260,0x232)](),_0x14ce8f=_0x38cf05['split'](/[,，]/)[_0x18731f(0x22f,0x296,0x26d,0x29d)](_0x525aba=>_0x525aba[_0x4fbd0d(-0x111,-0xae,-0x110,-0x110)]())[_0x18731f(0x27d,0x253,0x224,0x242)](Boolean),_0x15c871={};function _0x18731f(_0x3a28c9,_0x352150,_0x136d09,_0x1b4292){return _0x1c72(_0x136d09-0x85,_0x352150);}for(const _0x269911 of _0x14ce8f){const _0x1bb54f=_0x269911[_0x4fbd0d(-0xdb,-0x17f,-0x176,-0x12f)]('\x5c');if(_0x1c09dc[_0x18731f(0x25c,0x24e,0x22c,0x24a)](_0x1bb54f,-0x7a+0x243e+-0x23c4)){const _0x531fd3=_0x269911[_0x18731f(0x29e,0x263,0x266,0x278)](0x35*0x23+0x2110+0x11*-0x25f,_0x1bb54f)[_0x18731f(0x275,0x2b9,0x260,0x20c)](),_0x459aa4=_0x269911[_0x18731f(0x27f,0x2c0,0x266,0x209)](_0x1bb54f+(-0x2072+-0x49*-0x49+0xba2*0x1))[_0x18731f(0x25f,0x217,0x260,0x22f)]();if(_0x531fd3)_0x15c871[_0x531fd3]=_0x459aa4;}}return _0x15c871;}function generateRequestId(){function _0x470b4(_0x1a4901,_0x514a0f,_0xc23c9,_0x21f5f6){return _0x1c72(_0xc23c9-0x3c0,_0x1a4901);}const _0x30bf31={};_0x30bf31[_0x470b4(0x5f6,0x631,0x5e6,0x62d)]=function(_0x2bff8e,_0x4ce9a7){return _0x2bff8e+_0x4ce9a7;};function _0x11350b(_0x152255,_0x330e9e,_0xa826b,_0x2c43f8){return _0x1c72(_0x152255- -0x28,_0x2c43f8);}const _0x51ae4d=_0x30bf31;if(crypto&&crypto[_0x470b4(0x540,0x5a6,0x593,0x5b0)])return crypto[_0x11350b(0x1ab,0x1fb,0x152,0x1ec)]();return _0x51ae4d[_0x470b4(0x597,0x5e8,0x5e6,0x5e0)](Date['now']()[_0x470b4(0x61f,0x60b,0x5e8,0x646)](0x4b*0x69+-0x4a9*0x1+-0x19f6),Math[_0x470b4(0x5c7,0x5f1,0x5f1,0x5fa)]()[_0x470b4(0x5dc,0x5ba,0x5e8,0x5a6)](-0x26f5*0x1+-0x47*-0x25+0x1cd6)['substring'](0x1fc6+-0x1*0x269b+-0x11*-0x67));}export function LLM_TRANSLATION_GET_PROMPT(){const _0x272f4e={'ANRKL':function(_0x4e89e4,_0x2bbe78){return _0x4e89e4(_0x2bbe78);},'IZnpo':_0x1f1bb0(-0x128,-0x130,-0x115,-0x109),'fDNlD':function(_0x3c501c,_0xbc4dab){return _0x3c501c!==_0xbc4dab;},'bVDkm':function(_0x2b8922,_0x4576d2,_0x27d1b5){return _0x2b8922(_0x4576d2,_0x27d1b5);},'uaxtd':_0x4c95d9(0x527,0x53c,0x51d,0x52b),'HgQBk':_0x4c95d9(0x54e,0x53e,0x542,0x540),'hgmAx':'mOjze','gAsHi':_0x1f1bb0(-0x13f,-0xe7,-0xb4,-0xde),'ycefP':function(_0x4462aa){return _0x4462aa();},'FXaLR':function(_0x460540,_0x42920f,_0x12235a){return _0x460540(_0x42920f,_0x12235a);}};function _0x4c95d9(_0x2966df,_0x3986fe,_0x15bbb9,_0x2c9eb3){return _0x1c72(_0x2c9eb3-0x383,_0x15bbb9);}function _0x1f1bb0(_0x55342a,_0x48f0fd,_0x25dea6,_0x25afe1){return _0x1c72(_0x25afe1- -0x2d9,_0x25dea6);}return new Promise((_0x4ebf3d,_0x5e0db6)=>{function _0x245cc7(_0x4e1644,_0x486c85,_0x3554e1,_0x385bec){return _0x1f1bb0(_0x4e1644-0x1ea,_0x486c85-0x168,_0x486c85,_0x3554e1-0x121);}const _0x17a239={};function _0x34653e(_0x1f0814,_0x53f1a2,_0x29c86a,_0xe4d4d6){return _0x1f1bb0(_0x1f0814-0x102,_0x53f1a2-0x28,_0xe4d4d6,_0x1f0814-0x3b6);}_0x17a239[_0x34653e(0x2cb,0x2ee,0x28d,0x307)]=_0x272f4e[_0x34653e(0x28b,0x2e9,0x268,0x24c)],_0x17a239[_0x245cc7(-0x29,-0x35,0x1e,0x2b)]=function(_0x2157e8,_0x37308b){return _0x2157e8!==_0x37308b;},_0x17a239[_0x245cc7(0x38,0x3e,0xa,0x4c)]=_0x272f4e[_0x34653e(0x2e6,0x2c5,0x2cc,0x2ba)],_0x17a239[_0x245cc7(-0x3c,0x2b,0x25,-0x23)]=_0x272f4e[_0x245cc7(0x4b,0x78,0x75,0x30)];const _0x33736e=_0x17a239;if(_0x272f4e[_0x34653e(0x283,0x2c2,0x2ab,0x292)](_0x272f4e[_0x34653e(0x2f9,0x326,0x29e,0x2cb)],_0x272f4e[_0x34653e(0x2b2,0x2ce,0x2cc,0x251)])){const _0x10a74a=_0x272f4e[_0x34653e(0x2df,0x2be,0x32e,0x2cc)](generateRequestId);console[_0x34653e(0x2a6,0x29d,0x2e0,0x2cd)](_0x34653e(0x289,0x251,0x2a4,0x28e)+_0x245cc7(0x6e,0x87,0x65,0xc0)+_0x245cc7(-0x3a,0x49,-0x9,-0x62)+_0x10a74a+')');const _0x33a7a3=_0x59bba4=>{const _0x483a31={'TFYYK':function(_0x33745e,_0x492dff){return _0x33745e(_0x492dff);},'IdIdD':_0x33736e[_0x4f517a(0x589,0x50b,0x53e,0x56a)]};function _0x4b12f1(_0x2c3b39,_0x23d4e6,_0xcd4cbd,_0x17f893){return _0x245cc7(_0x2c3b39-0xeb,_0x23d4e6,_0xcd4cbd-0x2b9,_0x17f893-0x1ad);}function _0x4f517a(_0x257522,_0x45b856,_0x1fcbb1,_0x183a83){return _0x245cc7(_0x257522-0x18d,_0x45b856,_0x183a83-0x534,_0x183a83-0x18d);}if(_0x33736e['RmwyI'](_0x33736e[_0x4f517a(0x5a1,0x532,0x51f,0x53e)],_0x33736e[_0x4b12f1(0x2b5,0x299,0x2de,0x27c)])){if(_0x33736e[_0x4f517a(0x573,0x4f3,0x516,0x552)](_0x59bba4['id'],_0x10a74a))return;eventSource[_0x4f517a(0x583,0x547,0x5d4,0x58e)+_0x4f517a(0x552,0x576,0x4ed,0x533)](eventNames[_0x4b12f1(0x338,0x36a,0x34d,0x35f)+_0x4b12f1(0x2b6,0x2bb,0x2a5,0x296)+'PROMPT_RES'+_0x4f517a(0x5b7,0x592,0x56d,0x5cf)],_0x33a7a3);const {prompt:_0x409c6c}=_0x59bba4;console[_0x4b12f1(0x308,0x26a,0x2ca,0x2d6)](_0x4f517a(0x4e0,0x4eb,0x4eb,0x528)+'\x20已获取翻译提示词\x20'+_0x4f517a(0x5de,0x5eb,0x607,0x5da)+_0x10a74a+'):',_0x409c6c),_0x4ebf3d(_0x409c6c);}else _0x9c9dd8['removeList'+_0x4f517a(0x508,0x503,0x57c,0x533)](_0x41652d[_0x4f517a(0x58c,0x617,0x603,0x5c8)+_0x4b12f1(0x2e4,0x288,0x2a5,0x264)+_0x4f517a(0x58f,0x543,0x54e,0x549)+_0x4b12f1(0x37e,0x39f,0x354,0x2ff)],_0x8a4a92),_0x483a31['TFYYK'](_0xfad62a,new _0x53075c(_0x483a31[_0x4f517a(0x561,0x532,0x56d,0x591)]));};eventSource['on'](eventNames[_0x34653e(0x329,0x2f4,0x324,0x2ee)+_0x245cc7(-0x75,0x42,-0x14,-0x14)+_0x245cc7(0x2e,0x5c,0x15,0x1b)+_0x245cc7(0xad,0x61,0x9b,0xe0)],_0x33a7a3);const _0xa68bde={};_0xa68bde['id']=_0x10a74a,eventSource[_0x34653e(0x32c,0x37a,0x386,0x2ea)](eventNames[_0x34653e(0x329,0x315,0x34d,0x2e5)+_0x245cc7(-0x6,0x4d,-0x14,-0x61)+'PROMPT_REQ'+'UEST'],_0xa68bde),_0x272f4e[_0x245cc7(0xc9,0xdc,0x8c,0x65)](setTimeout,()=>{function _0x3d7d1c(_0x3e3a74,_0x16d6ae,_0x38a8e2,_0x5136ad){return _0x34653e(_0x16d6ae- -0x373,_0x16d6ae-0x110,_0x38a8e2-0xd8,_0x3e3a74);}eventSource[_0x11c84e(0x20e,0x226,0x1c7,0x204)+'ener'](eventNames[_0x11c84e(0x29a,0x258,0x240,0x23e)+'ATION_GET_'+'PROMPT_RES'+'PONSE'],_0x33a7a3);function _0x11c84e(_0x5a3914,_0x5e6880,_0x55f297,_0xcfe098){return _0x245cc7(_0x5a3914-0x8e,_0x55f297,_0xcfe098-0x1aa,_0xcfe098-0x1c3);}_0x272f4e[_0x11c84e(0x1b3,0x20a,0x19d,0x1fc)](_0x5e0db6,new Error('获取翻译提示词超时'));},0xfbc+-0x1*-0x2b2e+-0x13da);}else{const _0x5c4457={'JTjrh':function(_0x27d631,_0x5c6090){return _0x27d631(_0x5c6090);},'luBsL':_0x272f4e['IZnpo'],'yYEoW':function(_0x182ae2,_0x235ed2){return _0x272f4e['fDNlD'](_0x182ae2,_0x235ed2);},'dKWAN':function(_0x377898,_0x549757,_0x4c4a73){return _0x272f4e['bVDkm'](_0x377898,_0x549757,_0x4c4a73);}};return new _0x5cfc1b((_0x15f1dd,_0x53d10e)=>{const _0x48fff7={'siRTw':function(_0x1d171a,_0x5ac20d){function _0x5b6a9f(_0x4ec934,_0x3329fa,_0x2eb3f2,_0x2ad912){return _0x1c72(_0x2eb3f2-0x129,_0x3329fa);}return _0x5c4457[_0x5b6a9f(0x361,0x384,0x337,0x350)](_0x1d171a,_0x5ac20d);}},_0x16eabe=_0xa1773e();_0xfb5a5e[_0x431171(0x46,0x2f,0x6d,0x2f)](_0x431171(0x29,0x4f,0x20,0x1a)+'\x20请求获取翻译提示词'+_0x431171(0x2c,0x6f,0x37,0x29)+_0x16eabe+')');const _0xd5abd0=_0x1026e3=>{if(_0x48fff7[_0x1cc4c0(0x4e6,0x4ec,0x55d,0x52f)](_0x1026e3['id'],_0x16eabe))return;_0x513c9c['removeList'+_0x2ac042(0x1f4,0x182,0x1c9,0x1cb)](_0x2fac63['LLM_TRANSL'+_0x2ac042(0x166,0x182,0x1bb,0x1b8)+_0x1cc4c0(0x4c0,0x49a,0x4f7,0x4b3)+_0x1cc4c0(0x545,0x4e0,0x532,0x539)],_0xd5abd0);const {prompt:_0x2aa85b}=_0x1026e3;function _0x1cc4c0(_0x50491d,_0x15f4de,_0xce9737,_0xf9cc7d){return _0x559455(_0x50491d,_0xf9cc7d-0xcc,_0xce9737-0x180,_0xf9cc7d-0x9);}function _0x2ac042(_0x4514dc,_0xef73f2,_0x3ea96b,_0x19c9f9){return _0x559455(_0x4514dc,_0x19c9f9- -0x206,_0x3ea96b-0xb4,_0x19c9f9-0x3b);}_0xe29d5e['log']('st-chatu8:'+_0x1cc4c0(0x549,0x4f5,0x501,0x528)+'(ID:\x20'+_0x16eabe+'):',_0x2aa85b),_0x15f1dd(_0x2aa85b);};_0x394efe['on'](_0x5ab91a['LLM_TRANSL'+_0x431171(0x21,0x14,0x52,0x0)+_0x431171(0x4a,0x94,0xad,0x3d)+_0x559455(0x444,0x46d,0x42b,0x4b8)],_0xd5abd0);const _0x41cf65={};function _0x431171(_0x510c88,_0x426945,_0x5b7e92,_0xeee1e2){return _0x34653e(_0x510c88- -0x260,_0x426945-0x130,_0x5b7e92-0x83,_0x5b7e92);}_0x41cf65['id']=_0x16eabe;function _0x559455(_0x3cc018,_0x1fba20,_0x3a031,_0x16b747){return _0x245cc7(_0x3cc018-0x1d3,_0x3cc018,_0x1fba20-0x3d2,_0x16b747-0x169);}_0x4b0663[_0x431171(0xcc,0x98,0xb1,0xd4)](_0x42d869[_0x559455(0x41d,0x466,0x45f,0x44a)+'ATION_GET_'+_0x559455(0x3f2,0x42a,0x3cd,0x3fd)+_0x431171(0x37,0x60,0x87,0x1)],_0x41cf65),_0x5c4457[_0x559455(0x364,0x3ba,0x385,0x3e2)](_0x114fa7,()=>{_0x21a27b['removeList'+'ener'](_0x19ee94[_0x58b396(0xf,0x2a,0x21,0x53)+_0x58b396(-0xc2,-0x7e,-0x49,-0xab)+'PROMPT_RES'+_0x58b396(0x24,0x31,0x6a,-0x22)],_0xd5abd0);function _0x494f73(_0x31684f,_0x348a42,_0x4618e4,_0x25040d){return _0x559455(_0x25040d,_0x4618e4- -0x578,_0x4618e4-0x42,_0x25040d-0x7d);}function _0x58b396(_0x4de2c9,_0x36d7a9,_0x2fac8d,_0x176077){return _0x559455(_0x2fac8d,_0x36d7a9- -0x43c,_0x2fac8d-0x97,_0x176077-0x92);}_0x5c4457[_0x58b396(-0x4f,-0x85,-0x33,-0xa4)](_0x53d10e,new _0x38d33d(_0x5c4457[_0x494f73(-0x157,-0x153,-0x132,-0x11e)]));},-0x1*-0x1b55+0x427*-0x3+0x8*0x306);});}});}export function LLM_TRANSLATION(_0xb528bf,{timeoutMs:timeoutMs=-0x14afb*0x1+0x4950+0x1ec0b}={}){const _0x1659f2={'YLJye':function(_0x120c84,_0x2be1ee){return _0x120c84(_0x2be1ee);},'ggrPv':function(_0x4d4f0f,_0xa1607b){return _0x4d4f0f===_0xa1607b;},'CzFjH':'bydON','bggyr':function(_0x4387ff,_0x1ab8eb){return _0x4387ff(_0x1ab8eb);},'GbCCa':'st-chatu8:'+'\x20AI\x20设置已统一到'+_0x279811(-0x63,-0xe2,-0xc4,-0xb0),'Npqxy':function(_0x22be93,_0x4ee7b7){return _0x22be93===_0x4ee7b7;},'AcRVC':_0x279811(-0xf7,-0xbd,-0xc9,-0x86),'aUSmy':function(_0x33a671,_0x5a70ce){return _0x33a671>_0x5a70ce;},'GndjJ':function(_0x3cd502,_0x3a0782){return _0x3cd502+_0x3a0782;},'OYYUm':_0x279811(-0x3b,0x25,-0x2c,-0x2f),'SmhoQ':'FDcxK','Jnfma':function(_0x2cd8ed,_0x5abdd1){return _0x2cd8ed(_0x5abdd1);},'mdnqW':function(_0x45d805,_0x3f6a12){return _0x45d805!==_0x3f6a12;},'DdrtF':_0x3fde67(-0xaf,-0xf5,-0xa1,-0x124),'bvWXw':function(_0x2f7ed4,_0xe38790){return _0x2f7ed4(_0xe38790);},'xddcq':function(_0x5c8671){return _0x5c8671();},'VRwEX':function(_0x5c685b,_0x3d1d8f,_0x43c000){return _0x5c685b(_0x3d1d8f,_0x43c000);}};function _0x3fde67(_0x5434d5,_0x3271a9,_0x108468,_0x1ecab2){return _0x1c72(_0x3271a9- -0x2dc,_0x5434d5);}function _0x279811(_0x1a9930,_0x4c4b19,_0x55fb7d,_0x47cd75){return _0x1c72(_0x55fb7d- -0x265,_0x4c4b19);}return new Promise((_0x88d942,_0x21dff0)=>{const _0x288d7e={'VvUvm':_0x1659f2['GbCCa'],'AucCe':function(_0x30cf21,_0x2a3117){function _0x4cf47c(_0x3e1c0a,_0x52c886,_0x3e831f,_0x4af0b4){return _0x1c72(_0x3e1c0a-0x2d4,_0x4af0b4);}return _0x1659f2[_0x4cf47c(0x4d9,0x51f,0x487,0x51f)](_0x30cf21,_0x2a3117);},'OXzZK':_0x1659f2[_0x138842(0x149,0x1aa,0x1c1,0x16d)],'RCkZX':_0x138842(0x1ff,0x1b9,0x16c,0x18c),'CwsGz':function(_0x403775,_0xd47996){function _0x379fed(_0x411008,_0x43823a,_0x2d6900,_0x1c5c92){return _0x138842(_0x411008-0x2a,_0x43823a- -0x1bf,_0x1c5c92,_0x1c5c92-0x170);}return _0x1659f2[_0x379fed(0x68,0x2a,-0x35,0x47)](_0x403775,_0xd47996);},'nhVxH':function(_0x5cae05,_0x47f105){function _0x4b43ea(_0x25c3bb,_0x415208,_0x4bf261,_0x3c5f27){return _0x19438f(_0x3c5f27,_0x415208-0xaf,_0x4bf261-0x45,_0x415208-0x225);}return _0x1659f2[_0x4b43ea(0x1b9,0x183,0x13d,0x1d0)](_0x5cae05,_0x47f105);},'buDWX':function(_0x39dcb3,_0x473873){function _0x384691(_0xcc1f5c,_0x8379f4,_0x58f24a,_0x5df690){return _0x19438f(_0xcc1f5c,_0x8379f4-0x186,_0x58f24a-0x60,_0x5df690- -0x14);}return _0x1659f2[_0x384691(-0x4b,-0x4c,-0xce,-0xae)](_0x39dcb3,_0x473873);},'Apisv':function(_0x531025,_0x3ba72e){return _0x531025!==_0x3ba72e;},'tWEVd':_0x1659f2[_0x19438f(-0x41,-0x9d,-0x105,-0xa4)],'pwFbb':_0x1659f2['SmhoQ'],'oLsIy':function(_0x46d7d9,_0x5f04d2){function _0x42aafd(_0x5e70a2,_0x1be50c,_0x32c271,_0x48fcb9){return _0x19438f(_0x32c271,_0x1be50c-0x73,_0x32c271-0x169,_0x1be50c-0x1e4);}return _0x1659f2[_0x42aafd(0x10e,0xd7,0x93,0x112)](_0x46d7d9,_0x5f04d2);},'URSyn':function(_0x33122d,_0x43edf8){function _0x2f2a2c(_0x4f1a6c,_0x5c41e1,_0x397472,_0x58d5f0){return _0x138842(_0x4f1a6c-0xd4,_0x397472- -0x44,_0x5c41e1,_0x58d5f0-0xda);}return _0x1659f2[_0x2f2a2c(0x12f,0x173,0x18a,0x18b)](_0x33122d,_0x43edf8);},'yxzmP':_0x1659f2[_0x19438f(-0x167,-0x188,-0xf9,-0x12e)],'OPiQy':function(_0x45fc17,_0x330778){function _0x3eedec(_0x2dfc46,_0x16b848,_0x11b9ee,_0x2e5d68){return _0x138842(_0x2dfc46-0x149,_0x2e5d68- -0xba,_0x16b848,_0x2e5d68-0x87);}return _0x1659f2[_0x3eedec(0x109,0x17e,0xfa,0x139)](_0x45fc17,_0x330778);}};function _0x19438f(_0x445f74,_0x50a64a,_0x5c6929,_0x232703){return _0x279811(_0x445f74-0xc3,_0x445f74,_0x232703- -0x91,_0x232703-0x137);}const _0x2a1a22=_0x1659f2[_0x138842(0x1be,0x1dd,0x1c6,0x215)](generateRequestId);console[_0x138842(0x185,0x177,0x144,0x1c8)]('st-chatu8:'+'\x20请求翻译\x20LLM\x20'+'(ID:\x20'+_0x2a1a22+')');let _0x5a9c04=null;const _0x109bca=()=>{function _0x1ed2be(_0x3a4e0d,_0x34603f,_0x385290,_0x285d1a){return _0x138842(_0x3a4e0d-0x1c4,_0x3a4e0d- -0x377,_0x385290,_0x285d1a-0x1cd);}function _0x4d59e8(_0x29b812,_0x3f1f13,_0x1e0544,_0x2df71b){return _0x138842(_0x29b812-0xf,_0x3f1f13- -0x264,_0x29b812,_0x2df71b-0x10f);}if(_0x288d7e[_0x4d59e8(-0x71,-0x70,-0x3c,-0xa1)](_0x288d7e[_0x4d59e8(-0x126,-0x11c,-0xd2,-0x11b)],_0x288d7e[_0x1ed2be(-0x1cc,-0x229,-0x169,-0x193)]))!_0x231ba4&&(_0x592688[_0x1ed2be(-0x200,-0x210,-0x1a8,-0x242)](_0x288d7e[_0x1ed2be(-0x171,-0x127,-0x173,-0x122)]),_0x1f0831=!![]);else{eventSource[_0x1ed2be(-0x1b7,-0x210,-0x156,-0x17a)+_0x4d59e8(-0x104,-0xff,-0x117,-0x137)](eventNames[_0x4d59e8(-0x98,-0x6a,-0x76,-0xa4)+_0x1ed2be(-0x213,-0x219,-0x253,-0x25e)+_0x1ed2be(-0x1df,-0x1f5,-0x17d,-0x1ab)],_0x31d31d);if(_0x5a9c04)_0x288d7e[_0x1ed2be(-0x1ff,-0x1b2,-0x1eb,-0x227)](clearTimeout,_0x5a9c04);}},_0x31d31d=_0x71727c=>{if(_0x71727c['id']!==_0x2a1a22)return;_0x109bca();function _0x10978d(_0x2eac71,_0x223b64,_0xd81740,_0x4c5552){return _0x19438f(_0x4c5552,_0x223b64-0xca,_0xd81740-0x1ed,_0x2eac71- -0x2);}console[_0x10978d(-0x12f,-0x16f,-0x191,-0xf1)](_0x253e55(0x31f,0x2f3,0x326,0x304)+_0x253e55(0x3b8,0x398,0x39b,0x3ad)+_0x10978d(-0x15a,-0x19f,-0x141,-0x104)+'\x20'+_0x2a1a22+'):',_0x71727c);function _0x253e55(_0x1ff5fd,_0x37e53a,_0x4d4949,_0x1d088e){return _0x138842(_0x1ff5fd-0x177,_0x37e53a-0x199,_0x1ff5fd,_0x1d088e-0xcc);}if(_0x71727c['success']){if(_0x288d7e[_0x10978d(-0xca,-0x107,-0x105,-0xd5)](_0x288d7e[_0x10978d(-0xd7,-0x125,-0x81,-0x8b)],_0x288d7e[_0x253e55(0x339,0x308,0x2f2,0x32e)]))_0x88d942(_0x71727c[_0x253e55(0x341,0x369,0x368,0x3ca)]);else{if(_0x3fb095&&_0x32fb41[_0x253e55(0x2e6,0x31a,0x371,0x329)])return _0x591831['randomUUID']();return _0xe2600d[_0x10978d(-0x115,-0x150,-0x171,-0x14b)]()['toString'](-0x154e+-0x2455+0x39c7)+_0x488585[_0x253e55(0x382,0x378,0x318,0x340)]()[_0x253e55(0x330,0x36f,0x34b,0x31d)](0x5*0x6e1+0x1fc+-0x243d)['substring'](-0x3d1+-0x3a1*0x2+0xb15);}}else{if(_0x71727c['error']&&_0x71727c[_0x10978d(-0x9b,-0xd2,-0xba,-0xbd)][_0x10978d(-0xaa,-0xe1,-0x106,-0xe1)]===_0x253e55(0x2fe,0x2f9,0x338,0x344)){const _0x2a828c=new Error(_0x71727c[_0x253e55(0x398,0x3a4,0x352,0x376)][_0x253e55(0x381,0x33d,0x2e9,0x2f1)]);_0x2a828c[_0x253e55(0x3f5,0x395,0x354,0x35d)]=_0x10978d(-0x146,-0x17f,-0x10c,-0x100),_0x288d7e[_0x10978d(-0x103,-0xf1,-0xaa,-0xed)](_0x21dff0,_0x2a828c);}else{if(_0x288d7e[_0x10978d(-0x147,-0x19a,-0xf0,-0x12b)](_0x288d7e['yxzmP'],_0x288d7e[_0x253e55(0x373,0x346,0x2fb,0x305)])){const _0x6e4425=_0xb16ee5['indexOf']('\x5c');if(_0x288d7e[_0x253e55(0x2b9,0x307,0x2eb,0x34a)](_0x6e4425,0x584+-0x17ee+-0x2*-0x935)){const _0x1cd277=_0x6406c4[_0x253e55(0x2cc,0x328,0x35a,0x35e)](0xb3e+0x1*0x1437+-0x1f75*0x1,_0x6e4425)[_0x10978d(-0x11d,-0xbf,-0xfd,-0x13e)](),_0x4c3fd1=_0x525623['slice'](_0x288d7e[_0x253e55(0x35f,0x338,0x2f1,0x2fd)](_0x6e4425,0x880+0x923+-0x11a2))[_0x10978d(-0x11d,-0x152,-0xee,-0xde)]();if(_0x1cd277)_0x4af577[_0x1cd277]=_0x4c3fd1;}}else _0x288d7e[_0x10978d(-0xec,-0xd0,-0x13b,-0x9c)](_0x21dff0,new Error(_0x71727c['result']));}}};eventSource['on'](eventNames['LLM_TRANSL'+_0x138842(0x17c,0x164,0x158,0x198)+_0x19438f(-0x162,-0x103,-0x163,-0x10c)],_0x31d31d);function _0x138842(_0x510d16,_0x2f96f1,_0x51d6ba,_0xcd7075){return _0x3fde67(_0x51d6ba,_0x2f96f1-0x28a,_0x51d6ba-0x160,_0xcd7075-0x92);}const _0x15a7f5={};_0x15a7f5[_0x19438f(-0x13b,-0xb0,-0x138,-0xe3)]=_0xb528bf,_0x15a7f5['id']=_0x2a1a22,eventSource['emit'](eventNames[_0x138842(0x1b1,0x1fa,0x256,0x19b)+_0x138842(0x241,0x1e2,0x1a9,0x1c9)+_0x19438f(-0xcd,-0xd4,-0xf7,-0xa1)],_0x15a7f5),_0x5a9c04=_0x1659f2[_0x19438f(-0xa0,-0x6f,-0x10a,-0xc4)](setTimeout,()=>{function _0x41e626(_0x3f88ff,_0x4e2d75,_0x5597e4,_0x300e83){return _0x138842(_0x3f88ff-0x19,_0x5597e4- -0x66,_0x3f88ff,_0x300e83-0x79);}const _0x2243b8={'ZIrgM':function(_0x3edba3,_0x33e44a){return _0x1659f2['YLJye'](_0x3edba3,_0x33e44a);}};function _0x1279af(_0x51a38d,_0x3bf1b6,_0x369f7f,_0x5d3225){return _0x138842(_0x51a38d-0x71,_0x3bf1b6-0x197,_0x369f7f,_0x5d3225-0x1c1);}_0x1659f2['ggrPv'](_0x1659f2[_0x1279af(0x2ee,0x343,0x314,0x32f)],'bydON')?(_0x109bca(),_0x1659f2[_0x41e626(0x17d,0x156,0x1a1,0x1c2)](_0x21dff0,new Error(_0x1279af(0x2f8,0x31d,0x2ed,0x2c2)+'时（'+timeoutMs+'ms）'))):_0x2243b8[_0x1279af(0x3d1,0x384,0x365,0x32c)](_0x1a3aa7,new _0x212040(_0x4375df[_0x1279af(0x322,0x367,0x320,0x33f)]));},timeoutMs);});}export async function callTranslation(_0x14af4d){function _0x3873d4(_0x3fb7c0,_0x29f9f1,_0x3d482,_0x5b395a){return _0x1c72(_0x3d482- -0x1fb,_0x29f9f1);}const _0x2a4f77={'CuNbV':function(_0x424033,_0x1981a3){return _0x424033===_0x1981a3;},'Vcxvw':_0x3873d4(0x5c,0x46,-0x1,0x2b),'AZmfO':function(_0x56cb2a,_0x40527e,_0x1af5b8){return _0x56cb2a(_0x40527e,_0x1af5b8);},'WTagY':function(_0x42735c,_0x50eba1){return _0x42735c||_0x50eba1;},'lRQNj':function(_0x3f0fea,_0x2fca06){return _0x3f0fea||_0x2fca06;},'MUAGu':function(_0x302fe0,_0x3a5805){return _0x302fe0(_0x3a5805);}};function _0x4dfca3(_0x39bf06,_0x5a5e83,_0x23d03e,_0x5a0b27){return _0x1c72(_0x5a0b27-0x219,_0x39bf06);}try{if(_0x2a4f77[_0x3873d4(-0x1d,-0x67,-0x9,0x3a)](_0x2a4f77[_0x4dfca3(0x3f0,0x390,0x38f,0x3dc)],_0x2a4f77['Vcxvw'])){let _0x419875=_0x2a4f77[_0x3873d4(0x58,-0x25,0x5,0x1a)](buildPromptForRequestType,'translatio'+'n',_0x2a4f77['WTagY'](_0x14af4d,''));_0x419875=mergeAdjacentMessages(_0x419875);const _0x36417d=[..._0x419875,{'role':'user','content':_0x2a4f77[_0x3873d4(-0x2b,0x11,-0xe,-0x6a)](_0x14af4d,'')}];_0x2a4f77['MUAGu'](updateCombinedPrompt,_0x36417d);const _0x47271f=await LLM_TRANSLATION(_0x36417d);return _0x47271f;}else return _0x47f744;}catch(_0x5cd4b7){addLog(_0x4dfca3(0x420,0x407,0x431,0x3e0)+_0x5cd4b7[_0x3873d4(0x49,-0xa,-0x5,-0x58)]),console[_0x4dfca3(0x416,0x487,0x43b,0x476)](_0x4dfca3(0x3b0,0x475,0x441,0x412),_0x5cd4b7);throw _0x5cd4b7;}}let isAiInitialized=![];export function initAiSettings(_0x2ec530){const _0x72a1b6={};_0x72a1b6[_0x46cfb2(0x20f,0x1f1,0x1c7,0x205)]=function(_0xff83fb,_0x34a08b){return _0xff83fb!==_0x34a08b;};const _0x33da4f=_0x72a1b6;function _0x46cfb2(_0x2e6f91,_0x54ce0b,_0xeb444c,_0x1e50bb){return _0x1c72(_0xeb444c- -0x77,_0x1e50bb);}function _0x139c42(_0x211bbd,_0xf36c33,_0x40b069,_0x111347){return _0x1c72(_0x211bbd- -0x12a,_0xf36c33);}if(!isAiInitialized){if(_0x33da4f[_0x139c42(0x114,0x115,0x10b,0x176)](_0x46cfb2(0x1a5,0x113,0x15b,0x1b7),'ygOty'))console[_0x46cfb2(0x159,0x17c,0x152,0x118)](_0x139c42(0x82,0x70,0x95,0xd9)+'\x20AI\x20设置已统一到'+'\x20LLM\x20设置页面'),isAiInitialized=!![];else{const {original:_0x2a7343,cleaned:_0x268c23,skip:_0x431129}=_0x353a69;if(_0x431129){const _0xb81cbc={};return _0xb81cbc[_0x46cfb2(0x115,0x183,0x139,0x168)]=_0x2a7343,_0xb81cbc[_0x139c42(0x9b,0x97,0xdf,0x4e)+'n']='',_0xb81cbc[_0x139c42(0x126,0xee,0xd0,0x102)]=_0x268c23,_0xb81cbc['skipped']=!![],_0xb81cbc;}const _0x45527a=_0xf4c0b7[_0x268c23[_0x46cfb2(0x1a7,0x19b,0x16b,0x154)+'e']()]||'',_0x30302f={};return _0x30302f[_0x139c42(0x86,0x45,0xb8,0x95)]=_0x2a7343,_0x30302f['translatio'+'n']=_0x45527a,_0x30302f[_0x46cfb2(0x1af,0x1e5,0x1d9,0x1bf)]=_0x268c23,_0x30302f[_0x139c42(0xd7,0xf9,0xe3,0x110)]=![],_0x30302f;}}}