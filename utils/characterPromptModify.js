(function(_0x7ca932,_0x693e75){function _0x2786ac(_0x5ac2d2,_0x5eaac8,_0x155563,_0x52295e){return _0x123e(_0x155563- -0x398,_0x5eaac8);}const _0x124f1a=_0x7ca932();function _0x1ffbeb(_0x5a1802,_0x834efe,_0x5560c4,_0x4c59f3){return _0x123e(_0x5560c4- -0x171,_0x834efe);}while(!![]){try{const _0x5af569=-parseInt(_0x2786ac(-0x192,-0x47,-0xc1,-0xaf))/(0x12ca+0x7c0*0x2+-0x2249)*(parseInt(_0x2786ac(-0x287,-0xf7,-0x1b5,-0x1ab))/(0x1eec+0x20e*-0xd+-0x4*0x10d))+-parseInt(_0x1ffbeb(0x133,0x18e,0x15a,0xc5))/(0x2131+0xa2+-0x21d0)*(-parseInt(_0x1ffbeb(0x8c,0x20,0xd0,0x10c))/(0x188f*0x1+0xf2b*0x1+-0x27b6))+parseInt(_0x1ffbeb(0xfb,0x26a,0x175,0x253))/(-0x499+0x1*-0x2047+0x24e5)*(-parseInt(_0x2786ac(-0x2f4,-0x2de,-0x228,-0x309))/(0x5fc*-0x4+0x18a9+-0xb3))+parseInt(_0x2786ac(-0x1e0,-0x1e2,-0x12b,-0x1f2))/(0x24e2+-0x2*0x7ab+-0x1585)*(parseInt(_0x2786ac(-0x2a1,-0x2ca,-0x1f8,-0x116))/(0x457*-0x3+0x1d6d+-0x1060))+-parseInt(_0x1ffbeb(0x119,0xf2,0x143,0x15f))/(0x158*0xf+-0x2*-0x526+-0x1*0x1e6b)*(-parseInt(_0x2786ac(-0xad,-0x73,-0xdf,-0xea))/(0x16fa+0x1*0x1e4f+-0x353f))+parseInt(_0x2786ac(-0x49,-0x5a,-0x10a,-0x19))/(0x1*-0x1101+0xaf9*0x1+0x613)*(parseInt(_0x1ffbeb(0x1e9,0xc7,0x136,0x118))/(0xe0c+-0x2a*0x43+-0xb*0x46))+-parseInt(_0x1ffbeb(-0x7,-0xc7,0x1a,0x52))/(-0x2c*0xb+-0x5ef+-0xfc*-0x8);if(_0x5af569===_0x693e75)break;else _0x124f1a['push'](_0x124f1a['shift']());}catch(_0x48ddbb){_0x124f1a['push'](_0x124f1a['shift']());}}}(_0x3202,-0x586d*-0x1+0x118fa8+-0x527fe));const _0x56ab97=(function(){function _0x17d41f(_0x57f5e1,_0x547876,_0x509511,_0x28df42){return _0x123e(_0x28df42-0x68,_0x547876);}function _0x58b5c5(_0x3d7344,_0x1f16a1,_0x53eba0,_0x3651e0){return _0x123e(_0x3651e0-0x125,_0x1f16a1);}const _0x45a9fc={'ovbmb':function(_0x2a8038,_0x4941b8){return _0x2a8038(_0x4941b8);},'Pogws':_0x58b5c5(0x517,0x537,0x40c,0x442),'qeapl':function(_0x203f6a,_0x1cec1e){return _0x203f6a!==_0x1cec1e;},'mYyME':_0x58b5c5(0x1c8,0x1e3,0x212,0x29e),'wsskz':_0x17d41f(0x3b5,0x43a,0x403,0x36e),'hwsUY':_0x58b5c5(0x3fb,0x421,0x317,0x3a6),'JxTUw':_0x58b5c5(0x1d0,0x219,0x32d,0x25f)};let _0x2837ec=!![];return function(_0x406c6a,_0xfddba6){function _0xb60807(_0x1a69ab,_0x2402da,_0x16e548,_0x19f633){return _0x17d41f(_0x1a69ab-0xac,_0x16e548,_0x16e548-0x16,_0x1a69ab- -0xc8);}function _0x10b638(_0x5b2515,_0x4424c4,_0x3bf086,_0x86feeb){return _0x17d41f(_0x5b2515-0xab,_0x86feeb,_0x3bf086-0x134,_0x3bf086-0x2ac);}const _0x2d0f57={'fcpFa':function(_0x5b1b1c,_0xbd7337){function _0x5bce6c(_0x6c159,_0x54c71b,_0x508aa6,_0x1c342a){return _0x123e(_0x6c159- -0x3c1,_0x1c342a);}return _0x45a9fc[_0x5bce6c(-0xae,-0xee,0x47,-0x1a)](_0x5b1b1c,_0xbd7337);},'DaTlr':_0x45a9fc[_0x10b638(0x5ed,0x523,0x5d6,0x503)],'pEjVb':function(_0xeb6259,_0x61c77a){function _0x408308(_0x18c52e,_0x113020,_0x34771e,_0x190a11){return _0x10b638(_0x18c52e-0xfc,_0x113020-0x37,_0x190a11- -0x4b4,_0x18c52e);}return _0x45a9fc[_0x408308(0xb2,0x108,0x1a0,0x16f)](_0xeb6259,_0x61c77a);},'fLiya':_0x45a9fc[_0x10b638(0x4af,0x668,0x59c,0x590)],'VxCNs':_0x45a9fc[_0x10b638(0x617,0x4d6,0x5c7,0x5a1)]};if(_0x45a9fc[_0x10b638(0x545,0x3ea,0x4e2,0x4a4)]!==_0x45a9fc[_0xb60807(0x11a,0x5f,0xa7,0x1e1)]){const _0x10086e=_0x2837ec?function(){function _0x13eed8(_0x1ce75d,_0x1987e4,_0x5590b7,_0x4a03f8){return _0xb60807(_0x5590b7-0xe8,_0x1987e4-0xdd,_0x1987e4,_0x4a03f8-0x1ad);}function _0x1ce06b(_0x5497e0,_0x35f174,_0xa01a73,_0xedc2a){return _0x10b638(_0x5497e0-0x75,_0x35f174-0xe1,_0x5497e0- -0x50d,_0xedc2a);}if(_0xfddba6){if(_0x2d0f57[_0x13eed8(0x366,0x3e3,0x3ae,0x3a1)](_0x2d0f57[_0x13eed8(0x1e5,0x211,0x290,0x24b)],_0x2d0f57[_0x13eed8(0x31d,0x3fa,0x374,0x2c9)])){const _0x5208e8=_0xfddba6['apply'](_0x406c6a,arguments);return _0xfddba6=null,_0x5208e8;}else _0x30b460[_0x13eed8(0x456,0x3b2,0x362,0x2b2)]=_0x5a4fad[_0xb199b8],_0x2d0f57[_0x13eed8(0x2c7,0x252,0x32a,0x2bd)](_0x172489,_0x530c3c)[_0x1ce06b(0xbf,-0x12,0x25,0x10b)](_0x2d0f57[_0x13eed8(0x350,0x3a3,0x2e0,0x2fe)]);}}:function(){};return _0x2837ec=![],_0x10086e;}else return _0x56afa2['randomUUID']();};}()),_0x2e834f=_0x56ab97(this,function(){function _0x3964d6(_0x239a54,_0x1ec378,_0x237422,_0x3a712f){return _0x123e(_0x1ec378-0xec,_0x3a712f);}const _0x34ecb2={};_0x34ecb2[_0xe4ef0(0x33c,0x2da,0x293,0x34a)]='(((.+)+)+)'+'+$';function _0xe4ef0(_0x1f9c38,_0x1d7ae9,_0x5dcb6b,_0x478d13){return _0x123e(_0x1f9c38-0xef,_0x1d7ae9);}const _0x20e797=_0x34ecb2;return _0x2e834f[_0xe4ef0(0x25d,0x1ad,0x1ea,0x236)]()[_0x3964d6(0x1d5,0x241,0x2a2,0x281)](_0x20e797[_0x3964d6(0x291,0x339,0x380,0x32f)])['toString']()['constructo'+'r'](_0x2e834f)[_0xe4ef0(0x244,0x2e0,0x2e5,0x1ed)](_0xe4ef0(0x3d2,0x436,0x4ad,0x354)+'+$');});_0x2e834f();import{eventSource}from'../../../../../script.js';import{eventNames,extensionName}from'./config.js';import{extension_settings}from'../../../../extensions.js';import{getContext}from'../../../../st-context.js';function _0x3202(){const _0xc06088=['Ew5Tv2m','zM1kEKW','yu1mDKe','zvD4EKK','vxvWsMe','nhL3rwrxrW','CNfqC0i','C3rYAw5N','A2TbvKC','Cg9ZAxrPB24','ANHiu0u','zgf0ytO','y29UDgv4DdO','z2v0rwXLBwvUDa','qNjSu1u','5lQu5A6y5Asw6lkmoIa','igLUzgv4','tKLZs3K','v0jHy2S','BMC6','sfv4rw8','z3nyC3i','AxnbCNjHEq','yu5xvxy','Bwf0y2HLze91Da','C2Dvrhy','uuPfsM0','zNLDienOyxjHyW','rgfuBhi','BLfAExK','A01OELK','ChvZAa','DM1nwvK','Ehz6Eum','l3bUzZTIyxnLnG','suvmqNm','Aw5KzxHpzG','AxH6v3m','sKL4Cui','5Qoa5Rwl5yIW6kEs6iMY5OIw5PYn6kof5Qch562+','t05trq','zNLDifvZzxiGCG','uvDetMq','zMfpAwm','EgDoB2K','A010D0q','uu5OA0G','zM9Ivhu','ALnmA00','mti5ndiZme5HvwTHrq','6kEs6iMY54M55B6boIa','AKffvLa','Bur1AxO','DxjLC0jHy2S','yvP1s1C','uhHYzKy','DhjdyMO','t0vTCvO','qMjeB0y','A0vptLm','EwDhtfu','yLvzDKy','zNLDifjHDYbmta','5lIk5y2k6lQRu0zxoIa','sLDzrNG','y3vrrhy','CMvXDwvZDcaOsq','zNLDioATO+wCQowKHoEqHUINKUIjSG','C3rRr0q','t3LgtNO','AMDpuu8','yuXNzva','tfvQDLq','5lIk5y2k6lQR6iom6z2I','CMvZzxrjza','sgvIv2K','BvL5tuu','zw1PDa','zxjYB3i','D1jiwLG','BhPqvvy','5lIl5y2k6lQRu0zx','nJe1mdq4nw1Ws2zJtq','rNrwCg4','t29sv3i','B3iGzgvIDwDNAq','5Qoa5Rwl5yIW5PYn6kofici','zNLDievYCM9YoG','CvDMwgG','txrXB1i','s2nYBNK','CgfMC0O','5lIT5PAh5zcn56EW','CeDwvKW','Egniv2K','zNLDiev4zwn1Da','Cvn3Evu','zNLDifnHDMvKia','uhjVBxb0tw9KAq','tNzmAuu','tfv2A0y','ugrXywm','zMnWrMe','EfbjwhO','rLP0t00','BwvZC2fNzsbHDa','AxDrCui','mJrxrKr1vvq','DhLWzq','CMvZDwX0','B3v0zML0','rhPozuq','tK5OEvi','6kEs6iMY5O+q56s66k+n5l+U5Ps55AsX6lsLoG','Ae51BMW','wwrez0W','Aw5NignOyxiGBq','CMfUzg9T','yxrAsKO','D3nZA3O','otqXmZqZm3buDgP1sa','AKruzfC','5lQu5A6y5Asw6lkm6iom6z2I','zxiGChjVBxb0ia','DhjPz2DLCG','mtbhCgXQzK4','5lIl5y2k6lQR6iom6z2I','uwDyv1q','zhnSqMO','vMvAEKi','v3j1seO','tLHmsuO','qNHjtLK','sM1Srw8','ug9ND3m','zML0ihrHz3mGzG','rgfxCwu','vNDTueS','6k6+ici','uwn5rgu','lxrHyI1JAgfYyq','DvjnBeO','BMfTzuvo','nde0mJiXnefkrMLjEG','BgTKueK','ve5wAgq','zgf0yq','Aw5MBW','sfPjC20','Au1HrwK','z3jVsLi','rLPxCe0','y29UDgvUDa','q0rmEKG','DgHQDxi','mte1yLfTy1PR','zNLDiow3SUABToAwSoINKUIjSUMIHa','5lIk5y2k6lQRu0zx','DMfSDwu','5lIl5y2k6lQRu0zx6iom6z2I','yMvPCM0','zgPqrKS','sMT4CgO','sfbswxq','ugXWt3u','5lIl5y2k6lQRtLngvZOG','zvHqAgG','kcGOlISPkYKRkq','C3bSAxq','Ehn6wvO','nu9WyuvizG','cLVKU6xKUiVMMk/NLkJMIlFKUiRKVkdNMOq','A2rMDMy','D3HRrNy','uNzADgq','BfDoCxq','vNHdtNm','zNLDifjLCxvLCW','CuvUqxq','BwLnr20','DwrQq2e','s0DssLC','Eu9iD3e','iIdLT7lLVzlLSz7LIldOP5lOIBiGiG','vezYAeK','Aw1Hz2vFDxjS','BMfTzuno','zNLDioACQUIVHUwiQ+EAHos6UUEjQq','C2fJB2G','zNvSBejVzhLouW','5lIT5PAh5zcn56EWoIa','v2LwBgq','w2nOyxjHy3rLCG','Bxb0icHjrdOG','DufmEwC','5lIk5y2k6lQR','vhDSq1O','EK9My1G','C29YDa','C3vIC3rYAw5N','z2vUzxjHDgLVBG','q0vzBw8','qLbjBfK','vhj0vgS','v29YBgrcB29R','AM9PBG','r2HttuG','A2Plvgy','shjntLm','BwP2EKC','y2HHDe1LDgfKyq','CwvHCgW','y2HHCL8','ANLLsvG','uLLsv3m','B3zIBwi','tw1ftwm','r29Jq2i','rK9tvfK','zNLDioINO+AEKowiSoEAHos6UUEjQq','Dw5RBfi','Aw5KzxG','u0vZAhi','uLHwCMi','5lIk5y2k6lQRtLngv+IdJoMDOJO','Aw5WDxq','tgXtqNy','BwvZC2fNzq','ywnR','ywjbtMS','yu1uwhi','zML0CW','EhPpwee','thHSEvy','CevQvMi','B2jQzwn0','AgjhyLi','Bw9KAwz5ihjLCq','vgfQyxC','u0zxqMfJAW','rffYs08','C0LvDge','CMfPDhm','Dgf1ve0','B1bHAw8','seHey28','6k+k5PAT77YA5Qoa5Rwl5yIW5lUL5lIl5y+y6yEp','B3flAeS','sNDmtxK','A0TRqvq','rLDcywnR','5Qoa5Rwl5yIW5PAW5PYn6kofici','su5YCMe','q0TWs0G','5lQu5A6y5Asw6lkm','zK1ZDva','ywrK','DxrXD0u','B01PuhK','CMvWBgfJzq','BgvUz3rO','zNLDiezPBMfSia','zgf0ytPPBwfNzq','s256u3q','rgvcDgK','C2vHCMnO','rxfWyvm','BePZDNO','DuDrrK4','DMfYAwfIBgvZ','y3rLCG','vfzHsK4','zxH0icH0CMLNzW','q0LYA3i','DxbWzxjcB2r5tG','ufjptvbux1jfuW','i3n0lwnOyxr1oa','wK5qt0e','rvnu','CMfJDgvYl291Da','ioMHUEABToAuUsZMMk/LKkBLUPtNLkG/','5O+q56s66k+n5l+U5Ps56k+35RgclI4U','tvjhAwK','DhHhs0C','su9dzM0','zhDzuuW','C3rHCNrZv2L0Aa','y1fyvMm','ufjptvbux1jfuq','zNvSBejVzhLtrG','Dg9tDhjPBMC','tNbNBe0','odK0nde1oerhA1vctG','5lIl5y2k6lQRtLngv+IdJoMDOJO','B3v0zML0CW','iIZMMk/LKkBLVzxLHAu/','tundsNa','wLD4zLy','vvzAqwi','zhnvv3a','zNLDioACJEIJHsaI','teD3t0K','sNHuvxC','y1jxtxm','DhfWvei','vMfYAwfIBgvZ','rxbztwO','r0r3q24','zNLDief0DgfJAa','zNLDiev4DhjHyW','q2LkB0i','uefzyK8','D3LkB3a','vfDRBxm','CLvkA1a','A3bVuhC','ue1gBMm','Dg9mB3DLCKnHCW','C1DuuMq','mJy1nZq4nJbxwe1lweS','uvDjq08','5PYQ5zYOieXmtsdOVPpLH7RKUk0','CNDxzeC','svv2wgi','Bxzur3C','uu9ZyMS','5BEY5y+w5RAi5PU05PAW','6i635y+w6kEs6iMY5l+U5Ps55O+q56s66k+n6lAf','5lIl5y2k6lQR','v0L2zhy','y2HHCMfJDgvYva','zNvSBejVzhLcyq','v0PAzgm','wvbkru4','6kEs6iMY5l+U5Ps5ieXmtsdOR7C','DKnxvxK','qvHgrgG','5lIl5y2k6lQRu0zx6iom6z2IoIa','5lIl5y2k6lQRu0zxoIa','5PwW5O2UoG','nJr0uNvKtLe','Aw5JBhvKzxm','BMfTzq','CfrTD0i','y2HHCMfJDgvYCW','z2TrAhy','vvfcqLy','s3bqsxq','zNvSBejVzhK','Dhb1DdO','wgDjv00','Bg9N','vuvtva','rMXzBeq','yMfZzty0','tujcEvq','qKvXqKq','5Rgc6lAf5PE2','ue9ou0u','rgTkrfG','t0rjrLLFr0vuxW','weXuwxG','y1Lxvfa','vKPXt0W','Dgnrtwu','zNLDioACQUIVHUwiQ+EAHoACJEIJHq','C2n0B0e','5B2s5BgE5lQ6','CfzWzuS','wwn1z1m','zNLDiow3SUABToAwSoACJEIJHEMIHa','uxbAqw8','5lIl5y2k6lQRtLngv+IdJoMDOG','5lIk5y2k6lQRtLngvW','vvfxDgi','6iUX5PAh5zcn56EW','DxjLCW','twXuzeC','q3zTr2C','qNDpvxG','z0XUqwu','BuTJv2O','5y+c6icd5zU+54Mh','CIb0zxH0oG','zNLDie5VignOyq','DgvYigXPC3qGDa','AhDZvvK','5lIk5y2k6lQRtLngv+IdJoMDOG','DxbWzxjcB2r5uW','DgLTzw91De1Z','sxrLs1a','DgLUzYbJAgfYia','DLvOCve','D29YBgqGyM9VAW','zvfZs1u','ig1LC3nHz2uGAq','BMvTv2e','Be5vBLm','DxvNrMO','vvD6q2m','B3v0zML0uhjLCW','y2HHCL9TB2rPzG','BwfW','qMPmy1C','DgvYihrYAwDNzq','q1nXqxO','u2Drthy','mteZnJzOAKXWq2S','zMLSDgvY','AKHjvMi','yKTRDeS','DgvKigrHDge6','vgPuq3O','DcbWCMvZzxq6','AwLuwKS','zNLDieXmtsbVDq','Cg1Sz1i','sevfDuu','DxbWzxjcB2r5qG','vwvHwKu','yxbWBhK','pc/KURRNIAK+','shfqvgi','sw9zr1u','DKr6CMS','ywDNy0W','CMvZzxrZ','CgDuvNe','thfpsM4','DxbWzxjcB2r5','zxrZ','wMjvEKS','5lIk5y2k6lQRtLngvZOG','5lIk5y2k6lQRu0zx6iom6z2IoIa','C1v0uxm','vLjXugm','B0jeBxe','zMfJAwfSrMvHDa','ugDXBvi','BNnXtNC','zw5LCG','y29UC3rYDwn0BW','zNLDifn0yxj0Aq','zM9YrwfJAa','zKXPEwe','tKjethC','CMvTB3zLtgLZDa','rxzxsvm','y2HHCMfJDgvY','EeHxruC','uxzcyvC','zgv0ywLS','tgTpDvi','verTqM4','u0zx','DhvVweO','zxf1AxjLBwvUDa','suLIzxO','wMnjvvG','DhjPBq','5A6m5OIq77Yb','ChjVBxb0','ywfWuei','B3nZrgW','teXnioI/LowBNUE7K+AENos4UUEPUG','z3fMAuG','zvfqCw8','Dgv4Da','vKXkCfG','y2HHCMfJDgvYua','D1P2txm','wwz2qKS','yNDqD0q','y2f5Cxi','ENrWu3G','5lIk5y2k6lQRu0zx6iom6z2I','iIdMNiKG','CvLPuLy','Dhb1Da','pos6UUEjQt4k','C3vJy2vZCW','zNLDiow3SUwiM+w7UUACJEIJHEMIHa','6iUX5PAh5zcn56EWoIa','EernCeS','B3DUzxi','teXnx0niqvjFtq','DxvAvuS','5A2x5Q61ici','vhfnu1e','AMvNuNm','zgrYD3q','wNniuNe','Bw9KAwz5ihbYBW','zw50CMLLCW','DxjS','qNLjza'];_0x3202=function(){return _0xc06088;};return _0x3202();}import{saveSettingsDebounced}from'../../../../../script.js';import{generateCharacterListText,generateOutfitEnableListText,generateCommonCharacterListText}from'./settings/worldbook.js';import{updateCombinedPrompt}from'./settings/llm.js';import{buildPromptForRequestType}from'./settings/llmService.js';import{refreshCharacterSettings}from'./settings/character/index.js';import{stylishConfirm}from'./ui_common.js';import{mergeAdjacentMessages,replaceAllPlaceholders,replacePlaceholder as _0x4ce053}from'./promptProcessor.js';function replacePlaceholder(_0x5b857e,_0x505996,_0x380194,_0x33c952){const _0x546be8={'mvTGw':function(_0x300cdd,_0x531faf){return _0x300cdd(_0x531faf);},'SgQLv':_0x5be5c9(0x225,0x2ab,0x281,0x38a),'aZuKW':function(_0x389580,_0x88c627){return _0x389580(_0x88c627);},'AWilV':function(_0x201f76){return _0x201f76();},'thjur':function(_0x50869b,_0x554ecd,_0x48ce59){return _0x50869b(_0x554ecd,_0x48ce59);},'UeaZE':function(_0x1d8113,_0x15bd3e){return _0x1d8113===_0x15bd3e;},'EvWIS':_0x5992e0(0x44f,0x3f3,0x33b,0x416),'trCbj':function(_0xbc86d1,_0x2a3278){return _0xbc86d1===_0x2a3278;},'kvVnT':_0x5be5c9(0x18e,0x201,0x2ef,0x1a3),'jDTdW':'IQzgo','VJqOL':_0x5992e0(0x48d,0x4a2,0x43b,0x4a8),'QWDNd':'sFJZz','aapPB':_0x5be5c9(0x1da,0x29a,0x325,0x2e6),'tauTM':function(_0x516373,_0x175206){return _0x516373!==_0x175206;},'aggcL':_0x5be5c9(0xd7,0x186,0xfd,0x195),'VeZzB':function(_0x5c0525,_0x2fc75b){return _0x5c0525===_0x2fc75b;},'nsqNw':_0x5992e0(0x571,0x59a,0x5a1,0x4fa),'FlYlD':function(_0x891bf2,_0x2ffea9){return _0x891bf2===_0x2ffea9;},'lWNqt':_0x5992e0(0x36f,0x34b,0x487,0x3d1),'xDMpK':_0x5be5c9(0x36c,0x2a4,0x2e2,0x310)};function _0x5be5c9(_0x3d6efd,_0x5bbbe2,_0x4cae10,_0x34e6bc){return _0x123e(_0x5bbbe2- -0x72,_0x34e6bc);}if(_0x546be8[_0x5992e0(0x313,0x398,0x44f,0x3c2)](typeof _0x5b857e,_0x546be8[_0x5be5c9(0x237,0x199,0x1ad,0x11b)])){if(_0x546be8[_0x5992e0(0x539,0x529,0x352,0x447)](_0x546be8['kvVnT'],_0x546be8[_0x5992e0(0x3b0,0x4df,0x459,0x488)]))_0x398a80++;else{if(_0x380194&&_0x5b857e[_0x5992e0(0x36f,0x2d1,0x467,0x374)](_0x505996)){if(_0x546be8['trCbj'](_0x546be8[_0x5992e0(0x365,0x347,0x2af,0x38a)],_0x546be8[_0x5992e0(0x2ed,0x448,0x381,0x38a)])){if(_0x33c952){if(_0x546be8[_0x5992e0(0x46a,0x43a,0x38b,0x439)]===_0x546be8[_0x5be5c9(0x1aa,0x1a8,0x12a,0x1cc)]){if(_0x14e3cb[_0x1a94fa]){const _0x1bee10=_0x168484['getElement'+_0x5992e0(0x3a3,0x4cc,0x37d,0x40e)]('char_'+_0x356aaf);_0x1bee10&&(_0x1bee10['value']=_0x25194a[_0x12ea78],_0x546be8[_0x5992e0(0x27a,0x33e,0x29a,0x363)](_0x4d983e,_0x1bee10)['trigger'](_0x546be8[_0x5992e0(0x496,0x390,0x49c,0x3b5)]));}}else _0x33c952[_0x5be5c9(0x11e,0xda,0xe2,0x93)](_0x505996);}}else{const _0x23f176={'LkOuR':function(_0x163ceb,_0x3e66fe){function _0x27b1d5(_0x4f66e8,_0x45f4e3,_0x2c4690,_0xceb1fc){return _0x5be5c9(_0x4f66e8-0x3e,_0xceb1fc-0x241,_0x2c4690-0x3b,_0x2c4690);}return _0x546be8[_0x27b1d5(0x487,0x4b8,0x3fe,0x441)](_0x163ceb,_0x3e66fe);},'ivaBb':_0x5be5c9(0xde,0x121,0x172,0x176)+'时'},_0x12bb53=_0x546be8['AWilV'](_0x3aee8d);_0x190fb4['log'](_0x5992e0(0x489,0x402,0x544,0x4cf)+'PromptModi'+_0x5992e0(0x459,0x467,0x520,0x4c0)+_0x5992e0(0x375,0x48b,0x389,0x3a6)+'modify\x20pro'+_0x5be5c9(0x251,0x28b,0x1c0,0x20e)+_0x12bb53+')');const _0x4c8c22=_0x2bdffb=>{function _0x1d09da(_0x3bf19d,_0x2a80dd,_0x58bc25,_0x55148a){return _0x5be5c9(_0x3bf19d-0x1e0,_0x55148a- -0x224,_0x58bc25-0x1c8,_0x2a80dd);}if(_0x2bdffb['id']!==_0x12bb53)return;function _0x30b3b5(_0x4abc7f,_0x2ec9fa,_0x4cbe08,_0x8c0a9b){return _0x5be5c9(_0x4abc7f-0x1b1,_0x4abc7f-0xa2,_0x4cbe08-0x67,_0x2ec9fa);}_0x47896b[_0x1d09da(-0x92,-0x17c,-0x42,-0x8c)+_0x1d09da(-0xba,-0x47,-0xd9,-0x92)](_0x355ec6[_0x30b3b5(0x261,0x2e1,0x1fe,0x1f7)+'ODIFY_GET_'+_0x1d09da(-0x104,-0x168,-0x22a,-0x137)+_0x30b3b5(0x1e2,0x189,0x192,0xef)],_0x4c8c22),_0x5b84c3(_0x2bdffb[_0x30b3b5(0x249,0x191,0x325,0x18f)]);};_0x1ee2e4['on'](_0x4b6bb3[_0x5be5c9(0x2ac,0x1bf,0x244,0x2b5)+_0x5be5c9(0xcb,0x142,0x1e8,0xd9)+_0x5992e0(0x40f,0x3a6,0x32e,0x332)+'PONSE'],_0x4c8c22);const _0x4fbbc1={};_0x4fbbc1['id']=_0x12bb53,_0x5e282c[_0x5992e0(0x3c1,0x516,0x535,0x45c)](_0x2bfc63[_0x5be5c9(0x209,0x1bf,0x216,0x14b)+'ODIFY_GET_'+'PROMPT_REQ'+'UEST'],_0x4fbbc1),_0x546be8[_0x5be5c9(0x1ca,0x264,0x28d,0x304)](_0xf47a11,()=>{function _0x3d5234(_0x30742a,_0x8dda84,_0x1a4e9a,_0x5cb477){return _0x5992e0(_0x30742a-0x19c,_0x8dda84,_0x1a4e9a-0x93,_0x1a4e9a-0x74);}function _0x4b2dbb(_0x372438,_0x118961,_0x114654,_0x536940){return _0x5be5c9(_0x372438-0x10,_0x536940-0x419,_0x114654-0x14,_0x118961);}_0xf89395[_0x4b2dbb(0x652,0x52a,0x4ec,0x5b1)+'ener'](_0x20a8ca['LLM_CHAR_M'+'ODIFY_GET_'+_0x4b2dbb(0x4bd,0x44b,0x4b7,0x506)+_0x3d5234(0x424,0x426,0x3f9,0x346)],_0x4c8c22),_0x23f176[_0x4b2dbb(0x631,0x644,0x552,0x5b7)](_0xbae33a,new _0x399933(_0x23f176['ivaBb']));},-0x1*-0x35d6+-0x20a0+0x11da);}}return _0x5b857e['replaceAll'](_0x505996,_0x380194);}}function _0x5992e0(_0x258c05,_0x5d69c9,_0x27d909,_0x184e33){return _0x123e(_0x184e33-0x1d3,_0x5d69c9);}if(Array[_0x5992e0(0x50e,0x4b6,0x3f8,0x425)](_0x5b857e)){if(_0x546be8[_0x5992e0(0x404,0x368,0x3d2,0x312)](_0x546be8[_0x5be5c9(0x200,0x183,0x11c,0x1bf)],_0x5992e0(0x47b,0x480,0x35a,0x3cb)))_0x12fb21[_0xef1e4]=_0x329089[_0x151cac];else return _0x5b857e[_0x5992e0(0x38b,0x3b0,0x3f0,0x3b1)](_0x523e5e=>replacePlaceholder(_0x523e5e,_0x505996,_0x380194,_0x33c952));}if(_0x5b857e&&_0x546be8[_0x5992e0(0x3c6,0x4ab,0x4e1,0x490)](typeof _0x5b857e,_0x546be8[_0x5be5c9(0x198,0x191,0x257,0xec)])){if(_0x546be8[_0x5992e0(0x43e,0x3f6,0x32c,0x380)]('sUtQs',_0x546be8[_0x5992e0(0x5a0,0x432,0x51a,0x4be)])){const _0x37fd54={};for(const _0x265428 in _0x5b857e){_0x546be8[_0x5be5c9(-0x1c,0xcd,0x165,0x145)](_0x546be8[_0x5992e0(0x37e,0x3dc,0x32d,0x402)],_0x546be8[_0x5992e0(0x351,0x30a,0x45c,0x402)])?_0x283a41[_0x51e16d]&&(_0x3c863f[_0x4e7dbb]=_0x2ebbd6[_0x1d70a7]):_0x37fd54[_0x265428]=replacePlaceholder(_0x5b857e[_0x265428],_0x505996,_0x380194,_0x33c952);}return _0x37fd54;}else _0x546be8[_0x5992e0(0x3fc,0x2c4,0x31f,0x363)](_0x4ad926,_0x1dcda5);}return _0x5b857e;}function attachImagesToMessage(_0x3c3e7a,_0x262554,_0x38ba99,_0x2f686a=_0x211a88(0x6,-0x116,-0x51,-0xeb)){const _0x339cc1={};_0x339cc1[_0xc2b44d(-0x9a,-0x78,-0x4d,-0x27)]=_0x4aeb50(0x49b,0x4ba,0x552,0x570),_0x339cc1[_0xc2b44d(0xd6,0x160,0x8c,0x113)]=function(_0x519774,_0x2662ca){return _0x519774+_0x2662ca;},_0x339cc1[_0xc2b44d(0x7f,0x66,-0x20,-0x53)]=_0x4aeb50(0x516,0x37f,0x45c,0x468),_0x339cc1['CoHuy']=_0xc2b44d(0x14b,0x1d9,0x13d,0x168),_0x339cc1[_0xc2b44d(0x23b,0x11f,0x152,0x8a)]=function(_0x553e6d,_0x4b4d6e){return _0x553e6d===_0x4b4d6e;},_0x339cc1[_0x4aeb50(0x367,0x461,0x3e3,0x394)]=function(_0xfe8959,_0x68353e){return _0xfe8959<_0x68353e;},_0x339cc1[_0x4aeb50(0x490,0x51e,0x581,0x549)]=function(_0x1fa2a6,_0x2edf80){return _0x1fa2a6>=_0x2edf80;},_0x339cc1[_0x4aeb50(0x39a,0x2ea,0x4ab,0x3d5)]=_0xc2b44d(0x173,0xa,0x8b,0x180),_0x339cc1[_0x4aeb50(0x43b,0x4d5,0x56c,0x4e0)]=function(_0x6c68bd,_0x268542){return _0x6c68bd!==_0x268542;},_0x339cc1[_0xc2b44d(-0xae,0xf7,0x3c,0x105)]=_0x4aeb50(0x4c9,0x4fa,0x38c,0x466),_0x339cc1[_0x4aeb50(0x4a0,0x595,0x531,0x4c9)]=_0x4aeb50(0x5c8,0x5c6,0x4d7,0x4d9),_0x339cc1['EpYMj']=function(_0x9eebff,_0x1bf652){return _0x9eebff>_0x1bf652;};const _0x4c59dc=_0x339cc1;if(!_0x38ba99||_0x4c59dc['GhSMH'](_0x38ba99[_0xc2b44d(-0x12,-0x75,-0x68,-0x53)],0x1*-0x21f8+-0x571*0x1+-0xab*-0x3b)||_0x4c59dc['fMsuP'](_0x262554,0x77*-0x19+0x2182+-0x15e3*0x1)||_0x4c59dc[_0x4aeb50(0x5ab,0x5c2,0x493,0x549)](_0x262554,_0x3c3e7a[_0xc2b44d(-0x145,0x12,-0x68,0x61)]))return _0x3c3e7a;const _0x1330d7=[..._0x3c3e7a],_0x3f6c79=_0x1330d7[_0x262554],_0x23ca39=[];if(_0x4c59dc['GhSMH'](typeof _0x3f6c79[_0xc2b44d(0x56,0x14f,0x11c,0x1bd)],_0x4c59dc[_0x4aeb50(0x38e,0x43b,0x42b,0x3d5)])){const _0x389b7c={};_0x389b7c[_0xc2b44d(0x97,0x60,0xf0,0x13d)]=_0x4c59dc[_0xc2b44d(0x68,-0xc5,-0x20,0x49)],_0x389b7c['text']=_0x3f6c79[_0x4aeb50(0x5e0,0x5a3,0x4f1,0x51d)],_0x23ca39[_0x4aeb50(0x46a,0x505,0x4dc,0x4a4)](_0x389b7c);}else{if(Array[_0x4aeb50(0x3da,0x524,0x465,0x49b)](_0x3f6c79['content'])){if(_0x4c59dc[_0x4aeb50(0x45b,0x519,0x59c,0x4e0)](_0x4c59dc[_0xc2b44d(0xd7,0x92,0x3c,0x18)],_0x4c59dc[_0xc2b44d(-0x1b,-0x5,0xc8,0x4e)]))_0x23ca39[_0xc2b44d(-0x2c,0x33,0xa3,-0x38)](..._0x3f6c79[_0x4aeb50(0x597,0x5d1,0x4e6,0x51d)]);else{_0x43592d[_0x4aeb50(0x578,0x573,0x483,0x4d3)]('请先选择一个角色预设');return;}}}if(_0x4c59dc[_0x4aeb50(0x31d,0x48c,0x41c,0x3c7)](_0x38ba99[_0x4aeb50(0x319,0x377,0x354,0x399)],-0x43d+-0xb25*0x3+-0x25ac*-0x1)){const _0x10f960={};_0x10f960['type']=_0x4c59dc[_0xc2b44d(0xb1,-0x88,-0x20,-0xae)],_0x10f960[_0xc2b44d(0x43,0x48,0x67,0x136)]=_0xc2b44d(0x13a,0xc3,0x12f,0x1b0)+_0x38ba99[_0xc2b44d(0x86,0x6c,-0x68,-0x8d)]+'张'+_0x2f686a+']',_0x23ca39[_0x4aeb50(0x598,0x3cc,0x3c9,0x4a4)](_0x10f960);}_0x38ba99[_0x4aeb50(0x4b7,0x50d,0x391,0x450)]((_0x12f82b,_0x53797f)=>{const _0x7f3ef3=typeof _0x12f82b===_0x580333(0x3b1,0x3ae,0x455,0x470)?_0x12f82b:_0x12f82b[_0x580333(0x252,0x319,0x388,0x2ca)];function _0x580333(_0x40dcf0,_0x5976aa,_0x48f0f3,_0x49588b){return _0x4aeb50(_0x49588b,_0x5976aa-0x18b,_0x48f0f3-0x17a,_0x5976aa- -0xde);}const _0x2dad4=typeof _0x12f82b===_0x4c59dc[_0x580333(0x1e7,0x2d6,0x3b9,0x390)]&&_0x12f82b['name']?_0x12f82b[_0x3370c7(0x4a2,0x520,0x45a,0x4e4)]:''+_0x2f686a+_0x4c59dc[_0x580333(0x44a,0x3af,0x3e2,0x30e)](_0x53797f,0x3f5*-0x7+-0xf*0x293+0x4251),_0x4e8f0a={};_0x4e8f0a[_0x580333(0x392,0x413,0x4e7,0x34a)]=_0x4c59dc[_0x3370c7(0x4fa,0x42e,0x450,0x432)],_0x4e8f0a[_0x3370c7(0x4a0,0x4fb,0x4d7,0x4a4)]='['+_0x2dad4+']',_0x23ca39[_0x3370c7(0x49b,0x434,0x513,0x5d8)](_0x4e8f0a);function _0x3370c7(_0x14eead,_0xccd7c9,_0x2df117,_0x62efb2){return _0xc2b44d(_0x14eead-0xe8,_0x62efb2,_0x2df117-0x470,_0x62efb2-0x97);}let _0x1861c9=_0x7f3ef3;!_0x7f3ef3[_0x3370c7(0x41a,0x3e6,0x422,0x3cc)](_0x3370c7(0x48f,0x4fa,0x4ff,0x541))&&(_0x1861c9=_0x3370c7(0x3f0,0x3cb,0x40a,0x3de)+_0x3370c7(0x495,0x51d,0x516,0x445)+'4,'+_0x7f3ef3);const _0x5bc800={};_0x5bc800[_0x3370c7(0x526,0x452,0x4f2,0x5bb)]=_0x1861c9,_0x5bc800[_0x3370c7(0x59c,0x53e,0x4c7,0x556)]='auto';const _0x117aad={};_0x117aad[_0x3370c7(0x4da,0x504,0x560,0x549)]=_0x4c59dc['CoHuy'],_0x117aad[_0x3370c7(0x513,0x55f,0x5ad,0x591)]=_0x5bc800,_0x23ca39['push'](_0x117aad);});const _0x52af11={..._0x3f6c79};_0x52af11[_0xc2b44d(0xc4,0x59,0x11c,0x1f6)]=_0x23ca39,_0x1330d7[_0x262554]=_0x52af11;function _0x4aeb50(_0x5abb94,_0x56a7ea,_0x66b0,_0x1d4a69){return _0x211a88(_0x5abb94,_0x56a7ea-0x67,_0x66b0-0xd0,_0x1d4a69-0x4fe);}function _0xc2b44d(_0x2392dd,_0x8a8328,_0x492241,_0x151ec1){return _0x211a88(_0x8a8328,_0x8a8328-0x45,_0x492241-0x108,_0x492241-0xfd);}return _0x1330d7;}function findMessageIndexWithPlaceholder(_0xd977d3,_0x34fddb){const _0x227f95={};_0x227f95[_0x2645d9(0x33e,0x3fe,0x468,0x30f)]=_0x349f2c(-0x1b,-0xd3,0xd7,-0xb4),_0x227f95[_0x349f2c(-0xa1,-0x81,-0x18c,-0x62)]=function(_0x3862d0,_0x25a23d){return _0x3862d0<_0x25a23d;},_0x227f95[_0x349f2c(0x64,-0x45,-0xb,0x7b)]=function(_0x5b9fe4,_0x24e778){return _0x5b9fe4!==_0x24e778;};function _0x349f2c(_0x42510f,_0x520057,_0x5c9cd7,_0x1630c8){return _0x211a88(_0x520057,_0x520057-0x1be,_0x5c9cd7-0x186,_0x42510f-0x8e);}_0x227f95['rqPsB']=_0x349f2c(-0xe4,-0xfb,-0x190,-0x86);function _0x2645d9(_0x1c95a8,_0x2c185a,_0x7d6e19,_0x3e98c7){return _0x211a88(_0x7d6e19,_0x2c185a-0x17b,_0x7d6e19-0x3,_0x2c185a-0x4a2);}_0x227f95[_0x2645d9(0x4cb,0x4b2,0x4fc,0x3bd)]=_0x2645d9(0x4e7,0x507,0x450,0x478),_0x227f95[_0x2645d9(0x431,0x474,0x4aa,0x4bf)]=function(_0x3e9b22,_0x3992ea){return _0x3e9b22===_0x3992ea;},_0x227f95[_0x2645d9(0x5d6,0x4de,0x593,0x4e3)]=_0x349f2c(0x1c,0x10,-0xaa,0xea),_0x227f95['CSqAz']=_0x349f2c(-0xa2,-0xcf,0xc,-0xd6),_0x227f95[_0x349f2c(0xa0,-0x2b,0x185,0x8d)]=_0x349f2c(0xaa,0x9f,0x80,0x11d),_0x227f95['YdDgL']=_0x2645d9(0x358,0x3df,0x358,0x33f),_0x227f95['DeBti']=_0x349f2c(0x29,-0x40,0x8e,-0xb1);const _0x5804c3=_0x227f95;for(let _0x3283ab=-0x17dc+-0x206f+0x384b;_0x5804c3[_0x349f2c(-0xa1,-0x7c,-0x15c,-0xa5)](_0x3283ab,_0xd977d3[_0x2645d9(0x2fd,0x33d,0x304,0x2f5)]);_0x3283ab++){if(_0x5804c3[_0x349f2c(0x64,0xde,0x8b,0x5a)](_0x5804c3[_0x349f2c(0x1b,-0x9f,-0x1f,0x2e)],_0x5804c3['VwmPK'])){const _0x5e84da=_0xd977d3[_0x3283ab];if(_0x5804c3[_0x349f2c(0x60,-0x82,-0x6e,-0x7)](typeof _0x5e84da[_0x2645d9(0x4df,0x4c1,0x464,0x448)],_0x5804c3[_0x349f2c(0xca,0xf8,0x149,0x1bb)])&&_0x5e84da[_0x349f2c(0xad,0x10d,0x103,0x33)]['includes'](_0x34fddb)){if(_0x5804c3[_0x2645d9(0x489,0x3ce,0x38b,0x2ff)]!==_0x5804c3['QcyDe'])return _0x3283ab;else _0x3614c9[_0x349f2c(0x34,0xe4,-0x8b,0xd4)](_0x27af75);}else{if(Array[_0x349f2c(0x2b,-0x90,-0x8f,0x9c)](_0x5e84da['content'])){if(_0x5804c3[_0x2645d9(0x4af,0x49c,0x4f9,0x423)]!==_0x5804c3[_0x2645d9(0x27a,0x341,0x438,0x326)])for(const _0x2c72ab of _0x5e84da[_0x349f2c(0xad,0x143,0xa5,0xc7)]){if(_0x5804c3['HebWi'](_0x2c72ab[_0x2645d9(0x3e6,0x495,0x470,0x44e)],'text')&&_0x2c72ab[_0x349f2c(-0x8,0x12,0x3e,0xa1)]['includes'](_0x34fddb))return _0x3283ab;}else{const _0x3f0af8={};_0x3f0af8[_0x2645d9(0x4b5,0x495,0x439,0x461)]=_0x5804c3[_0x349f2c(-0x16,-0x3e,0x7f,0x87)],_0x3f0af8[_0x2645d9(0x46f,0x4bb,0x53c,0x476)]=_0x40ad16,_0x3f0af8[_0x2645d9(0x4f1,0x432,0x514,0x40d)]=_0x3f2a63,_0x3f0af8[_0x349f2c(0x2d,-0x1e,0x4,0xc4)+_0x349f2c(0xfc,0x20,0x1c9,0x1a1)]=[],_0x2d35ce['push'](_0x3f0af8);}}}}else{_0x2c982a[_0x349f2c(0xa8,0xd9,-0x16,0x29)](_0x349f2c(-0x95,-0x5d,-0x15f,-0x6c));return;}}return-(-0x2*-0xe7d+0x3f4*0x5+0x1*-0x30bd);}function _0x211a88(_0x5095c0,_0x111979,_0x4dde38,_0x14714d){return _0x123e(_0x14714d- -0x2b5,_0x5095c0);}function generateRequestId(){const _0x3008ab={};function _0x504a0b(_0x13f3be,_0xef508a,_0x256b45,_0x2a0485){return _0x211a88(_0x2a0485,_0xef508a-0x44,_0x256b45-0xad,_0x256b45-0x587);}_0x3008ab['IteKP']=function(_0x44281e,_0x38e776){return _0x44281e+_0x38e776;};const _0x3de11a=_0x3008ab;function _0x598dd7(_0x1ac969,_0x543e96,_0x193fb5,_0x53f7c3){return _0x211a88(_0x543e96,_0x543e96-0xb,_0x193fb5-0x5f,_0x193fb5-0x145);}if(crypto&&crypto['randomUUID'])return crypto['randomUUID']();return _0x3de11a[_0x598dd7(0x9c,0x40,0x62,-0x46)](Date['now']()[_0x598dd7(0xc,-0xec,-0x2,-0x22)](0x7*-0x1eb+-0x123*0xb+-0x1a12*-0x1),Math[_0x504a0b(0x5ce,0x549,0x583,0x4bc)]()[_0x504a0b(0x3ee,0x4e2,0x440,0x356)](0x7*0x1fd+0xe94+-0x1c5b)[_0x598dd7(0xad,0x1ea,0x193,0x9d)](0xd*0x234+-0x1024*-0x1+-0x2cc6));}export function LLM_CHAR_MODIFY_GET_PROMPT(){const _0x30f631={'hNunl':function(_0x214add,_0x3b1bc8){return _0x214add(_0x3b1bc8);},'cayqr':_0x40488b(-0xb2,-0x117,-0x102,-0x167),'CKpKH':function(_0x35d401,_0x1f9e0c){return _0x35d401===_0x1f9e0c;},'utqwE':_0x40488b(-0x111,-0x271,-0x1d1,-0x1a9),'fdGeE':function(_0x4df54e,_0x18c327){return _0x4df54e!==_0x18c327;},'pggzE':_0x40488b(-0x16a,-0x1a6,-0x219,-0x30c)+'时','rkNtE':function(_0x1e7b50,_0x3f20b3,_0x476033){return _0x1e7b50(_0x3f20b3,_0x476033);}};function _0x40488b(_0x3df72d,_0x202826,_0x35410a,_0x18dda3){return _0x211a88(_0x3df72d,_0x202826-0x1f0,_0x35410a-0x38,_0x35410a- -0xf7);}function _0x465169(_0xafff15,_0x1131ce,_0x4b9e4a,_0x28936b){return _0x211a88(_0x4b9e4a,_0x1131ce-0xd8,_0x4b9e4a-0x16a,_0x28936b-0x1e0);}return new Promise((_0x2a273a,_0xefbf5c)=>{const _0xa9345d={'WIvdv':function(_0x446ed7,_0x32b564){function _0x2e17dc(_0x53a3b7,_0x1cefc5,_0x3067cc,_0x1959c0){return _0x123e(_0x1cefc5- -0x109,_0x1959c0);}return _0x30f631[_0x2e17dc(0x1d5,0x1a5,0xd7,0x201)](_0x446ed7,_0x32b564);},'LUjvT':_0x30f631[_0x40694f(0x43e,0x3c3,0x4a4,0x4ad)],'LsQYu':function(_0x2eebfb,_0x354553){function _0x39f1d8(_0x3a6102,_0x3a5e1f,_0x8c7cb0,_0x4e04c0){return _0x40694f(_0x3a6102-0x15d,_0x3a5e1f-0x123,_0x3a6102- -0x35d,_0x4e04c0);}return _0x30f631[_0x39f1d8(0x6b,0x148,0xfd,0xcd)](_0x2eebfb,_0x354553);},'djPFK':_0x30f631[_0x5ddcc5(0x2ae,0x28d,0x20c,0x1b6)],'avXlX':'EKEqr','bKktK':function(_0x547ffe,_0x2eb848){return _0x30f631['fdGeE'](_0x547ffe,_0x2eb848);},'IoYGU':_0x30f631['pggzE']},_0x12cd69=generateRequestId();console[_0x40694f(0x50d,0x42e,0x42a,0x4de)](_0x40694f(0x57c,0x571,0x57b,0x662)+_0x5ddcc5(0x3ff,0x38a,0x4d2,0x437)+_0x5ddcc5(0x44e,0x4b9,0x4a6,0x3c3)+_0x5ddcc5(0x334,0x41a,0x363,0x3d9)+_0x5ddcc5(0x399,0x2b4,0x34e,0x463)+_0x5ddcc5(0x45e,0x374,0x38c,0x511)+_0x12cd69+')');const _0x24917b=_0x1b086b=>{function _0x492427(_0x533e6b,_0x1609ce,_0x134b32,_0x44b4f5){return _0x5ddcc5(_0x533e6b-0x149,_0x1609ce-0xe9,_0x134b32-0xd4,_0x134b32);}function _0x4aeef5(_0x398596,_0x204a82,_0x4f7678,_0x1d409d){return _0x40694f(_0x398596-0xb0,_0x204a82-0xce,_0x398596- -0x5ec,_0x1d409d);}const _0x403b27={'hbGbR':function(_0x5012f2,_0x40e63b){function _0x5d413d(_0x14d933,_0x12fcba,_0x3db441,_0x5e1bb0){return _0x123e(_0x12fcba-0x41,_0x3db441);}return _0xa9345d[_0x5d413d(0x111,0x1d6,0x15d,0x28b)](_0x5012f2,_0x40e63b);},'rwWdG':_0xa9345d[_0x4aeef5(-0xe9,-0x14c,-0x115,-0x163)]};if(_0xa9345d['LsQYu'](_0xa9345d[_0x492427(0x587,0x644,0x605,0x4de)],_0xa9345d['avXlX'])){const _0x131610=_0x403b27[_0x4aeef5(-0x45,-0x86,-0x7,-0x10f)](_0x52d336,_0x3edba6);if(_0x131610){const _0x6ad27a={};_0x6ad27a[_0x492427(0x552,0x5a5,0x53f,0x5da)]=_0x403b27[_0x4aeef5(-0x1df,-0x1c5,-0x237,-0x239)],_0x6ad27a[_0x492427(0x578,0x52e,0x503,0x510)]=_0x131610,_0x6ad27a[_0x4aeef5(-0x128,-0x21c,-0x13b,-0x172)]=_0x2691f8,_0x187b4c[_0x492427(0x505,0x45a,0x5f8,0x538)](_0x6ad27a);}}else{if(_0xa9345d[_0x4aeef5(-0x187,-0xff,-0xcf,-0xf4)](_0x1b086b['id'],_0x12cd69))return;eventSource[_0x4aeef5(-0x163,-0x1fb,-0x82,-0x1f7)+_0x4aeef5(-0x169,-0xa9,-0xd0,-0x18f)](eventNames[_0x492427(0x4db,0x4e4,0x46d,0x444)+'ODIFY_GET_'+'PROMPT_RES'+'PONSE'],_0x24917b),_0xa9345d['WIvdv'](_0x2a273a,_0x1b086b['prompt']);}};eventSource['on'](eventNames[_0x40694f(0x57b,0x43a,0x4b0,0x45d)+_0x40694f(0x508,0x447,0x433,0x3d3)+'PROMPT_RES'+'PONSE'],_0x24917b);function _0x5ddcc5(_0x4cccba,_0x55b5b9,_0x506d8b,_0x1e2da0){return _0x465169(_0x4cccba-0x1ca,_0x55b5b9-0x178,_0x1e2da0,_0x4cccba-0x236);}const _0x852dc4={};_0x852dc4['id']=_0x12cd69;function _0x40694f(_0x264134,_0x3d0119,_0x48d9c3,_0x30577a){return _0x40488b(_0x30577a,_0x3d0119-0x129,_0x48d9c3-0x62b,_0x30577a-0x7d);}eventSource[_0x40694f(0x47a,0x5e1,0x508,0x4ad)](eventNames[_0x5ddcc5(0x392,0x341,0x387,0x3f9)+_0x40694f(0x42c,0x4e4,0x433,0x489)+_0x40694f(0x3c0,0x2fa,0x3eb,0x40d)+_0x5ddcc5(0x30d,0x3e0,0x27a,0x39a)],_0x852dc4),_0x30f631['rkNtE'](setTimeout,()=>{function _0x2e2eae(_0x5b38cd,_0x5836be,_0x3ea688,_0x5f5922){return _0x40694f(_0x5b38cd-0x44,_0x5836be-0xfc,_0x5836be- -0x1ac,_0x5f5922);}eventSource[_0x2e2eae(0x20d,0x2dd,0x376,0x385)+'ener'](eventNames[_0x2e2eae(0x255,0x304,0x3b4,0x358)+_0x2e2eae(0x318,0x287,0x21f,0x1cc)+'PROMPT_RES'+_0x2e2eae(0x25c,0x285,0x1ec,0x26b)],_0x24917b);function _0x245806(_0x37fdba,_0x3be48b,_0x2cfaa3,_0xe7a976){return _0x40694f(_0x37fdba-0xcf,_0x3be48b-0xe6,_0xe7a976- -0x5b7,_0x2cfaa3);}_0xa9345d['WIvdv'](_0xefbf5c,new Error(_0xa9345d[_0x2e2eae(0x209,0x2c6,0x222,0x2df)]));},0x1141+-0x1579*-0x2+-0x1523);});}export function LLM_CHAR_MODIFY(_0x4e525b,_0x290f6a={}){const _0x1ff0e9={'iiTZK':function(_0x40a563,_0x306ae4){return _0x40a563!==_0x306ae4;},'IELBs':function(_0x3792d3,_0x30f98e){return _0x3792d3(_0x30f98e);},'VRqPc':'LLM\x20请求失败','dslBj':function(_0x14f2d9){return _0x14f2d9();},'qicHl':_0x53f808(0x80,0xc8,-0x16,0x45)+_0xc00cb1(-0x1ed,-0x14a,-0xf7,-0xd4),'pGVVL':function(_0x39a2bd,_0x5ed2ce){return _0x39a2bd===_0x5ed2ce;},'iwQqB':_0x53f808(0xc8,0x1be,0x144,0x50),'kdfvf':'kFUCY','HHDco':function(_0x2992a1){return _0x2992a1();},'ysfTE':function(_0x5918a2,_0x2c2249,_0x2e2a4d){return _0x5918a2(_0x2c2249,_0x2e2a4d);}};function _0x53f808(_0x4cccf1,_0x16865a,_0x5241f8,_0x2ff365){return _0x211a88(_0x2ff365,_0x16865a-0x2b,_0x5241f8-0xca,_0x5241f8-0x105);}function _0xc00cb1(_0x5af2ba,_0xa9ddf9,_0x43693c,_0x24187e){return _0x211a88(_0x24187e,_0xa9ddf9-0xb1,_0x43693c-0x158,_0x43693c-0xd);}return new Promise((_0x2f1698,_0x1dba9b)=>{function _0x2aee25(_0x3a3b44,_0x27de09,_0x560d9c,_0x20b5cd){return _0x53f808(_0x3a3b44-0x195,_0x27de09-0x1ef,_0x20b5cd-0x3c9,_0x560d9c);}const _0x543455={'CEYmo':function(_0x47d01d,_0x242ba4){function _0x273c1d(_0x42fe2d,_0x474dda,_0x2238ba,_0x29361d){return _0x123e(_0x29361d-0x3d9,_0x474dda);}return _0x1ff0e9[_0x273c1d(0x6f6,0x6aa,0x6c6,0x672)](_0x47d01d,_0x242ba4);},'JIxqB':_0x1ff0e9[_0x2aee25(0x506,0x56f,0x566,0x4bf)]};function _0x2775eb(_0x5e8822,_0x527b2f,_0x1ff126,_0x349584){return _0xc00cb1(_0x5e8822-0x1c9,_0x527b2f-0x2d,_0x349584-0x24,_0x527b2f);}if(_0x1ff0e9[_0x2775eb(0x20,0x92,0x156,0x64)]!==_0x2aee25(0x408,0x456,0x4b6,0x480)){const _0x410e4a=_0x1ff0e9[_0x2775eb(-0x101,-0x1e7,-0x218,-0x143)](generateRequestId),_0x104ff4=_0x290f6a['timeoutMs']||-0xb*0xbb3+0x9d9+-0x7f*-0x2c8;let _0x52ac04=null;console[_0x2aee25(0x313,0x359,0x3c5,0x3c4)](_0x2775eb(0xd,0x131,0xdc,0x78)+_0x2775eb(0xa1,0x9f,0xf9,0x1a)+_0x2aee25(0x47a,0x4d6,0x3e4,0x4b4)+_0x2775eb(-0x31,0x89,0xd2,0x2c)+'odify\x20LLM\x20'+_0x2aee25(0x47d,0x4b9,0x541,0x497)+'D:\x20'+_0x410e4a+')');const _0x24d084=()=>{function _0x241e42(_0x52bbab,_0x3abd3b,_0x354023,_0x2fa425){return _0x2775eb(_0x52bbab-0x2d,_0x52bbab,_0x354023-0x69,_0x2fa425-0x1e9);}eventSource['removeList'+_0x9f2a90(0x293,0x341,0x2fb,0x2b4)](eventNames[_0x9f2a90(0x37c,0x36e,0x2cc,0x464)+'ODIFY_RESP'+'ONSE'],_0x28973a);function _0x9f2a90(_0xcdb1ba,_0x53c10d,_0x8bdd0e,_0x34a252){return _0x2aee25(_0xcdb1ba-0x18c,_0x53c10d-0x114,_0x34a252,_0x53c10d- -0xdc);}if(_0x52ac04){if(_0x9f2a90(0x2fd,0x358,0x35b,0x330)===_0x543455[_0x9f2a90(0x479,0x39f,0x2f0,0x2d8)])for(const _0x2d3bd7 of _0x2af798[_0x241e42(0x1a8,0x236,0x277,0x239)]){if(_0x543455[_0x9f2a90(0x3ee,0x442,0x3f5,0x465)](_0x2d3bd7[_0x9f2a90(0x3e1,0x3e5,0x351,0x328)],'text')&&_0x2d3bd7['text'][_0x9f2a90(0x395,0x2de,0x20c,0x35b)](_0x4f488f))return _0x37af99;}else clearTimeout(_0x52ac04),_0x52ac04=null;}},_0x28973a=_0x3f4994=>{if(_0x1ff0e9[_0x5d4d44(0x3a7,0x308,0x3f6,0x335)](_0x3f4994['id'],_0x410e4a))return;function _0x4156a7(_0x12a6d5,_0x5b7a82,_0x4dee6c,_0x1bfa90){return _0x2775eb(_0x12a6d5-0x1aa,_0x1bfa90,_0x4dee6c-0x23,_0x5b7a82-0x28e);}_0x24d084();function _0x5d4d44(_0x1e71db,_0x3c85fa,_0x14292f,_0x14e8f8){return _0x2aee25(_0x1e71db-0x172,_0x3c85fa-0x126,_0x3c85fa,_0x14e8f8- -0xce);}_0x3f4994[_0x4156a7(0x184,0x236,0x323,0x1bb)]?_0x1ff0e9[_0x5d4d44(0x481,0x37c,0x32c,0x3aa)](_0x2f1698,_0x3f4994[_0x4156a7(0x319,0x2b3,0x271,0x24f)]):_0x1dba9b(new Error(_0x3f4994[_0x5d4d44(0x476,0x3f4,0x3c4,0x3f4)]||_0x1ff0e9[_0x5d4d44(0x2f1,0x414,0x3c8,0x34a)]));};eventSource['on'](eventNames['LLM_CHAR_M'+'ODIFY_RESP'+_0x2aee25(0x552,0x3cb,0x55a,0x47d)],_0x28973a);const _0x7f6610={};_0x7f6610['prompt']=_0x4e525b,_0x7f6610['id']=_0x410e4a,eventSource[_0x2aee25(0x429,0x444,0x592,0x4a2)](eventNames[_0x2aee25(0x3e2,0x42a,0x522,0x44a)+'ODIFY_REQU'+_0x2aee25(0x3d4,0x36e,0x36f,0x37b)],_0x7f6610),_0x52ac04=_0x1ff0e9['ysfTE'](setTimeout,()=>{_0x1ff0e9[_0x49afd2(-0x122,-0x5a,-0x1b,0x6f)](_0x24d084);function _0x15ae67(_0x5e28fd,_0x47390f,_0x5d513c,_0xccdf2d){return _0x2aee25(_0x5e28fd-0x12f,_0x47390f-0x14a,_0xccdf2d,_0x5e28fd- -0x4a9);}function _0x49afd2(_0x5a2a9b,_0x282ba3,_0x2ba038,_0x1cb826){return _0x2775eb(_0x5a2a9b-0x1bf,_0x2ba038,_0x2ba038-0x9,_0x282ba3- -0x92);}_0x1ff0e9[_0x49afd2(0x39,-0xb7,-0x15c,-0x9a)](_0x1dba9b,new Error(_0x1ff0e9['qicHl']));},_0x104ff4);}else _0x5848ad['push'](_0x5a95b8);});}function preprocessTagContent(_0x1ff839){const _0x18fdc2={};_0x18fdc2[_0x2f21af(0x57d,0x571,0x6c0,0x5e0)]=_0x3bdbfb(-0x1b6,-0x1b1,-0x12e,-0x17f),_0x18fdc2[_0x2f21af(0x675,0x4e6,0x6a2,0x5d9)]=_0x2f21af(0x6d4,0x76f,0x7a7,0x6f3);function _0x3bdbfb(_0x175f11,_0x62d169,_0x299fef,_0x5ce70a){return _0x211a88(_0x5ce70a,_0x62d169-0x132,_0x299fef-0x133,_0x175f11- -0x72);}const _0x260ac6=_0x18fdc2;let _0x30b4fa=_0x1ff839['replace'](/:/g,':')['replace'](/,/g,',');function _0x2f21af(_0x1dc0a7,_0x5ad423,_0x3fe1bc,_0x553582){return _0x211a88(_0x1dc0a7,_0x5ad423-0x117,_0x3fe1bc-0x24,_0x553582-0x68c);}return _0x30b4fa=_0x30b4fa['replace'](/下半身NSWebcam:/g,_0x260ac6[_0x2f21af(0x6a2,0x674,0x60d,0x5e0)]),_0x30b4fa=_0x30b4fa[_0x3bdbfb(-0x1d8,-0x15b,-0x1d8,-0x1fb)](/下半身NSFW_背面:/g,_0x3bdbfb(-0x1b6,-0x1bd,-0x292,-0x27e)),_0x30b4fa=_0x30b4fa[_0x3bdbfb(-0x1d8,-0x286,-0x127,-0x2a0)](/上半身NSFW_背面:/g,_0x260ac6[_0x2f21af(0x600,0x6c9,0x630,0x5d9)]),_0x30b4fa;}function parseCharacterData(_0x329d33){const _0x3ccefe={};_0x3ccefe[_0x2b8f50(0x29,0xa2,-0x17,0x8a)]='outfit',_0x3ccefe[_0x2b8f50(0x124,0x93,0x43,0x1ec)]=_0x2b8f50(0x1c8,0x134,0x2a2,0x22b)+'+$',_0x3ccefe[_0x2b8f50(0x1c5,0x114,0x123,0x1fb)]='LLM\x20返回结果为空',_0x3ccefe[_0x2910d9(0x255,0x1a0,0x230,0x1e7)]=_0x2910d9(0x168,0x1c3,0x257,0x115),_0x3ccefe[_0x2b8f50(0x107,0xcc,0x179,0x18a)]=_0x2910d9(0xed,0x197,0x1ba,0x16e);function _0x2b8f50(_0x258f11,_0x244b03,_0x3ce6d0,_0xb2cdc9){return _0x211a88(_0x244b03,_0x244b03-0x25,_0x3ce6d0-0x15c,_0x258f11-0x19a);}_0x3ccefe['wxkFv']=_0x2b8f50(0x7b,0x9,0x1d,-0x67)+'raits',_0x3ccefe[_0x2910d9(0xab,0x109,0x171,0xe4)]=_0x2910d9(0x5b,0xce,0x11,0x15b)+_0x2910d9(-0x10,0x91,0x2,-0x45),_0x3ccefe[_0x2910d9(-0x67,0x8a,-0x28,0xb6)]='facialFeat'+_0x2910d9(0x11e,0x13e,0x11d,0xaa),_0x3ccefe[_0x2b8f50(0x94,-0x34,0x51,-0x60)]=_0x2b8f50(0xb5,-0x43,0x3a,0xd3)+'FW',_0x3ccefe[_0x2910d9(0x1a8,0xc4,0x1af,0x40)]=_0x2b8f50(0x52,0x29,0x117,-0x22)+_0x2910d9(0x166,0x11b,0x106,0x210),_0x3ccefe[_0x2b8f50(0x64,-0x70,0x90,0x7a)]=_0x2910d9(0x5f,0x2b,-0x63,-0x6f)+'SFW',_0x3ccefe[_0x2910d9(0x1f5,0x129,0x1b2,0x183)]=_0x2910d9(-0x85,0x2b,0x98,0xc4)+_0x2910d9(0x5c,0x8,0xa0,-0x1e),_0x3ccefe['TqMSQ']='fullBodyNS'+_0x2b8f50(0x2b,0x3e,0x98,-0x5d),_0x3ccefe['abANk']=function(_0x14abb2,_0x35b875){return _0x14abb2!==_0x35b875;},_0x3ccefe[_0x2b8f50(0xa1,0x15c,0x134,0x98)]=_0x2b8f50(0x4d,-0x44,0x41,0x5a),_0x3ccefe['tJCAi']=function(_0x9cb358,_0x13a65e){return _0x9cb358+_0x13a65e;},_0x3ccefe['DkJDX']=function(_0x4ce958,_0x59ed00){return _0x4ce958&&_0x59ed00;},_0x3ccefe[_0x2b8f50(0x33,0x10b,-0x28,0x38)]='qsKDY',_0x3ccefe['ZNPOA']=_0x2910d9(0x270,0x1df,0x190,0x1b6);const _0x428211=_0x3ccefe,_0xb4bc24=_0x329d33[_0x2b8f50(0x1c9,0x125,0x20f,0x157)]('\x0a')[_0x2910d9(0x45,0xab,0x18e,0x10)](_0x1cdd32=>_0x1cdd32['trim']())[_0x2b8f50(0xc9,0x42,0x6d,0x1ba)](_0x1868b2=>_0x1868b2),_0x2a06ff={};_0x2a06ff['nameCN']='',_0x2a06ff[_0x2910d9(0x233,0x197,0xe7,0xc8)]='',_0x2a06ff[_0x2b8f50(0x7b,0xda,0x89,-0x64)+_0x2910d9(-0x56,0xb,0xef,-0x7e)]='',_0x2a06ff[_0x2910d9(0x157,0xce,0xf7,0x17d)+_0x2910d9(-0x24,0x91,0x127,0xeb)]='',_0x2a06ff[_0x2910d9(0xdc,0xce,0xea,0x62)+_0x2910d9(0x95,0x13e,0xa4,0x148)]='',_0x2a06ff['upperBodyS'+'FW']='',_0x2a06ff[_0x2b8f50(0xb5,0xbb,0xf4,0x19f)+_0x2b8f50(0x2b,-0x63,-0xaf,0x84)]='',_0x2a06ff['fullBodySF'+'W']='',_0x2a06ff[_0x2910d9(0x9a,0x3a,-0xb9,0x16)+'WBack']='';function _0x2910d9(_0x5dc9d6,_0x1718e1,_0x5dedcc,_0x2e31ef){return _0x211a88(_0x2e31ef,_0x1718e1-0x121,_0x5dedcc-0xb6,_0x1718e1-0x182);}_0x2a06ff[_0x2b8f50(0x43,-0x68,-0x15,-0x2c)+_0x2b8f50(0xf7,0x146,0x13f,0x14a)]='',_0x2a06ff[_0x2910d9(0x4,0x2b,0x91,0x77)+_0x2910d9(0xca,0x8,-0x9e,0x48)]='',_0x2a06ff[_0x2910d9(0xf2,0x1c6,0x179,0xee)+'FW']='',_0x2a06ff[_0x2910d9(0x1d8,0x1c6,0x13f,0x20c)+_0x2910d9(-0xe0,0x13,0x13,0xed)]='';const _0x28e3ec=_0x2a06ff,_0x5265fe={};_0x5265fe['中文名称']=_0x428211[_0x2910d9(0x279,0x1a0,0x132,0x245)],_0x5265fe[_0x2b8f50(0xa8,0xa1,0x173,0x19e)]=_0x428211[_0x2b8f50(0x107,0x191,0x2f,0xf4)],_0x5265fe['角色特征']=_0x428211[_0x2b8f50(0x1ce,0x29a,0x184,0x1dd)],_0x5265fe['五官外貌']=_0x428211['ynmWc'],_0x5265fe[_0x2b8f50(0x19b,0x1f6,0xd4,0x227)]=_0x428211[_0x2910d9(0x140,0x8a,0x82,0x31)],_0x5265fe[_0x2b8f50(0x1be,0x1e6,0x1ff,0x1ef)]=_0x428211['MBByT'],_0x5265fe['上半身SFW背面']='upperBodyS'+'FWBack',_0x5265fe[_0x2910d9(0xb9,0x15a,0x24d,0x182)]=_0x2b8f50(0x52,0x54,0x141,0x119)+'W',_0x5265fe['下半身SFW背面']=_0x428211[_0x2b8f50(0xdc,0x19c,0xc3,0x18d)],_0x5265fe[_0x2910d9(0xf4,0x8e,-0x41,0x122)]=_0x428211[_0x2b8f50(0x64,0xca,-0x88,0x11b)],_0x5265fe[_0x2910d9(0x13e,0x9c,0xf7,0x6)]=_0x428211[_0x2b8f50(0x141,0x134,0xd1,0x236)],_0x5265fe['下半身NSFW']=_0x2b8f50(0x1de,0x22d,0x1cc,0x2be)+'FW',_0x5265fe['下半身NSFW背面']=_0x428211[_0x2910d9(0xc8,0x101,0x81,0xe8)];const _0x5d3144=_0x5265fe;for(const _0x2d27aa of _0xb4bc24){if(_0x428211[_0x2b8f50(0x206,0x136,0x136,0x171)](_0x428211['pVpeK'],_0x428211['pVpeK'])){const _0x4000a7={};_0x4000a7['type']=_0x428211[_0x2910d9(0xc1,0x11,-0x22,0x46)],_0x4000a7['data']=_0x27eec2,_0x4000a7['position']=_0x435e69,_0xa0e7eb[_0x2b8f50(0x140,0xd2,0xe7,0xa1)](_0x4000a7);}else{const _0x8fe8a7=_0x2d27aa[_0x2b8f50(0x145,0xfc,0x12f,0xd7)](':');if(_0x8fe8a7===-(-0x1f63+-0x1dd8+0x3d3c))continue;const _0x487a7d=_0x2d27aa[_0x2b8f50(0x1e8,0x12d,0x13c,0x1d7)](0x6*0x2d4+-0x235*0x3+-0xa59,_0x8fe8a7)['trim'](),_0x5e0ce2=_0x2d27aa[_0x2910d9(0x120,0x1d0,0x17f,0x1d3)](_0x428211['tJCAi'](_0x8fe8a7,-0x2164+-0x242+0x23a7))['trim']();if(_0x5d3144[_0x487a7d])_0x28e3ec[_0x5d3144[_0x487a7d]]=_0x5e0ce2;else{if(_0x428211[_0x2910d9(-0x70,0x80,-0x6f,-0x1)](_0x487a7d,_0x5e0ce2)){if(_0x428211[_0x2b8f50(0x206,0x230,0x12a,0x290)](_0x428211[_0x2b8f50(0x33,-0x62,-0x86,-0x34)],_0x428211[_0x2b8f50(0x33,0x27,0xc5,0x69)]))return _0x27f506[_0x2910d9(0x42,0x3b,-0xad,0xf1)]()[_0x2b8f50(0x3a,0x123,0x116,0x45)](ZuGuXf[_0x2910d9(0x95,0x10c,0x1e5,0x112)])[_0x2910d9(0xce,0x3b,0x33,0x49)]()[_0x2910d9(0x14d,0xd2,0x1b5,0x7a)+'r'](_0x24ca99)[_0x2910d9(0xf,0x22,-0x25,0x40)]('(((.+)+)+)'+'+$');else console['log'](_0x2b8f50(0x1e1,0x244,0x1a4,0x1a3)+_0x2910d9(0xeb,0x16b,0x111,0x91)+_0x2b8f50(0x1dc,0x1ac,0x134,0x133)+_0x2b8f50(0x118,0x108,0x1b2,0x207)+_0x487a7d+'\x22');}}}}if(!_0x28e3ec[_0x2910d9(0x12e,0x1c3,0xeb,0x11d)]){if(_0x428211[_0x2b8f50(0x206,0x214,0x153,0x117)](_0x2910d9(0x192,0x1df,0x2a0,0x215),_0x428211[_0x2910d9(0xcd,0x2e,0x21,0x2e)])){_0x32eb0c['error'](_0x428211[_0x2910d9(0x23d,0x1ad,0x150,0x29a)]);return;}else return null;}return console[_0x2910d9(0xf2,0x78,0x126,-0x4a)]('[character'+_0x2910d9(0x9b,0x16b,0x1cb,0x1b1)+_0x2b8f50(0x1fc,0x1f3,0x191,0x1be)+_0x2910d9(0x84,0x6c,0x14d,0xe0),_0x28e3ec),_0x28e3ec;}function _0x123e(_0x2a9136,_0x5b467a){_0x2a9136=_0x2a9136-(-0x236c+-0x12e1+0x1*0x3786);const _0x3c679d=_0x3202();let _0x576b5c=_0x3c679d[_0x2a9136];if(_0x123e['HbRnCL']===undefined){var _0x112a0b=function(_0x590b61){const _0x108b97='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x922f7e='',_0x3f5982='',_0x4ac655=_0x922f7e+_0x112a0b;for(let _0x23dbba=-0x608*0x4+-0x1eef+0x370f,_0x5a7f29,_0x7fdc65,_0x43feeb=0x161+-0x1dfc+0x1c9b;_0x7fdc65=_0x590b61['charAt'](_0x43feeb++);~_0x7fdc65&&(_0x5a7f29=_0x23dbba%(-0x133a+-0xee2*0x2+0x3102)?_0x5a7f29*(0xa78+-0x62+-0x9d6*0x1)+_0x7fdc65:_0x7fdc65,_0x23dbba++%(0xa*-0x3a+0x39*-0x9d+0x253d))?_0x922f7e+=_0x4ac655['charCodeAt'](_0x43feeb+(-0x15a9+-0x121*0x14+0x2c47))-(-0x178f+0x1ca+0x3*0x745)!==-0x18*-0x189+-0x6*-0x336+-0xc*0x4ad?String['fromCharCode'](-0x2fa*0x3+-0x7b9*-0x2+-0x1d7*0x3&_0x5a7f29>>(-(0x7*-0x13a+-0x18f8+0x2190)*_0x23dbba&-0x25cd+0x21f4*-0x1+0x47c7)):_0x23dbba:-0x26*-0xd3+-0x71b+-0x1837){_0x7fdc65=_0x108b97['indexOf'](_0x7fdc65);}for(let _0x5e8227=0x1876+-0x391*-0x9+-0x388f,_0x3a510f=_0x922f7e['length'];_0x5e8227<_0x3a510f;_0x5e8227++){_0x3f5982+='%'+('00'+_0x922f7e['charCodeAt'](_0x5e8227)['toString'](0x4*-0x53c+0x2b0+0x1250))['slice'](-(-0x9*0x284+0x19eb+-0x345));}return decodeURIComponent(_0x3f5982);};_0x123e['nXmwcv']=_0x112a0b,_0x123e['hRwlLq']={},_0x123e['HbRnCL']=!![];}const _0x82a4ca=_0x3c679d[0xdce+0x21c1+-0x983*0x5],_0x51e140=_0x2a9136+_0x82a4ca,_0x2f5ffe=_0x123e['hRwlLq'][_0x51e140];if(!_0x2f5ffe){const _0xc6b01c=function(_0x402fda){this['LeRtHD']=_0x402fda,this['uLkvYI']=[-0x1319*0x1+-0x1*0x24dd+0x37f7,0x270b+-0x17b0+-0x1*0xf5b,0x1c56*0x1+0x263c+-0x4292*0x1],this['gnTGIs']=function(){return'newState';},this['vfKbRw']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['gPWcCR']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0xc6b01c['prototype']['XvTYvi']=function(){const _0xd366ae=new RegExp(this['vfKbRw']+this['gPWcCR']),_0x3de08f=_0xd366ae['test'](this['gnTGIs']['toString']())?--this['uLkvYI'][0x1dfe+0x6b9*-0x5+0x3a0]:--this['uLkvYI'][-0x13*0x11b+-0x2030+-0x1*-0x3531];return this['KaxHyU'](_0x3de08f);},_0xc6b01c['prototype']['KaxHyU']=function(_0x35fb1a){if(!Boolean(~_0x35fb1a))return _0x35fb1a;return this['qBaBHM'](this['LeRtHD']);},_0xc6b01c['prototype']['qBaBHM']=function(_0x115e0e){for(let _0x2355d3=-0x1574+0x16c3+0x43*-0x5,_0x3bf706=this['uLkvYI']['length'];_0x2355d3<_0x3bf706;_0x2355d3++){this['uLkvYI']['push'](Math['round'](Math['random']())),_0x3bf706=this['uLkvYI']['length'];}return _0x115e0e(this['uLkvYI'][-0x9a4+0xad3+-0x1*0x12f]);},new _0xc6b01c(_0x123e)['XvTYvi'](),_0x576b5c=_0x123e['nXmwcv'](_0x576b5c),_0x123e['hRwlLq'][_0x51e140]=_0x576b5c;}else _0x576b5c=_0x2f5ffe;return _0x576b5c;}function parseOutfitData(_0x251232){const _0x4f7928={};function _0x5660ac(_0xa10955,_0x387c8d,_0x2f8e00,_0x561bb9){return _0x211a88(_0xa10955,_0x387c8d-0x93,_0x2f8e00-0x15a,_0x387c8d-0x485);}_0x4f7928[_0x17fc17(0x374,0x33e,0x2cc,0x3b6)]=function(_0x28bbb2,_0xfc110c){return _0x28bbb2===_0xfc110c;},_0x4f7928[_0x5660ac(0x3ed,0x4a2,0x406,0x3ee)]=_0x17fc17(0x2f0,0x387,0x2ce,0x377),_0x4f7928[_0x17fc17(0x368,0x321,0x291,0x352)]=function(_0x27b916,_0x2b98b2){return _0x27b916+_0x2b98b2;},_0x4f7928[_0x5660ac(0x414,0x337,0x405,0x379)]=_0x5660ac(0x3fa,0x3ef,0x36b,0x468),_0x4f7928['ixzWs']=_0x5660ac(0x4eb,0x417,0x4d4,0x487),_0x4f7928[_0x17fc17(0x1f0,0x2b5,0x22a,0x15b)]=_0x17fc17(0x1de,0x2a5,0x29c,0x2b2),_0x4f7928[_0x17fc17(0x27e,0x2d1,0x295,0x235)]='auto',_0x4f7928['oCqxs']=_0x5660ac(0x331,0x400,0x44a,0x446),_0x4f7928['JWYFx']=_0x5660ac(0x409,0x4c6,0x474,0x46a),_0x4f7928['tqpTB']='upperBodyB'+_0x17fc17(0x294,0x211,0x2c7,0x3af),_0x4f7928[_0x17fc17(0x26e,0x1c0,0x283,0x270)]=_0x5660ac(0x2fb,0x378,0x407,0x383),_0x4f7928[_0x5660ac(0x3fb,0x3a6,0x398,0x424)]='fullBodyBa'+'ck',_0x4f7928[_0x17fc17(0xe4,0xef,0x161,0x131)]=function(_0x454f1c,_0x26bba5){return _0x454f1c+_0x26bba5;},_0x4f7928['WDBdo']=_0x5660ac(0x438,0x3f9,0x3af,0x346),_0x4f7928['qoSqc']=_0x17fc17(0x185,0x253,0x1a2,0x104),_0x4f7928[_0x5660ac(0x2f4,0x3de,0x405,0x3bc)]='[character'+_0x17fc17(0x2b3,0x256,0x245,0x212)+'fy]\x20解析到的服装'+_0x17fc17(0x1ce,0x5e,0x146,0x134);const _0x4318c9=_0x4f7928;function _0x17fc17(_0x430ca8,_0x4c520a,_0x23d7e5,_0x8c3eae){return _0x211a88(_0x430ca8,_0x4c520a-0x8c,_0x23d7e5-0x4a,_0x23d7e5-0x25c);}const _0x45ddd2=_0x251232['split']('\x0a')[_0x5660ac(0x49e,0x3ae,0x2f4,0x424)](_0x57ab66=>_0x57ab66[_0x5660ac(0x4ce,0x3e7,0x48d,0x330)]())[_0x17fc17(0x16e,0x117,0x18b,0x21d)](_0x4eb549=>_0x4eb549),_0x1de8ed={};_0x1de8ed[_0x5660ac(0x3f2,0x4c6,0x4da,0x468)]='',_0x1de8ed[_0x17fc17(0x367,0x321,0x271,0x2c1)]='',_0x1de8ed[_0x17fc17(0x16a,0x2aa,0x1d7,0x263)]='',_0x1de8ed[_0x5660ac(0x4b4,0x3c9,0x2f3,0x376)]='',_0x1de8ed[_0x5660ac(0x440,0x3be,0x30c,0x315)+_0x5660ac(0x581,0x4f0,0x3fd,0x4b3)]='',_0x1de8ed[_0x5660ac(0x2fe,0x378,0x461,0x367)]='',_0x1de8ed[_0x17fc17(0x22e,0x182,0x13e,0x208)+'ck']='';const _0x3c2211=_0x1de8ed,_0x2ed4b5={};_0x2ed4b5[_0x5660ac(0x442,0x38b,0x426,0x3c0)]=_0x4318c9['oCqxs'],_0x2ed4b5[_0x17fc17(0x155,0x15f,0x23f,0x1b6)]=_0x4318c9[_0x5660ac(0x51c,0x44c,0x4bc,0x407)],_0x2ed4b5[_0x17fc17(0x18c,0x23b,0x16a,0xe9)]=_0x5660ac(0x4dc,0x49a,0x473,0x56d),_0x2ed4b5[_0x5660ac(0x4e6,0x4cf,0x5ba,0x51c)]=_0x5660ac(0x3fc,0x3c9,0x2e8,0x324),_0x2ed4b5[_0x17fc17(0x1d9,0x22c,0x22c,0x21a)]=_0x4318c9[_0x17fc17(0x10d,0x2c,0x123,0x1b1)],_0x2ed4b5[_0x5660ac(0x369,0x364,0x381,0x418)]=_0x4318c9[_0x17fc17(0x2fb,0x1cd,0x283,0x20d)],_0x2ed4b5[_0x5660ac(0x39e,0x48a,0x4dd,0x497)]=_0x4318c9['eQsKU'];const _0x4bced8=_0x2ed4b5;for(const _0x2b1a9d of _0x45ddd2){const _0x374d22=_0x2b1a9d['indexOf'](':');if(_0x4318c9[_0x5660ac(0x48c,0x4f5,0x4dc,0x537)](_0x374d22,-(0x52b*0x3+0x4e0+-0x1460)))continue;const _0x72141e=_0x2b1a9d[_0x17fc17(0x1db,0x3a0,0x2aa,0x33b)](0xdea*-0x1+-0x156d*0x1+-0x6d*-0x53,_0x374d22)[_0x5660ac(0x4dd,0x3e7,0x439,0x308)](),_0x555cff=_0x2b1a9d[_0x5660ac(0x4f2,0x4d3,0x4d1,0x4f9)](_0x4318c9[_0x5660ac(0x40e,0x38a,0x38c,0x300)](_0x374d22,0x24de+0x2177*-0x1+0x1*-0x366))[_0x5660ac(0x3a3,0x3e7,0x35a,0x4d8)]();if(_0x4bced8[_0x72141e])_0x3c2211[_0x4bced8[_0x72141e]]=_0x555cff;else _0x72141e&&_0x555cff&&console[_0x5660ac(0x32d,0x37b,0x2f6,0x2bc)]('[character'+_0x17fc17(0x19d,0x23f,0x245,0x2a1)+_0x17fc17(0x21d,0x139,0x160,0xdf)+_0x17fc17(0x185,0x19e,0x1da,0x2b3)+_0x72141e+'\x22');}if(!_0x3c2211[_0x5660ac(0x551,0x4c6,0x4cf,0x59c)]){if(_0x4318c9[_0x17fc17(0x34a,0x23c,0x2cc,0x1e9)](_0x4318c9['WDBdo'],_0x4318c9['qoSqc'])){const _0x242ff8=_0x4318c9[_0x17fc17(0x209,0x25f,0x2cc,0x370)](typeof _0x35fb1a,_0x17fc17(0x103,0x233,0x1ea,0x20a))?_0x115e0e:_0x2355d3[_0x17fc17(0x210,0x204,0x155,0x238)],_0x4c5333=typeof _0x3bf706===_0x4318c9['groJR']&&_0x47210f[_0x5660ac(0x3bf,0x372,0x45c,0x31e)]?_0x22e171[_0x17fc17(0x55,0x1a0,0x149,0x5d)]:''+_0x11a57d+_0x4318c9[_0x5660ac(0x4fd,0x4ba,0x3da,0x4b8)](_0x58be57,-0x1c4b+-0x1645*-0x1+0x1*0x607),_0x356709={};_0x356709[_0x17fc17(0x22f,0x2bc,0x24f,0x33f)]=_0x4318c9['txGKG'],_0x356709[_0x17fc17(0x22a,0x19e,0x1c6,0x242)]='['+_0x4c5333+']',_0x1883f[_0x5660ac(0x364,0x42b,0x519,0x4ce)](_0x356709);let _0x7a1630=_0x242ff8;!_0x242ff8[_0x17fc17(0x19f,0x203,0x111,0x87)](_0x4318c9[_0x17fc17(0x258,0x210,0x208,0x1f4)])&&(_0x7a1630='data:image'+_0x5660ac(0x3f6,0x42e,0x442,0x370)+'4,'+_0x242ff8);const _0x3f3692={};_0x3f3692[_0x17fc17(0x25b,0x182,0x24f,0x2d1)]=_0x4318c9[_0x5660ac(0x4b6,0x453,0x3b7,0x3d6)],_0x3f3692[_0x5660ac(0x568,0x4c5,0x5a4,0x49d)]={},_0x3f3692[_0x5660ac(0x568,0x4c5,0x5a4,0x49d)]['url']=_0x7a1630,_0x3f3692[_0x5660ac(0x568,0x4c5,0x5a4,0x49d)][_0x5660ac(0x346,0x3df,0x422,0x3a3)]=_0x4318c9[_0x5660ac(0x549,0x4be,0x539,0x589)],_0x3099e8['push'](_0x3f3692);}else return null;}return console[_0x5660ac(0x2ab,0x37b,0x29a,0x366)](_0x4318c9[_0x17fc17(0x123,0x19f,0x1b5,0x16d)],_0x3c2211),_0x3c2211;}function extractCharacterAndOutfitTags(_0x1549f1){const _0x429805={'cRWMs':function(_0x297b24,_0x58dd33){return _0x297b24!==_0x58dd33;},'TNVhd':function(_0x244fce){return _0x244fce();},'iEABv':function(_0x22bc39,_0x338964){return _0x22bc39(_0x338964);},'tcQMe':'LLM\x20请求失败','MCCJp':function(_0x30ee4d,_0x1864a3){return _0x30ee4d!==_0x1864a3;},'BwGjt':function(_0xbade72,_0x4f2a03){return _0xbade72!==_0x4f2a03;},'zOfcX':_0x2ee90e(0x11a,0x14c,0xd9,0x92),'FZtOM':_0x2ee90e(-0xde,-0x37,-0x3e,-0x8),'DQrKO':function(_0x2aafdb,_0x386e4a){return _0x2aafdb(_0x386e4a);},'NNhyR':_0x2ee90e(-0xe6,-0x93,0x39,0x4),'cuQDv':function(_0x24b410,_0x962d16){return _0x24b410===_0x962d16;},'sacoh':function(_0x12deed,_0x186739){return _0x12deed===_0x186739;},'ddrwt':'Kbmnj','DaWqe':'outfit','emdBg':_0x187f78(0x279,0x348,0x25f,0x1bb),'ghoWK':'ovqJx','geiFA':function(_0x434abf,_0x3273b4){return _0x434abf===_0x3273b4;},'jegRs':'pwWFm','uuZUK':_0x187f78(0x29d,0x391,0x272,0x377)},_0xa160=[];_0x1549f1=_0x1549f1[_0x187f78(0x175,0x128,0x231,0xf4)](/<thinking>[\s\S]*?<\/thinking>/gi,'')[_0x2ee90e(0x4b,0xbd,-0x72,0xf)]();const _0x3a8851=/<(人物|服装)>([\s\S]*?)<\/\1>/g;function _0x187f78(_0x1100d3,_0x5b955b,_0x4ac704,_0x7f4136){return _0x211a88(_0x5b955b,_0x5b955b-0x9c,_0x4ac704-0x1d6,_0x1100d3-0x2db);}let _0x1ea0f8;function _0x2ee90e(_0x147139,_0x5dc2c9,_0x29b643,_0x131b6d){return _0x211a88(_0x147139,_0x5dc2c9-0x1db,_0x29b643-0x153,_0x131b6d-0xad);}while(_0x429805[_0x187f78(0x19a,0x116,0x1b7,0x240)](_0x1ea0f8=_0x3a8851['exec'](_0x1549f1),null)){if(_0x429805['BwGjt'](_0x429805[_0x187f78(0x327,0x338,0x3cf,0x312)],_0x429805[_0x187f78(0x2ca,0x2f9,0x234,0x26c)])){const _0x56c8d8=_0x1ea0f8[-0x5*-0x416+0x2*0xb1+-0x15cf],_0x4fefba=preprocessTagContent(_0x1ea0f8[0x1835+0x635+0x22c*-0xe]),_0x7d9d74=_0x1ea0f8[_0x2ee90e(0xd5,0x145,0xdc,0x111)];if(_0x56c8d8==='人物'){const _0x360a84=_0x429805[_0x2ee90e(-0xcf,-0x71,-0xd,-0xcc)](parseCharacterData,_0x4fefba);if(_0x360a84){const _0x4d465e={};_0x4d465e['type']=_0x429805[_0x187f78(0x2d2,0x2ef,0x254,0x2ce)],_0x4d465e[_0x187f78(0x2f4,0x364,0x2c9,0x2bf)]=_0x360a84,_0x4d465e[_0x187f78(0x26b,0x2be,0x2e3,0x28c)]=_0x7d9d74,_0x4d465e[_0x2ee90e(0x13d,0x131,-0x9,0x4c)+_0x2ee90e(0x1c3,0x1c6,0x1d5,0x11b)]=[],_0xa160['push'](_0x4d465e);}}else{if(_0x429805[_0x2ee90e(0xef,0x5d,0x11e,0x75)](_0x56c8d8,'服装')){const _0xc6a51e=_0x429805[_0x187f78(0x162,0x10c,0x145,0xbe)](parseOutfitData,_0x4fefba);if(_0xc6a51e){if(_0x429805[_0x187f78(0x31e,0x24f,0x3e6,0x23d)](_0x429805[_0x187f78(0x25c,0x314,0x2d2,0x34d)],'Kbmnj')){const _0x304ae1={};_0x304ae1['type']=_0x429805[_0x187f78(0x2ea,0x3b5,0x20b,0x2e8)],_0x304ae1['data']=_0xc6a51e,_0x304ae1['position']=_0x7d9d74,_0xa160[_0x2ee90e(-0x27,0x4f,0xf7,0x53)](_0x304ae1);}else{if(_0x429805[_0x187f78(0x1a1,0x23b,0xd7,0x113)](_0x1aaf9c['id'],_0x4071f3))return;_0x429805[_0x2ee90e(0x13e,0x130,0x6a,0xc5)](_0x48196a),_0x12a318['success']?_0x429805['iEABv'](_0x22a29d,_0x5f5096[_0x187f78(0x2cf,0x36e,0x215,0x25b)]):_0x46d5c5(new _0x506f0f(_0x195f39[_0x2ee90e(0x7e,0x48,-0x53,0xa1)]||_0x429805[_0x2ee90e(-0x33,-0x10e,-0x116,-0x50)]));}}}}}else{if(_0x2df7d9){const _0x209e23=_0x12eec5[_0x187f78(0x216,0x12f,0x1fb,0x1bb)](_0x31dedb,arguments);return _0x166699=null,_0x209e23;}}}_0xa160[_0x2ee90e(0x58,0x2a,0xd0,0xfa)]((_0x121361,_0xf96377)=>_0x121361[_0x2ee90e(0x8b,0xe0,0x2,0x3d)]-_0xf96377[_0x187f78(0x26b,0x206,0x1f8,0x2c4)]);let _0x35f8b0=null;const _0x374ac1=[],_0x265a41=[];for(const _0x4e1d14 of _0xa160){if(_0x429805['emdBg']===_0x429805['ghoWK'])return _0x1c697b;else{if(_0x4e1d14['type']===_0x429805['NNhyR'])_0x35f8b0=_0x4e1d14,_0x374ac1['push'](_0x4e1d14);else _0x4e1d14[_0x2ee90e(0x16c,0x139,-0x2,0xa0)]===_0x187f78(0x2d0,0x31c,0x312,0x1e2)&&(_0x35f8b0?_0x429805['geiFA'](_0x429805[_0x2ee90e(0x113,0x108,-0x2b,0x2d)],_0x429805['jegRs'])?_0x35f8b0[_0x187f78(0x27a,0x1ef,0x30c,0x363)+_0x2ee90e(0x52,0x197,0x191,0x11b)][_0x2ee90e(-0x1a,-0x3,0x8,0x53)](_0x4e1d14[_0x187f78(0x2f4,0x24a,0x336,0x2fc)]):_0x5e9cc5=_0x2ee90e(-0x151,-0x74,0x8,-0xc6)+'被使用：'+[..._0x2ff1c3]['join']('、')+'\x0a':_0x429805[_0x2ee90e(0xa,0xc7,0x2b,0x2a)]===_0x429805[_0x187f78(0x258,0x228,0x1b3,0x2da)]?_0x265a41[_0x187f78(0x281,0x1e3,0x1f5,0x2bc)](_0x4e1d14[_0x187f78(0x2f4,0x29a,0x249,0x27c)]):_0x46f2c3(_0x4a9e31[_0x187f78(0x2cf,0x31f,0x30e,0x1dc)]));}}return{'characters':_0x374ac1[_0x187f78(0x204,0x16f,0x20d,0x1e2)](_0x47f91f=>({..._0x47f91f[_0x2ee90e(0x17b,0xe6,0xe9,0xc6)],'matchedOutfits':_0x47f91f['matchedOut'+_0x2ee90e(0x7e,0x7b,0x199,0x11b)]})),'outfits':_0x265a41};}function getCurrentCharacterPreset(){const _0x48a29b=extension_settings[extensionName],_0x12c129=_0x48a29b[_0x4e3c80(0x56e,0x4db,0x4f8,0x5d3)+_0x8e1201(0x566,0x4ae,0x450,0x46e)];function _0x8e1201(_0x4cb214,_0x196082,_0x2f88dc,_0x360647){return _0x211a88(_0x360647,_0x196082-0x183,_0x2f88dc-0x12c,_0x196082-0x4dd);}if(!_0x12c129||!_0x48a29b['characterP'+_0x8e1201(0x4ad,0x41e,0x503,0x404)][_0x12c129])return null;function _0x4e3c80(_0x3f49e5,_0x355871,_0x46cdcf,_0x55eb79){return _0x211a88(_0x355871,_0x355871-0x16a,_0x46cdcf-0x50,_0x3f49e5-0x602);}const _0x45f1a6={};return _0x45f1a6['id']=_0x12c129,_0x45f1a6[_0x8e1201(0x4bd,0x4f6,0x46e,0x425)]=_0x48a29b['characterP'+_0x4e3c80(0x543,0x5ea,0x5be,0x4f0)][_0x12c129],_0x45f1a6;}function buildCharacterText(_0x4ae3e2){const _0xc8e5af={};_0xc8e5af[_0x20d11c(0x494,0x367,0x3ed,0x407)]=_0x37ccc6(0x58,0x14,-0x4d,-0x35);const _0x126792=_0xc8e5af,_0x387ecb=_0x4ae3e2['data'];let _0xe91462=_0x126792['MRGii'];_0xe91462+='中文名称:\x20'+(_0x387ecb[_0x20d11c(0x624,0x4be,0x681,0x597)]||'')+'\x0a',_0xe91462+=_0x20d11c(0x5b2,0x52c,0x594,0x4cf)+(_0x387ecb[_0x37ccc6(0xf7,0x122,0x123,0x2b)]||'')+'\x0a',_0xe91462+=_0x37ccc6(0x9b,0xb5,0x122,0xe1)+(_0x387ecb[_0x37ccc6(-0x3d,0x45,0xab,0x25)+_0x20d11c(0x3cb,0x48c,0x2f7,0x3df)]||'')+'\x0a',_0xe91462+=_0x37ccc6(0x78,0x2b,0x61,0x11e)+(_0x387ecb[_0x20d11c(0x440,0x3af,0x569,0x4a2)+'ures']||'')+'\x0a',_0xe91462+='五官外貌背面:\x20'+(_0x387ecb[_0x37ccc6(0x2e,0x0,0x1f,0x93)+_0x37ccc6(0x9e,0x17,0xa3,0x110)]||'')+'\x0a',_0xe91462+=_0x37ccc6(0xa8,-0x42,-0x28,-0x50)+(_0x387ecb['upperBodyS'+'FW']||'')+'\x0a',_0xe91462+=_0x20d11c(0x494,0x522,0x435,0x49e)+(_0x387ecb['upperBodyS'+_0x20d11c(0x495,0x40e,0x4be,0x3e7)]||'')+'\x0a';function _0x37ccc6(_0x2a2e22,_0x5eca0b,_0x1ea3ba,_0x4edbc2){return _0x211a88(_0x5eca0b,_0x5eca0b-0x38,_0x1ea3ba-0x94,_0x2a2e22-0xe2);}_0xe91462+=_0x37ccc6(-0x35,0x4,0x30,0x8c)+(_0x387ecb[_0x20d11c(0x37a,0x489,0x3e4,0x40e)+'W']||'')+'\x0a',_0xe91462+=_0x20d11c(0x4d2,0x3db,0x3f0,0x43e)+(_0x387ecb[_0x20d11c(0x384,0x3de,0x410,0x40e)+_0x37ccc6(0x7b,0x7b,0x16c,0x117)]||'')+'\x0a',_0xe91462+=_0x37ccc6(0x29,-0x59,0x10e,-0xba)+(_0x387ecb['upperBodyN'+_0x37ccc6(0x3f,0x6d,-0x5f,0xe0)]||'')+'\x0a',_0xe91462+=_0x37ccc6(0x149,0x92,0x101,0x187)+'\x20'+(_0x387ecb['upperBodyN'+'SFWBack']||'')+'\x0a';function _0x20d11c(_0x170d1b,_0x268111,_0x33ec20,_0x4fb39c){return _0x211a88(_0x268111,_0x268111-0xf9,_0x33ec20-0x86,_0x4fb39c-0x556);}return _0xe91462+='下半身NSFW:\x20'+(_0x387ecb[_0x20d11c(0x645,0x58e,0x624,0x59a)+'FW']||'')+'\x0a',_0xe91462+=_0x20d11c(0x481,0x32e,0x489,0x412)+'\x20'+(_0x387ecb['fullBodyNS'+_0x37ccc6(-0x8d,-0x139,-0xb2,-0x7c)]||'')+'\x0a',_0xe91462+=_0x20d11c(0x53e,0x39e,0x482,0x492),_0xe91462;}export async function handleCharacterPromptModify(_0x41cc41,_0x15be1d=[]){const _0x5e588e={'pTmwB':_0x438636(0x11a,0xb3,0x9c,0x158),'eQPqo':_0x36adbb(0x204,0x242,0x116,0x188),'BrlSU':function(_0x4edfd8,_0x27d85a){return _0x4edfd8!==_0x27d85a;},'BwOUx':function(_0x4eb729,_0x481b34,_0x4b2401){return _0x4eb729(_0x481b34,_0x4b2401);},'fmJzL':function(_0x14d231,_0x42b651){return _0x14d231(_0x42b651);},'xgNoi':function(_0x5f6e3d,_0x35a54c){return _0x5f6e3d(_0x35a54c);},'gsXsr':'LLM\x20请求失败','BbDoF':_0x36adbb(0x30f,0x27f,0x28c,0x34f)+'PromptModi'+_0x36adbb(0x219,0x271,0x2e3,0x2b1)+'ng\x20charact'+_0x438636(0x99,0xad,0x128,0x59)+_0x438636(-0x12e,-0x6,-0x56,-0x126)+'uest...','PMFnc':_0x36adbb(0x30f,0x336,0x3fb,0x375)+_0x438636(0x202,0x111,0x10f,0xbb)+_0x438636(0x8d,0x14a,0xf0,0x6d)+_0x438636(-0x10e,0x2f,-0x2a,0xc8),'QpZAo':function(_0x33610d){return _0x33610d();},'unklR':function(_0x5e88f9){return _0x5e88f9();},'MtqoR':_0x36adbb(0x2f1,0x34d,0x2df,0x3cf),'XLTYx':'请先选择一个角色预设','yOHwq':_0x438636(0x146,0x25b,0x16d,0x158)+_0x36adbb(0x2b1,0x343,0x26d,0x2be)+'fy]\x20Curren'+_0x438636(-0x4,0x1c,0x5a,0x11f),'INrra':_0x438636(0xdc,0x1fe,0x16d,0xc3)+_0x438636(0x157,0xae,0x10f,0x5f)+_0x36adbb(0x2b0,0x296,0x258,0x2b2)+_0x438636(0x52,0x1c,0xb9,0x10d),'kVoaI':_0x438636(0x8a,0xeb,0x16d,0xba)+_0x36adbb(0x2b1,0x35b,0x27e,0x32d)+'fy]\x20Saved\x20'+'variables:','Wpgej':function(_0x432958,_0x40bd8f){return _0x432958||_0x40bd8f;},'CIrkr':function(_0x1cc9d8,_0x48e01e){return _0x1cc9d8===_0x48e01e;},'sWTRd':_0x36adbb(0x302,0x2cd,0x3a5,0x317),'KnzSt':_0x438636(-0xb6,0x1e,-0x52,-0x16),'HPRYt':_0x438636(0x48,0xc,0x7e,0x175),'jSLkM':_0x438636(0x19a,0x1df,0x16d,0x146)+_0x36adbb(0x2b1,0x37a,0x1ee,0x2a7)+_0x438636(0x110,0x12f,0xc8,-0xd)+_0x438636(0x83,0xd7,0x51,0xf0)+_0x36adbb(0x1de,0x2d4,0x216,0x1e1),'dsUWp':function(_0x5c5d41,_0x5186fa,_0x21a7fb){return _0x5c5d41(_0x5186fa,_0x21a7fb);},'QOsbk':_0x36adbb(0x1f0,0x1bc,0x113,0xf8)+'y','QNhkH':function(_0xa368bb,_0x48f30b){return _0xa368bb(_0x48f30b);},'BEqBD':function(_0x14e37e){return _0x14e37e();},'BjLcW':_0x36adbb(0x30f,0x261,0x240,0x369)+'PromptModi'+_0x438636(-0xa,-0x3,0xc8,0x151)+_0x36adbb(0x1e0,0x136,0x114,0x16e)+_0x36adbb(0x16f,0x113,0x16c,0xde)+'ered):','CvmGg':_0x438636(0x12f,0x16a,0x16d,0x79)+_0x438636(0x49,0x19,0x10f,0x105)+'fy]\x20合并相邻消息'+'后:','sxhcK':'{{用户需求}}','UupJa':_0x438636(0x118,0x192,0x16d,0x200)+_0x36adbb(0x2b1,0x2fd,0x1bd,0x2f9)+_0x36adbb(0x278,0x1c2,0x197,0x317)+_0x438636(0xa9,0xc3,0x85,0xf2)+_0x438636(0x107,0x13f,0x48,0x79)+'ndex:','WiVld':function(_0x8b21df,_0x4580a2,_0x607ceb,_0x26b1e8,_0x854b83){return _0x8b21df(_0x4580a2,_0x607ceb,_0x26b1e8,_0x854b83);},'lNUnS':'{{当前角色}}','aMLvA':_0x36adbb(0x30f,0x2fb,0x319,0x2bf)+'PromptModi'+_0x438636(-0x12f,0x69,-0x3e,-0xc7)+'prompt:','TVaJN':function(_0x4fcdfd,_0x3ae89b){return _0x4fcdfd>_0x3ae89b;},'nQZyy':function(_0x193bee,_0x1752e8){return _0x193bee>_0x1752e8;},'ItrZZ':function(_0x4c1e7b,_0x23729e){return _0x4c1e7b>=_0x23729e;},'ZWxfV':'参考图片','KRbaE':'[character'+_0x438636(0x12e,0x57,0x10f,0x44)+_0x438636(-0x5b,0xde,-0xf,-0x7a)+'ed','kpoPw':'images\x20to\x20'+_0x438636(0xb7,0x176,0x116,0x1e2)+_0x438636(-0x27,0x113,0xbd,-0x2c),'RXVrb':function(_0x2d3d9a,_0x42e902,_0x3e6d82){return _0x2d3d9a(_0x42e902,_0x3e6d82);},'KpPIt':_0x36adbb(0x30f,0x3b2,0x219,0x3f9)+_0x438636(0x122,0x149,0x10f,0xb8)+_0x36adbb(0x1fe,0x2cb,0x291,0x1e8)+_0x36adbb(0x1bc,0x239,0x292,0x2ad),'QJEJm':_0x36adbb(0x22f,0x1e4,0x2f9,0x2d7),'pmlgR':function(_0x46dfc7,_0x5f1b9c){return _0x46dfc7(_0x5f1b9c);},'BxINY':_0x36adbb(0x1a0,0x28a,0x243,0x1cc)+_0x438636(0x27,-0xf,0xd4,-0x10),'cIdUh':'[character'+_0x438636(0x51,0x16a,0x10f,0xfe)+_0x36adbb(0x1df,0x2bc,0x187,0x1cd)+_0x36adbb(0x176,0x1d8,0x8f,0x166)+_0x36adbb(0x2d6,0x27c,0x25b,0x296)+'ound\x20in\x20ou'+_0x438636(0x43,0x179,0x9b,-0x58),'mqJzi':'[character'+_0x36adbb(0x2b1,0x298,0x2e1,0x384)+_0x438636(0xa2,-0x9,-0xe,0x2f)+_0x36adbb(0x1fa,0x2de,0x2ad,0x19d),'oDlqM':function(_0x414e64,_0x403844){return _0x414e64>_0x403844;},'IUvXb':_0x438636(0x1e7,0x1f0,0x105,0x1b),'tuoXJ':_0x438636(-0x6,0x43,0x16,-0xce),'UVZAb':function(_0x5e2abf,_0x119829){return _0x5e2abf(_0x119829);},'ZsHRq':'角色/服装提示词修改'+_0x438636(0xd7,0x168,0x89,-0x64),'jxHSE':_0x438636(0xc4,-0xbd,-0xd,-0xc9),'JqVqo':_0x438636(0x3f,-0x100,-0x26,0x72)};console[_0x36adbb(0x1be,0x138,0x2a5,0x205)](_0x5e588e[_0x438636(0x153,0x159,0xe7,0x129)]);function _0x438636(_0x302157,_0x5a9772,_0x1b0ed7,_0x474738){return _0x211a88(_0x474738,_0x5a9772-0xe3,_0x1b0ed7-0x1db,_0x1b0ed7-0x126);}function _0x36adbb(_0x15877a,_0x112e6c,_0x232c20,_0xaffcbb){return _0x211a88(_0x112e6c,_0x112e6c-0x89,_0x232c20-0x10,_0x15877a-0x2c8);}toastr[_0x438636(0x1ed,0x103,0x140,0x198)](_0x5e588e[_0x438636(-0xc1,-0x5e,-0x7,0x22)]);try{const _0x2c0c98=_0x5e588e[_0x438636(0x45,0x7a,0x30,-0x26)](getContext),_0x14b661=extension_settings[extensionName],_0x30da8e=_0x5e588e[_0x36adbb(0x32b,0x29f,0x292,0x253)](getCurrentCharacterPreset);if(!_0x30da8e){if(_0x5e588e['MtqoR']!==_0x5e588e[_0x36adbb(0x2a8,0x313,0x37f,0x334)]){const _0x53c2c7=_0x4bbeff[_0x36adbb(0x2e1,0x308,0x209,0x308)];let _0x541f19=_0x5e588e[_0x36adbb(0x1b6,0x10f,0x21f,0x232)];return _0x541f19+=_0x438636(0x210,0xf5,0x16b,0x161)+(_0x53c2c7[_0x36adbb(0x309,0x383,0x2a7,0x311)]||'')+'\x0a',_0x541f19+=_0x438636(0xd9,-0x2b,0x9f,0xc5)+(_0x53c2c7[_0x36adbb(0x2dd,0x372,0x287,0x2c6)]||'')+'\x0a',_0x541f19+=_0x36adbb(0x281,0x2a0,0x346,0x2bd)+(_0x53c2c7[_0x438636(0xb9,-0x5,0x7,-0x2d)+'raits']||'')+'\x0a',_0x541f19+='五官外貌:\x20'+(_0x53c2c7[_0x36adbb(0x214,0x174,0x176,0x2c8)+_0x36adbb(0x1d7,0x13d,0x19a,0x12d)]||'')+'\x0a',_0x541f19+='五官外貌背面:\x20'+(_0x53c2c7[_0x438636(0x151,0xef,0x72,0x57)+_0x36adbb(0x284,0x18d,0x344,0x2f0)]||'')+'\x0a',_0x541f19+='上半身SFW:\x20'+(_0x53c2c7['upperBodyS'+'FW']||'')+'\x0a',_0x541f19+=_0x438636(0xaa,0xb2,0x6e,0x9a)+(_0x53c2c7['upperBodyS'+_0x438636(0x79,0x6c,-0x49,0x6a)]||'')+'\x0a',_0x541f19+=_0x438636(-0x7f,0x43,0xf,0x86)+(_0x53c2c7[_0x36adbb(0x180,0x135,0x154,0x25a)+'W']||'')+'\x0a',_0x541f19+='下半身SFW背面:\x20'+(_0x53c2c7[_0x438636(-0xe7,-0xe0,-0x22,0xa1)+'WBack']||'')+'\x0a',_0x541f19+=_0x438636(-0x18,-0x89,0x6d,0x117)+(_0x53c2c7[_0x438636(0x26,-0x5b,-0x31,-0xec)+_0x36adbb(0x225,0x25a,0x1ab,0x2bf)]||'')+'\x0a',_0x541f19+=_0x36adbb(0x32f,0x308,0x35f,0x283)+'\x20'+(_0x53c2c7[_0x438636(-0x40,0x71,-0x31,-0x116)+_0x438636(-0x66,-0x9c,-0x54,0x66)]||'')+'\x0a',_0x541f19+=_0x438636(0x7b,0x1cd,0x152,0x14b)+(_0x53c2c7[_0x438636(0x146,0x25a,0x16a,0xa7)+'FW']||'')+'\x0a',_0x541f19+=_0x438636(0x83,-0xd1,-0x1e,-0x2a)+'\x20'+(_0x53c2c7[_0x36adbb(0x30c,0x335,0x31b,0x3cc)+_0x36adbb(0x159,0xf5,0x1c1,0x12d)]||'')+'\x0a',_0x541f19+=_0x5e588e[_0x36adbb(0x231,0x146,0x200,0x22d)],_0x541f19;}else{toastr['error'](_0x5e588e[_0x36adbb(0x1c8,0x200,0x2a9,0x120)]);return;}}console[_0x36adbb(0x1be,0x23d,0x13d,0xca)](_0x5e588e[_0x36adbb(0x305,0x349,0x2d3,0x384)],_0x30da8e['id']);const _0x10c8b0=_0x30da8e[_0x438636(0x1e8,0x1ce,0x13f,0x229)][_0x36adbb(0x317,0x380,0x409,0x233)+'Context']||'',_0xc791b5=_0x30da8e['data'][_0x36adbb(0x317,0x2a8,0x296,0x2e2)+_0x438636(0x1c4,0xb6,0x179,0x17b)]||'',_0xea65f5=_0x30da8e[_0x438636(0x61,0x1e2,0x13f,0x1e5)]['generation'+_0x438636(0xd7,-0x81,-0x12,-0x50)]||{};console[_0x36adbb(0x1be,0x103,0x113,0xe2)](_0x5e588e[_0x36adbb(0x15b,0x14d,0x6f,0x1ac)],_0x10c8b0),console[_0x36adbb(0x1be,0x236,0xe0,0x27f)]('[character'+'PromptModi'+_0x438636(0x1ef,0x1a,0x10e,0x13d)+_0x438636(-0x64,0x99,0x46,-0x85)+':',_0xc791b5),console[_0x36adbb(0x1be,0x17f,0x252,0xf2)](_0x5e588e['kVoaI'],_0xea65f5);const _0x1e2877=_0x5e588e['Wpgej'](_0x41cc41,''),_0x2f5d2d=[];if(_0x41cc41){if(_0x5e588e[_0x36adbb(0x170,0x246,0x187,0xea)](_0x5e588e[_0x438636(-0x81,0xb1,-0x5,0xb9)],_0x5e588e[_0x438636(0xd3,-0x5a,-0x5,-0x46)]))_0x2f5d2d[_0x36adbb(0x26e,0x2e3,0x338,0x265)](_0x41cc41);else{const _0x2bbeb4={'Pdqac':function(_0xa52957,_0x316639){function _0x5930b5(_0x594d12,_0x187ff2,_0x609579,_0x3c7197){return _0x438636(_0x594d12-0x1c2,_0x187ff2-0xb7,_0x609579- -0xfa,_0x187ff2);}return _0x5e588e[_0x5930b5(0x79,-0xc6,-0x4c,0xe)](_0xa52957,_0x316639);}};return new _0x5aad85((_0x4ee16c,_0x16cef6)=>{const _0x2e108a={'HXvDA':function(_0x37a430,_0x357a1f){function _0xde26d9(_0xaddf65,_0x515d0d,_0x57aba7,_0x39a36d){return _0x123e(_0x39a36d-0x26,_0x515d0d);}return _0x5e588e[_0xde26d9(0x352,0x1dd,0x202,0x270)](_0x37a430,_0x357a1f);},'mjvzG':function(_0x21e445,_0x3601cf){return _0x21e445(_0x3601cf);}};function _0x520146(_0x54c704,_0x27e8e2,_0x325f09,_0x1be81a){return _0x438636(_0x54c704-0x1d2,_0x27e8e2-0x16a,_0x325f09-0xb4,_0x27e8e2);}const _0x16da1f=_0x56aa67();_0x27b061[_0x520146(0x103,0x197,0xd0,0x7b)](_0x348b12(0x4b3,0x638,0x56a,0x4a4)+_0x348b12(0x559,0x53c,0x50c,0x51b)+_0x520146(0x183,0x205,0x212,0x28e)+_0x348b12(0x476,0x457,0x441,0x40b)+_0x348b12(0x4a5,0x40b,0x4a6,0x50c)+_0x348b12(0x57a,0x60e,0x56b,0x4a8)+_0x16da1f+')');function _0x348b12(_0x4b61a0,_0x8ae999,_0x20ecba,_0x139540){return _0x36adbb(_0x20ecba-0x25b,_0x8ae999,_0x20ecba-0x18a,_0x139540-0x2d);}const _0x46b1fb=_0x267c7e=>{if(_0x2e108a['HXvDA'](_0x267c7e['id'],_0x16da1f))return;function _0x1b7b2f(_0x1a6578,_0x3d78fd,_0x87b279,_0x14c3ef){return _0x348b12(_0x1a6578-0x154,_0x3d78fd,_0x87b279-0x12b,_0x14c3ef-0x98);}_0x47faa3[_0x5517a4(0xb4,0x15a,0x88,0xf8)+_0x1b7b2f(0x582,0x65a,0x59d,0x552)](_0x50744b[_0x5517a4(0xf0,0x181,0x98,0x1aa)+_0x5517a4(0x56,0x104,0x17f,0x168)+_0x5517a4(0xf6,0xaf,0x179,0xbc)+'PONSE'],_0x46b1fb);function _0x5517a4(_0x4bc366,_0x248508,_0x30accb,_0x3adc89){return _0x348b12(_0x4bc366-0x1ee,_0x3adc89,_0x248508- -0x31e,_0x3adc89-0x1d3);}_0x2e108a[_0x5517a4(0x2b5,0x25d,0x342,0x258)](_0x4ee16c,_0x267c7e[_0x1b7b2f(0x606,0x5db,0x5b2,0x4f9)]);};_0x37621d['on'](_0x517d96[_0x348b12(0x42e,0x3ac,0x49f,0x500)+_0x520146(0x6b,0x9d,0xd9,0x177)+'PROMPT_RES'+_0x520146(0x30,0x102,0xd7,0x15)],_0x46b1fb);const _0x587343={};_0x587343['id']=_0x16da1f,_0xe1259d[_0x348b12(0x5a7,0x5a9,0x4f7,0x416)](_0xf6e017[_0x520146(0x19d,0x84,0x156,0x1ff)+_0x520146(0x67,0x45,0xd9,0x1cc)+'PROMPT_REQ'+'UEST'],_0x587343),_0x5e588e[_0x348b12(0x3dc,0x4aa,0x435,0x390)](_0x1d0bf1,()=>{function _0x4e3ec4(_0x25cdd8,_0x2ff8c1,_0xe9487f,_0x58eae7){return _0x520146(_0x25cdd8-0x124,_0xe9487f,_0x2ff8c1- -0xf3,_0x58eae7-0x6e);}_0x47ce24[_0x51be75(0x2ec,0x2dd,0x3c1,0x35d)+_0x4e3ec4(0x5e,0x36,-0x3d,0xe7)](_0x522828['LLM_CHAR_M'+'ODIFY_GET_'+_0x4e3ec4(-0xe5,-0x6f,0x6d,-0x139)+_0x4e3ec4(0xb9,-0x1c,-0x4a,0xb7)],_0x46b1fb);function _0x51be75(_0x1860ab,_0x5b7652,_0x403fd1,_0x32f9ca){return _0x348b12(_0x1860ab-0x86,_0x1860ab,_0x32f9ca- -0x11b,_0x32f9ca-0x1a6);}_0x2bbeb4[_0x4e3ec4(0x2,0xd3,0xe6,0xf8)](_0x16cef6,new _0x2c7c4d(_0x4e3ec4(0xa4,-0x3b,-0xcc,-0x103)+'时'));},-0x2d1a+-0x124*0x13+0x69d6);});}}_0x10c8b0&&_0x2f5d2d[_0x36adbb(0x26e,0x2f2,0x1a5,0x1ec)](_0x10c8b0);_0xc791b5&&(_0x5e588e[_0x36adbb(0x166,0x20f,0x193,0x248)]===_0x5e588e[_0x438636(0x1af,0x1c0,0x150,0x1a9)]?_0x123971[_0x37cc9c]&&_0x5e588e['BrlSU'](_0x49d09b[_0x21e942],_0x16b77d[_0x5d2cef])&&_0x28492a++:_0x2f5d2d[_0x438636(-0x28,0xd3,0xcc,0x68)](_0xc791b5));const _0x429fd0=_0x2f5d2d[_0x36adbb(0x31c,0x2ae,0x276,0x292)]('\x0a');console[_0x438636(0x7,0xeb,0x1c,0xa5)](_0x5e588e[_0x438636(0xfc,0x93,0xdd,0x1d2)],_0x429fd0);let _0x3bc071=_0x5e588e[_0x36adbb(0x18a,0x1f4,0xa4,0x17e)](buildPromptForRequestType,_0x5e588e[_0x36adbb(0x1a4,0x28f,0xc2,0x176)],_0x1e2877);const _0xff6da5=_0x5e588e[_0x36adbb(0x27d,0x31a,0x2e1,0x244)](generateCharacterListText,_0x429fd0),_0x4793c0=_0x5e588e[_0x36adbb(0x1c3,0x198,0x276,0x161)](generateOutfitEnableListText),_0x34793a=generateCommonCharacterListText();console[_0x438636(-0x71,0xb2,0x1c,0xae)](_0x5e588e[_0x36adbb(0x1f2,0x27e,0x19a,0x117)],_0xff6da5);const _0x5c75e5=_0x2c0c98[_0x438636(0xdd,0x19f,0x17f,0x9f)+'ta']?.[_0x438636(-0x6c,-0xa2,-0x36,-0xeb)]||{},_0x38b5cf=_0x5e588e[_0x438636(0xab,0x119,0xd9,0x164)](buildCharacterText,_0x30da8e);_0x3bc071=mergeAdjacentMessages(_0x3bc071),console[_0x438636(0x4a,0xb7,0x1c,0x7)](_0x5e588e[_0x438636(0x2a,-0x52,0x37,-0x82)],_0x3bc071);const _0x3c4c42=_0x5e588e[_0x36adbb(0x18a,0xcc,0x21c,0x149)](findMessageIndexWithPlaceholder,_0x3bc071,_0x5e588e['sxhcK']);console['log'](_0x5e588e[_0x438636(0xc2,0x15f,0xb1,0x63)],_0x3c4c42);const _0x1da145={..._0xea65f5,..._0x5c75e5},_0x1da5de={'context':_0x10c8b0,'worldBookContent':_0xc791b5,'variables':_0x1da145,'userDemand':_0x5e588e['Wpgej'](_0x41cc41,''),'characterListText':_0xff6da5,'outfitEnableListText':_0x4793c0,'commonCharacterListText':_0x34793a},{messages:_0x495aff,replacedVariables:_0x32b09a}=replaceAllPlaceholders(_0x3bc071,_0x1da5de);_0x3bc071=_0x495aff,_0x3bc071=_0x5e588e[_0x36adbb(0x30e,0x33f,0x34d,0x3e6)](_0x4ce053,_0x3bc071,_0x5e588e[_0x36adbb(0x1ec,0x2ba,0x13b,0x1ad)],_0x38b5cf,_0x32b09a),console[_0x438636(-0x57,0x3,0x1c,-0xbe)](_0x5e588e[_0x36adbb(0x251,0x31b,0x2a3,0x2c1)],_0x3bc071);let _0x81192d='';_0x5e588e['TVaJN'](_0x32b09a['size'],0x10fd+-0x10*0xad+-0x62d)&&(_0x81192d=_0x36adbb(0x155,0x10b,0xa8,0x5f)+'被使用：'+[..._0x32b09a][_0x438636(0x17e,0x22d,0x17a,0x83)]('、')+'\x0a');_0x15be1d&&_0x5e588e[_0x438636(0x3,0x1ad,0xca,0x74)](_0x15be1d[_0x36adbb(0x163,0x1fc,0xd0,0x1a4)],0x5*0x2d7+-0x2*-0x9ef+-0x2211)&&_0x5e588e['ItrZZ'](_0x3c4c42,-0x22a7*0x1+-0x43a*0x3+-0x6c3*-0x7)&&(_0x3bc071=_0x5e588e[_0x438636(0x1ae,0x79,0x16c,0x221)](attachImagesToMessage,_0x3bc071,_0x3c4c42,_0x15be1d,_0x5e588e[_0x438636(-0xeb,0xc7,-0x1a,-0xf1)]),console[_0x438636(0x7d,0xbb,0x1c,0x23)](_0x5e588e['KRbaE'],_0x15be1d[_0x36adbb(0x163,0x14e,0x92,0x24b)],_0x5e588e[_0x36adbb(0x19a,0x13a,0x289,0x24c)],_0x3c4c42));updateCombinedPrompt(_0x3bc071,_0x81192d);const _0x3a6fe9={};_0x3a6fe9[_0x438636(-0x67,0x12d,0x42,0xeb)]=0x493e0;const _0x5dd7f0=await _0x5e588e[_0x438636(0xe2,0xa8,0x18c,0x25d)](LLM_CHAR_MODIFY,_0x3bc071,_0x3a6fe9);console[_0x36adbb(0x1be,0x1ba,0x10a,0x11e)](_0x5e588e[_0x36adbb(0x1ba,0x122,0x19f,0xe7)],_0x5dd7f0);if(!_0x5dd7f0){toastr['error'](_0x5e588e[_0x36adbb(0x269,0x20d,0x24f,0x175)]);return;}const _0x348d76=_0x5e588e[_0x36adbb(0x1ff,0x2bd,0x287,0x16f)](extractCharacterAndOutfitTags,_0x5dd7f0);if(_0x5e588e[_0x438636(-0x8d,-0xba,-0x32,0xc)](_0x348d76['characters'][_0x36adbb(0x163,0x128,0x1a5,0x101)],-0x230d+-0x423*0x7+0x4002)&&_0x348d76[_0x438636(0x8,0xb5,-0x1d,-0x81)][_0x438636(0x8e,-0x1d,-0x3f,0x27)]===-0x1e56+-0x1c30+-0x3a86*-0x1){toastr['warning'](_0x5e588e[_0x438636(0x13c,0x1fe,0x131,0x179)]),console[_0x438636(0x15,0x39,0x1c,0x45)](_0x5e588e['cIdUh']),console['log'](_0x438636(0x15b,0x16a,0x16d,0x222)+_0x438636(0x16f,0x1e5,0x10f,0x74)+_0x36adbb(0x28d,0x26a,0x327,0x228)+'M\x20output\x20f'+_0x36adbb(0x2a4,0x28c,0x37a,0x37c)+_0x36adbb(0x262,0x2e3,0x2a0,0x1ea),_0x5dd7f0);return;}console[_0x438636(-0x94,0x4f,0x1c,0xed)](_0x5e588e['mqJzi'],_0x348d76);if(_0x5e588e[_0x438636(0xb9,0xa7,0xca,0x5c)](_0x348d76['characters']['length'],-0x1cf*0x3+0x1*0x1e41+-0x1c*0xe3)){const _0x1ffd4f=_0x348d76[_0x438636(0xa4,-0xf,0x15,-0xe2)][0x5*0x4c7+-0x9*-0x1a+-0x18cd*0x1];await updateCharacterPresetFromLLM(_0x30da8e['id'],_0x1ffd4f);}const _0x94587=[..._0x348d76['outfits']];for(const _0x208174 of _0x348d76[_0x438636(-0x3d,-0x73,0x15,0xc5)]){_0x208174['matchedOut'+_0x36adbb(0x336,0x36b,0x3e8,0x347)]&&_0x5e588e[_0x36adbb(0x16e,0x1a7,0x96,0xa2)](_0x208174[_0x438636(0x1c,-0x11,0xc5,0x7f)+_0x36adbb(0x336,0x357,0x37f,0x396)][_0x438636(-0x88,-0x65,-0x3f,-0x123)],-0xf*-0x59+-0x3*0x764+0x1*0x10f5)&&_0x94587[_0x36adbb(0x26e,0x340,0x200,0x2d1)](..._0x208174['matchedOut'+_0x36adbb(0x336,0x2c0,0x372,0x2e6)]);}_0x5e588e['oDlqM'](_0x94587[_0x36adbb(0x163,0xcc,0x250,0x84)],-0x15f5+0xfde+0x617*0x1)&&(_0x5e588e[_0x438636(-0x118,0x62,-0x32,0x36)](_0x5e588e[_0x36adbb(0x1a2,0x177,0x20f,0x1f0)],_0x5e588e[_0x36adbb(0x226,0x155,0x2bf,0x24a)])?_0x5e588e[_0x438636(0x1c7,0xb,0xd9,0x143)](_0x10edff,new _0x3c6850(_0x4f6d33[_0x36adbb(0x2bc,0x32e,0x2b2,0x3ab)]||_0x5e588e[_0x36adbb(0x264,0x24b,0x335,0x246)])):await _0x5e588e[_0x36adbb(0x189,0x223,0xd9,0xf5)](updateOutfitPresetsFromLLM,_0x94587)),toastr['success'](_0x5e588e[_0x36adbb(0x24a,0x30f,0x1aa,0x249)]);}catch(_0x1990a2){_0x5e588e[_0x438636(0x119,0xfc,0xb7,0x2b)]===_0x5e588e['JqVqo']?_0x3bb5f1++:(console[_0x438636(0xc9,0x9,0xfb,0x1d3)]('[character'+_0x438636(0xda,0x19a,0x10f,0x1d)+_0x36adbb(0x2a6,0x1c5,0x1bd,0x253),_0x1990a2),toastr[_0x36adbb(0x29d,0x333,0x2e0,0x23f)](_0x36adbb(0x2c0,0x250,0x2fc,0x3b7)+'\x20'+_0x1990a2[_0x438636(0xd1,0x256,0x190,0xc1)]));}}async function updateCharacterPresetFromLLM(_0x46814f,_0x1446eb){const _0x230223={'cYWTP':function(_0x58a392,_0x340851){return _0x58a392===_0x340851;},'HEEuE':'PLbhV','PAYbO':'找不到指定的角色预设','aMTXr':'角色特征','odTMt':_0x2e53a0(-0x1e1,-0x13b,-0x247,-0x1fd),'xzOXA':_0x53e582(0x290,0x1f6,0x15b,0x1be),'jgOQO':'上半身SFW','nemWa':_0x2e53a0(-0x1dc,-0x1bc,-0x1c1,-0x120),'gxgJI':'下半身SFW','LUvkF':_0x53e582(0x212,0x20d,0x247,0x1e3),'GeCzf':_0x2e53a0(-0xe8,-0x1eb,-0x22c,-0x186),'JmlEo':'下半身NSFW','bUYvF':function(_0x19d914,_0x50a7c5){return _0x19d914!==_0x50a7c5;},'fobTu':'hmhCA','MlTdG':function(_0x17a134,_0x164add){return _0x17a134===_0x164add;},'YPJEN':_0x53e582(0x287,0x1e4,0x1cd,0x226),'ZcIUX':'没有检测到需要更新的'+'内容','TrtTk':function(_0x4a69ef,_0x4b6043){return _0x4a69ef(_0x4b6043);},'ulBoL':_0x53e582(0xbc,0x10c,0xe2,0x9a),'YfvBK':function(_0x414e8e,_0x504ebb){return _0x414e8e===_0x504ebb;},'uugFj':_0x53e582(0x74,0x5b,-0x2b,0xb2),'jyeIX':'#st-chatu8'+_0x53e582(0x1ac,0x1ae,0x127,0x1d0)+_0x53e582(-0x1a,-0x10,0xfa,0x62),'mKcWj':function(_0x1170cc,_0x349b53){return _0x1170cc===_0x349b53;},'AXFDh':'UVjwn','mDuiz':function(_0xdf526a,_0x981485){return _0xdf526a(_0x981485);}},_0x25e6b8=extension_settings[extensionName],_0x3a2253=_0x25e6b8[_0x2e53a0(-0x1b7,-0x20c,-0x15d,-0x126)+_0x53e582(0x49,0x3c,0x1c2,0xfe)][_0x46814f];if(!_0x3a2253){if(_0x230223[_0x2e53a0(-0x1ba,-0x270,-0x1f8,-0x191)](_0x230223[_0x2e53a0(-0x106,-0x220,-0x1f4,-0x15a)],_0x230223['HEEuE'])){toastr[_0x2e53a0(-0x92,-0x40,-0x5a,-0xbd)](_0x230223[_0x53e582(-0x66,0x172,0x48,0x8b)]);return;}else return null;}const _0x2764c7={};_0x2764c7[_0x53e582(0x11a,0x17d,0x245,0x1fe)]=_0x2e53a0(0x18,0xc,-0xa9,-0xaf),_0x2764c7['nameEN']='英文名称',_0x2764c7[_0x2e53a0(-0x288,-0x2a2,-0x12e,-0x1b1)+_0x2e53a0(-0x229,-0x1c8,-0x1f5,-0x209)]=_0x230223[_0x2e53a0(0xba,-0xc3,-0x6f,-0x25)],_0x2764c7['facialFeat'+_0x53e582(0x19c,-0x28,0xb3,0xcc)]=_0x230223['odTMt'],_0x2764c7[_0x2e53a0(-0xb4,-0xd4,-0xae,-0x146)+_0x2e53a0(-0xe4,-0xb3,-0x1d,-0xd6)]=_0x230223[_0x53e582(0x246,0x2b0,0x1cb,0x22c)],_0x2764c7[_0x53e582(-0x14,0x4c,0x123,0xd8)+'FW']=_0x230223[_0x2e53a0(-0x8a,-0x17c,-0x31,-0xc5)],_0x2764c7[_0x2e53a0(-0x10c,-0x12f,-0x23b,-0x177)+_0x2e53a0(-0x241,-0x111,-0x1c3,-0x201)]=_0x230223[_0x2e53a0(-0xc8,-0x247,-0x9e,-0x16f)],_0x2764c7[_0x2e53a0(-0x134,-0x29e,-0x1be,-0x1da)+'W']=_0x230223['gxgJI'],_0x2764c7[_0x2e53a0(-0x1f3,-0xf9,-0x2c2,-0x1da)+_0x53e582(0xa7,0xc5,0x111,0x156)]=_0x230223[_0x2e53a0(-0x44,-0x42,-0x183,-0xa7)],_0x2764c7[_0x53e582(0x29,-0x49,0x14a,0x66)+_0x53e582(0x124,0x104,0x188,0x11a)]=_0x230223['GeCzf'],_0x2764c7[_0x2e53a0(-0x2ae,-0x1cf,-0x1da,-0x1e9)+'SFWBack']=_0x53e582(0x93,0x1c7,0x113,0xd7),_0x2764c7[_0x2e53a0(-0x96,-0x8f,-0x2e,-0x4e)+'FW']=_0x230223[_0x2e53a0(-0x83,-0xf0,0xf,-0x86)],_0x2764c7['fullBodyNS'+_0x53e582(-0x6c,0x31,-0x7e,0x4e)]=_0x53e582(-0x7,-0x26,0xe8,0xc8);const _0xc93ae3=_0x2764c7;let _0x403605=-0x1635+-0x7b*0x1b+0x9e*0x39;for(const _0x5c3735 in _0xc93ae3){_0x1446eb[_0x5c3735]&&_0x230223[_0x2e53a0(-0x3d,-0x19d,-0x53,-0xce)](_0x1446eb[_0x5c3735],_0x3a2253[_0x5c3735])&&(_0x230223[_0x2e53a0(-0x14c,0x27,-0x125,-0xce)](_0x2e53a0(-0x1a7,-0x1dc,-0x26b,-0x1c3),_0x230223[_0x2e53a0(-0x180,-0x1c2,-0x90,-0xdc)])?_0x403605++:_0x2ac97a[_0x3348ef[_0x57421f]]=_0x2c988c);}if(_0x403605===0x67*0x32+-0xe63*0x2+0x8a8){if(_0x230223[_0x2e53a0(-0x139,-0x108,-0x1cf,-0x182)](_0x230223[_0x2e53a0(-0x189,-0x28a,-0x213,-0x1ae)],'LlSBv')){toastr[_0x2e53a0(-0xb9,-0x3d,0x7d,-0x78)](_0x230223[_0x2e53a0(-0x17e,-0x9e,-0x119,-0x131)]);return;}else _0x4b605a[_0x53e582(-0x79,0x5e,0xe4,0x54)](_0x34dd91);}const _0x260be0='检测到角色\x20\x22'+_0x46814f+_0x2e53a0(-0x10b,-0x9e,-0x120,-0x11f)+_0x403605+_0x2e53a0(-0x1b5,-0xef,-0x2bb,-0x1e3),_0x20ef22=await _0x230223[_0x2e53a0(-0x2d,-0x54,-0x64,-0x40)](stylishConfirm,_0x260be0);if(!_0x20ef22){toastr[_0x53e582(0xec,0x1c8,0x1ba,0x1d7)](_0x230223['ulBoL']);return;}for(const _0x2d1764 in _0xc93ae3){if(_0x230223[_0x53e582(0xf9,0x114,0x9e,0x12b)](_0x230223[_0x2e53a0(-0x11e,-0x177,-0x1b9,-0x16d)],_0x230223[_0x2e53a0(-0xc6,-0xa0,-0xcd,-0x16d)]))_0x1446eb[_0x2d1764]&&(_0x3a2253[_0x2d1764]=_0x1446eb[_0x2d1764]);else return _0x273855[_0x2e53a0(-0x11b,-0x1ba,-0x1f4,-0x169)](_0x525b64=>_0x27f7f5(_0x525b64,_0x283a38,_0x5104cc,_0x887a3e));}saveSettingsDebounced();function _0x2e53a0(_0x405040,_0x17a1de,_0x2d5d19,_0x20de79){return _0x211a88(_0x405040,_0x17a1de-0x16b,_0x2d5d19-0x1a3,_0x20de79- -0x92);}function _0x53e582(_0x2c914e,_0x144b75,_0x2c3804,_0x5aa06d){return _0x211a88(_0x144b75,_0x144b75-0x41,_0x2c3804-0xbd,_0x5aa06d-0x1bd);}const _0x137f86=$(_0x230223[_0x2e53a0(0x7,-0x81,-0x22,-0x36)]);if(_0x137f86['length']){if(_0x230223[_0x53e582(0xcf,0x13f,0x138,0xd1)](_0x230223[_0x2e53a0(-0x160,-0x181,-0x170,-0x1ab)],_0x2e53a0(0x32,-0xf,-0x1c,-0xb8))){const _0x3061db=_0x4733f2[_0x53e582(0x188,0x177,0x14a,0xf8)](_0x486411,arguments);return _0x1ce4fb=null,_0x3061db;}else refreshCharacterSettings(_0x137f86);}_0x230223[_0x2e53a0(-0x1b7,-0x97,-0x11d,-0xd7)](updateFormFields,_0x1446eb),console[_0x53e582(0xd1,0xe9,0x31,0xb3)](_0x53e582(0x1fe,0x296,0x1ca,0x204)+_0x2e53a0(-0x13a,-0xde,-0x10f,-0xa9)+_0x2e53a0(0x4b,-0x3b,-0x3,-0x6f)+'设\x20\x22'+_0x46814f+'\x22');}async function updateOutfitPresetsFromLLM(_0x5cbde0){const _0xaa8519={'udjCa':'参考图片','lcqOK':'images\x20to\x20'+'message\x20at'+'\x20index','OEmqZ':_0x31da7e(0x475,0x3ba,0x412,0x473),'ztpSx':function(_0x27f91d){return _0x27f91d();},'kKkAT':_0x31da7e(0x4bd,0x463,0x312,0x3ee)+_0x4f1c8f(0x27a,0x325,0x30f,0x303),'xvzyC':_0x4f1c8f(0x430,0x439,0x323,0x3ea),'xPIXz':'英文名称','kjKTf':'归属人','jHIVb':_0x31da7e(0x643,0x4f6,0x594,0x553),'GocCb':_0x31da7e(0x499,0x45e,0x40d,0x4d9),'NvLiE':'下半身','lJsvz':_0x31da7e(0x5b7,0x5ab,0x5ef,0x50e),'WruHJ':function(_0x179aa8,_0x4e35cd){return _0x179aa8!==_0x4e35cd;},'lkdPI':'IaTTF','QUlRb':function(_0x2a6be0,_0x1e33c2){return _0x2a6be0!==_0x1e33c2;},'MmEMc':function(_0xca827a,_0x21d9a6){return _0xca827a===_0x21d9a6;},'DzNeD':'fWFAa','atZJJ':function(_0x51635e,_0x5eb15b){return _0x51635e===_0x5eb15b;},'bmUUw':function(_0x27468f,_0x57d42d){return _0x27468f!==_0x57d42d;},'lzPUV':'hOtOH','jAEVP':function(_0x371166,_0x150c1c){return _0x371166(_0x150c1c);},'uRMlJ':function(_0x2b614f,_0x5aca3e){return _0x2b614f===_0x5aca3e;},'UQWtb':_0x4f1c8f(0x514,0x4fc,0x3bb,0x434),'uGQFN':_0x4f1c8f(0x22e,0x1f6,0x317,0x2a8),'ygGLU':_0x31da7e(0x55d,0x4c2,0x4dd,0x469),'ABlro':_0x4f1c8f(0x244,0x273,0x232,0x2ed),'FJalE':function(_0x20d4bc,_0x351177){return _0x20d4bc===_0x351177;},'ixcua':'nMaTJ','NXLIJ':function(_0xc69e56,_0x4bae51){return _0xc69e56===_0x4bae51;},'Kcrny':_0x4f1c8f(0x3b1,0x2c3,0x329,0x2c1),'cpsag':function(_0x179c18,_0x51486e){return _0x179c18(_0x51486e);},'vUhqQ':_0x4f1c8f(0x1f7,0x266,0x2a2,0x2b2)+_0x4f1c8f(0x385,0x4b2,0x36f,0x41a)+_0x4f1c8f(0x239,0x32a,0x2e4,0x2ac),'VLJpX':function(_0x34143e,_0x297b4f){return _0x34143e(_0x297b4f);}};function _0x4f1c8f(_0x3ca348,_0x420ec5,_0x1c367f,_0x428329){return _0x211a88(_0x420ec5,_0x420ec5-0xe3,_0x1c367f-0xd3,_0x428329-0x407);}const _0x516293=extension_settings[extensionName];function _0x31da7e(_0x345bbb,_0x4b03f2,_0x9e3574,_0x85dcad){return _0x211a88(_0x9e3574,_0x4b03f2-0x1d7,_0x9e3574-0xb2,_0x85dcad-0x509);}const _0x47d3b0={};_0x47d3b0[_0x4f1c8f(0x45c,0x4e1,0x532,0x448)]=_0xaa8519[_0x4f1c8f(0x38a,0x328,0x3ea,0x3af)],_0x47d3b0[_0x4f1c8f(0x340,0x480,0x33b,0x41c)]=_0xaa8519[_0x31da7e(0x4f9,0x580,0x43a,0x4f7)],_0x47d3b0[_0x31da7e(0x4cd,0x3d5,0x535,0x484)]=_0xaa8519[_0x31da7e(0x4d9,0x4ea,0x4ac,0x55f)],_0x47d3b0[_0x4f1c8f(0x2d5,0x38c,0x328,0x34b)]=_0xaa8519[_0x31da7e(0x3e3,0x4e9,0x52e,0x439)],_0x47d3b0[_0x31da7e(0x4b7,0x4b2,0x4a9,0x442)+_0x31da7e(0x606,0x556,0x656,0x574)]=_0xaa8519[_0x31da7e(0x551,0x517,0x590,0x569)],_0x47d3b0[_0x4f1c8f(0x23e,0x29d,0x3e0,0x2fa)]=_0xaa8519[_0x4f1c8f(0x389,0x3df,0x457,0x3f1)],_0x47d3b0[_0x4f1c8f(0x28a,0x206,0x375,0x2e9)+'ck']=_0xaa8519[_0x31da7e(0x2e2,0x3de,0x311,0x3ab)];const _0x3a42df=_0x47d3b0;for(const _0x57acd9 of _0x5cbde0){const _0x1f68f2=_0x57acd9[_0x31da7e(0x59b,0x54c,0x5a1,0x54a)];if(!_0x1f68f2)continue;const _0x379cc5=_0x516293['outfitPres'+_0x4f1c8f(0x2cd,0x3cc,0x443,0x34c)]?.[_0x1f68f2];if(_0x379cc5){let _0x2ece3d=-0x1050+0x1c7e+-0xc2e;for(const _0x3603de in _0x3a42df){_0xaa8519[_0x31da7e(0x424,0x484,0x535,0x512)](_0xaa8519[_0x31da7e(0x5e5,0x53c,0x5ec,0x520)],_0xaa8519[_0x4f1c8f(0x42d,0x415,0x3c9,0x41e)])?_0x13395f['log'](_0x31da7e(0x533,0x5eb,0x55e,0x550)+_0x31da7e(0x585,0x4a9,0x3ff,0x4f2)+_0x4f1c8f(0x47d,0x423,0x383,0x449)+'字段\x20\x22'+_0x2a585e+'\x22'):_0x57acd9[_0x3603de]&&_0xaa8519['QUlRb'](_0x57acd9[_0x3603de],_0x379cc5[_0x3603de])&&(_0xaa8519[_0x31da7e(0x491,0x59a,0x470,0x568)](_0xaa8519[_0x31da7e(0x520,0x444,0x45d,0x4ff)],_0xaa8519[_0x31da7e(0x5d0,0x43c,0x54b,0x4ff)])?_0x2ece3d++:_0x350487[_0x4f1c8f(0x34d,0x3c2,0x2c7,0x3a6)+'fits'][_0x31da7e(0x553,0x52a,0x530,0x4af)](_0x53786c['data']));}if(_0xaa8519[_0x4f1c8f(0x3c8,0x3c3,0x3f8,0x404)](_0x2ece3d,-0x841*0x4+0x1d68+0x39c)){if(_0xaa8519['bmUUw'](_0xaa8519[_0x31da7e(0x40f,0x5d5,0x4ab,0x4e0)],_0xaa8519[_0x31da7e(0x44c,0x53a,0x56e,0x4e0)]))_0x4b3d53=_0x134216(_0x260e34,_0x3d1154,_0x4bfbb2,_0xaa8519[_0x31da7e(0x62a,0x5fe,0x4d4,0x544)]),_0x538b54[_0x31da7e(0x47b,0x395,0x37a,0x3ff)]('[character'+_0x4f1c8f(0x460,0x4a5,0x3a0,0x3f0)+_0x31da7e(0x2e9,0x3da,0x381,0x3d4)+'ed',_0x1da1d0[_0x31da7e(0x2d7,0x36a,0x3b8,0x3a4)],_0xaa8519['lcqOK'],_0x2301ce);else{console[_0x31da7e(0x328,0x389,0x34a,0x3ff)]('[character'+_0x31da7e(0x491,0x46c,0x44b,0x4f2)+_0x31da7e(0x365,0x3db,0x395,0x3cc)+_0x1f68f2+'\x22\x20没有变更');continue;}}const _0x6ddfca=_0x31da7e(0x438,0x444,0x55c,0x4e6)+_0x1f68f2+_0x31da7e(0x3c1,0x554,0x387,0x47c)+_0x2ece3d+_0x4f1c8f(0x382,0x37d,0x29b,0x2b6),_0x1a7cbc=await _0xaa8519[_0x31da7e(0x4d5,0x484,0x506,0x4c3)](stylishConfirm,_0x6ddfca);if(!_0x1a7cbc)continue;for(const _0x11d0c0 in _0x3a42df){if(_0x57acd9[_0x11d0c0]){if(_0xaa8519[_0x31da7e(0x48a,0x4b8,0x4b5,0x51d)](_0xaa8519[_0x31da7e(0x4a4,0x32f,0x3bb,0x416)],_0xaa8519[_0x4f1c8f(0x1ef,0x2f8,0x361,0x2aa)])){const _0x4d4599={};_0x4d4599[_0x31da7e(0x4c0,0x4d5,0x40e,0x4fc)]=_0xaa8519[_0x31da7e(0x4f2,0x4b5,0x459,0x4c9)],_0x4d4599[_0x4f1c8f(0x321,0x45c,0x455,0x371)]='\x0a[以下是用户上传的'+_0x3f5982[_0x31da7e(0x3f1,0x323,0x413,0x3a4)]+'张'+_0x4ac655+']',_0x922f7e[_0x31da7e(0x508,0x575,0x3df,0x4af)](_0x4d4599);}else _0x379cc5[_0x11d0c0]=_0x57acd9[_0x11d0c0];}}console[_0x31da7e(0x34f,0x3ff,0x348,0x3ff)](_0x31da7e(0x4ca,0x5a3,0x4c7,0x550)+_0x4f1c8f(0x385,0x3ae,0x449,0x3f0)+_0x31da7e(0x34f,0x3ce,0x341,0x412)+_0x31da7e(0x4c6,0x470,0x500,0x51a)+_0x1f68f2+'\x22');}else{if(_0xaa8519[_0x31da7e(0x55b,0x5d3,0x4e1,0x506)](_0xaa8519[_0x31da7e(0x570,0x475,0x5c1,0x4cc)],_0xaa8519['ABlro']))_0x3908bc[_0x340a3a]=_0x1a363d[_0x55b11a];else{const _0x3ed025=_0x4f1c8f(0x2ea,0x347,0x2d5,0x299)+_0x1f68f2+_0x31da7e(0x4a5,0x433,0x491,0x3c7),_0x23f0d2=await stylishConfirm(_0x3ed025);if(!_0x23f0d2)continue;!_0x516293[_0x4f1c8f(0x403,0x2f5,0x3cf,0x32e)+_0x4f1c8f(0x3db,0x29c,0x325,0x34c)]&&(_0x516293['outfitPres'+_0x31da7e(0x52a,0x418,0x466,0x44e)]={});const _0x15e4c6={};_0x15e4c6[_0x31da7e(0x544,0x49a,0x497,0x54a)]=_0x57acd9[_0x31da7e(0x514,0x60a,0x555,0x54a)],_0x15e4c6[_0x4f1c8f(0x436,0x35c,0x4a0,0x41c)]=_0x57acd9[_0x4f1c8f(0x50b,0x470,0x4c2,0x41c)]||'',_0x15e4c6[_0x4f1c8f(0x468,0x2b2,0x457,0x382)]=_0x57acd9[_0x31da7e(0x3ae,0x521,0x545,0x484)]||'',_0x15e4c6[_0x4f1c8f(0x358,0x278,0x3cd,0x34b)]=_0x57acd9[_0x4f1c8f(0x379,0x431,0x27e,0x34b)]||'',_0x15e4c6[_0x4f1c8f(0x320,0x251,0x2d0,0x340)+_0x4f1c8f(0x3e4,0x4fa,0x41c,0x472)]=_0x57acd9[_0x31da7e(0x406,0x421,0x4ae,0x442)+'ack']||'',_0x15e4c6[_0x4f1c8f(0x3ee,0x32f,0x322,0x2fa)]=_0x57acd9[_0x31da7e(0x427,0x4c4,0x3a9,0x3fc)]||'',_0x15e4c6[_0x31da7e(0x33f,0x499,0x383,0x3eb)+'ck']=_0x57acd9['fullBodyBa'+'ck']||'',_0x516293[_0x31da7e(0x414,0x433,0x45a,0x430)+_0x31da7e(0x3ad,0x4b7,0x475,0x44e)][_0x1f68f2]=_0x15e4c6,console['log'](_0x31da7e(0x482,0x63a,0x62c,0x550)+_0x4f1c8f(0x479,0x376,0x31a,0x3f0)+_0x31da7e(0x3b7,0x559,0x3ea,0x481)+_0x31da7e(0x53b,0x5d9,0x57d,0x51a)+_0x1f68f2+'\x22');if(_0x57acd9['owner']&&_0x57acd9[_0x4f1c8f(0x311,0x312,0x2d1,0x382)]['trim']()){const _0x54784=_0x57acd9[_0x4f1c8f(0x410,0x392,0x359,0x382)]['trim']()[_0x4f1c8f(0x281,0x315,0x392,0x2db)+'e']()['replace'](/\s+/g,'');for(const [_0x15cdb2,_0xc781eb]of Object[_0x4f1c8f(0x2d5,0x3b5,0x46e,0x38b)](_0x516293[_0x31da7e(0x455,0x3ee,0x488,0x475)+_0x31da7e(0x4d2,0x4dd,0x3e6,0x44a)]||{})){if(_0xc781eb[_0x4f1c8f(0x4b5,0x458,0x4b8,0x41c)]&&_0xaa8519[_0x4f1c8f(0x506,0x388,0x55b,0x466)](_0xc781eb[_0x4f1c8f(0x3bf,0x36a,0x4dd,0x41c)][_0x4f1c8f(0x2a5,0x3c1,0x22f,0x2db)+'e']()[_0x4f1c8f(0x2b5,0x1f1,0x323,0x2a1)](/\s+/g,''),_0x54784)){if(_0xaa8519['FJalE'](_0xaa8519['ixcua'],_0xaa8519['ixcua'])){!_0xc781eb[_0x4f1c8f(0x2fc,0x2c9,0x21f,0x2c4)]&&(_0xaa8519[_0x4f1c8f(0x460,0x3b4,0x499,0x411)](_0xaa8519[_0x4f1c8f(0x4b2,0x3b8,0x2f9,0x3e8)],_0x31da7e(0x55f,0x436,0x3f8,0x4ae))?(_0xaa8519['ztpSx'](_0x5c5e8b),_0x5e00c3(new _0x1d06a1(_0xaa8519[_0x31da7e(0x44c,0x2ac,0x32a,0x399)]))):_0xc781eb[_0x31da7e(0x48f,0x49e,0x357,0x3c6)]=[]);!_0xc781eb[_0x31da7e(0x37d,0x3f7,0x47f,0x3c6)]['includes'](_0x1f68f2)&&(_0xc781eb[_0x4f1c8f(0x377,0x355,0x285,0x2c4)][_0x4f1c8f(0x32b,0x2fd,0x432,0x3ad)](_0x1f68f2),console['log']('[character'+_0x4f1c8f(0x39b,0x4c9,0x38d,0x3f0)+_0x31da7e(0x460,0x46b,0x360,0x3cc)+_0x1f68f2+_0x31da7e(0x563,0x494,0x512,0x547)+_0x15cdb2+'\x22'));break;}else _0x52e478[_0x31da7e(0x504,0x3fe,0x595,0x4af)](_0x4387f2);}}}}}}_0xaa8519[_0x4f1c8f(0x288,0x3a1,0x28c,0x378)](saveSettingsDebounced);const _0x1594ba=_0xaa8519['cpsag']($,_0xaa8519[_0x31da7e(0x3b0,0x4d7,0x4e3,0x428)]);_0x1594ba[_0x31da7e(0x361,0x495,0x45a,0x3a4)]&&_0xaa8519[_0x31da7e(0x492,0x51b,0x54e,0x474)](refreshCharacterSettings,_0x1594ba);}function updateFormFields(_0x548dba){const _0x45182e={'uALyg':function(_0x5b820a,_0x81124c){return _0x5b820a===_0x81124c;},'sgUDv':_0x395231(-0xbe,0x44,-0xc5,-0x9d),'oPaio':function(_0x35c752,_0x746c58){return _0x35c752(_0x746c58);},'QoDLe':_0x395231(0x199,-0x1c,0x158,0xda),'PPSWV':_0x16e777(0x10,0xc1,0x19b,-0x3),'bwPwD':_0x16e777(-0xd2,-0x73,-0x6f,-0x107)+_0x16e777(-0x4e,-0xcb,-0x180,-0x1b6),'HZIsm':'facialFeat'+_0x16e777(0x57,-0x45,0x6a,0x69),'gLnAe':'upperBodyS'+'FW','TjTCz':_0x16e777(-0xac,-0x9c,-0x68,0x1b)+'W','xszYZ':_0x395231(-0x4b,-0x148,-0xb1,-0xe5)+_0x16e777(-0x92,0x9,0xc1,0xaf),'tboIe':_0x395231(-0xcc,-0xa0,-0x19c,-0xe5)+_0x395231(-0xb3,-0x12a,-0xda,-0x108),'qSwyU':_0x16e777(0x11e,0xf0,0x107,0xc2)+'FW','QgXWT':_0x395231(0x89,-0x14,0x189,0xb6)+_0x395231(-0x1d4,-0x5b,-0x14b,-0xfd)};function _0x16e777(_0x5bf60b,_0x573a5b,_0x255049,_0x618091){return _0x211a88(_0x255049,_0x573a5b-0xa4,_0x255049-0x2a,_0x573a5b-0xac);}const _0x3f2f66=[_0x395231(0xf8,0xa6,0x180,0xb3),_0x45182e['PPSWV'],_0x45182e[_0x395231(-0x6,0xba,0x6a,-0x1f)],_0x45182e[_0x395231(0xb9,0x80,0x11a,0x8d)],'facialFeat'+_0x395231(-0xba,-0x90,0x7c,0x2e),_0x45182e[_0x16e777(0xb,-0x41,0x8,-0x10a)],_0x395231(-0xc3,0x56,-0x9c,-0x73)+_0x395231(-0xaf,-0x91,-0xbe,-0xfd),_0x45182e[_0x395231(-0xbc,0x71,-0x71,-0x5b)],'fullBodySF'+_0x395231(0x53,0xde,-0x89,0xb),_0x45182e[_0x16e777(0x2c,0xdc,0xee,0x5c)],_0x45182e['tboIe'],_0x45182e[_0x395231(0x34,-0x4e,0x48,0x59)],_0x45182e[_0x16e777(-0x2f,0xb2,0x160,0x190)]];function _0x395231(_0x14776f,_0x25da42,_0x4afcef,_0x32b60a){return _0x211a88(_0x4afcef,_0x25da42-0x16d,_0x4afcef-0x1ba,_0x32b60a-0x72);}_0x3f2f66['forEach'](_0x46c301=>{function _0x35121c(_0x8a06ad,_0x31ea40,_0x5913a8,_0x499b00){return _0x16e777(_0x8a06ad-0x184,_0x499b00-0x3ef,_0x5913a8,_0x499b00-0x2c);}function _0x4cbdba(_0x5ce7ea,_0x5e8dbf,_0x417915,_0x5ccb51){return _0x16e777(_0x5ce7ea-0x141,_0x5e8dbf-0x19a,_0x5ccb51,_0x5ccb51-0x1c0);}if(_0x548dba[_0x46c301]){if(_0x45182e[_0x4cbdba(0x21c,0x28f,0x312,0x209)](_0x35121c(0x512,0x499,0x519,0x44f),_0x45182e[_0x4cbdba(0x2a8,0x1e6,0x1e2,0x203)]))_0x3db60a=_0x11e5b4,_0x33b812[_0x4cbdba(0x23e,0x1ec,0x288,0x278)](_0x26c576);else{const _0x39dca3=document[_0x4cbdba(0x182,0x1da,0x145,0x13d)+_0x4cbdba(0x152,0x1cc,0x215,0x13e)](_0x4cbdba(0x35e,0x2a1,0x383,0x32e)+_0x46c301);_0x39dca3&&(_0x39dca3[_0x4cbdba(0x2f9,0x26b,0x282,0x356)]=_0x548dba[_0x46c301],_0x45182e[_0x35121c(0x371,0x35f,0x405,0x326)]($,_0x39dca3)[_0x35121c(0x543,0x445,0x55a,0x49e)](_0x45182e['QoDLe']));}}});}