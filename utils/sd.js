(function(_0x116f20,_0x174239){function _0x59717d(_0x271c07,_0x314183,_0x1731e6,_0x22a44b){return _0x42f6(_0x314183-0x24,_0x22a44b);}function _0x25591e(_0x128dcc,_0x3db513,_0x2b5979,_0x3e785d){return _0x42f6(_0x2b5979- -0x81,_0x3db513);}const _0x7070e8=_0x116f20();while(!![]){try{const _0x9f9f49=parseInt(_0x59717d(0x36e,0x2a8,0x33d,0x301))/(0x85*0xc+0x1db7+0x23f2*-0x1)+-parseInt(_0x25591e(0xef,0x189,0x18e,0x1fc))/(0x38*0x56+0xbc2+-0x1e90)*(parseInt(_0x59717d(0x358,0x2a5,0x24a,0x26d))/(0x42*-0x29+-0x76*-0x2f+0xb15*-0x1))+parseInt(_0x25591e(0x2e6,0x255,0x26a,0x1e5))/(-0x3*0x966+0x1*0xe12+0xe24)+-parseInt(_0x25591e(0x1c0,0x20b,0x288,0x349))/(0x2*-0xe28+-0x43*-0x65+0x1e6)+parseInt(_0x25591e(0x20b,0x202,0x1c4,0x120))/(0x1c7*0x4+-0x1*-0xe7d+0x107*-0x15)+-parseInt(_0x59717d(0x263,0x221,0x1d2,0x272))/(-0xd*-0x5d+-0x7*0x393+0xb*0x1d9)*(parseInt(_0x25591e(0x25c,0x2d7,0x217,0x191))/(-0x15cb+-0x1132+-0x593*-0x7))+-parseInt(_0x25591e(0x192,0x264,0x238,0x1f5))/(0x14*-0x14+0x8f9+-0x760)*(-parseInt(_0x25591e(0x112,0x1f7,0x17a,0x146))/(-0x22db+-0xb75+0x11*0x2ba));if(_0x9f9f49===_0x174239)break;else _0x7070e8['push'](_0x7070e8['shift']());}catch(_0xe248b9){_0x7070e8['push'](_0x7070e8['shift']());}}}(_0x553d,0xac1e6+-0xc*-0xe659+-0x9*0x1a479));const _0x62a0b8=(function(){let _0x21f528=!![];return function(_0x2f97e0,_0xa6b555){const _0x45baaf=_0x21f528?function(){function _0x1d5f48(_0x567bf6,_0x5fa17e,_0x41b794,_0xfaad86){return _0x42f6(_0x5fa17e-0x10,_0x567bf6);}if(_0xa6b555){const _0x436819=_0xa6b555[_0x1d5f48(0x34b,0x36e,0x2eb,0x2b1)](_0x2f97e0,arguments);return _0xa6b555=null,_0x436819;}}:function(){};return _0x21f528=![],_0x45baaf;};}()),_0x1b9f65=_0x62a0b8(this,function(){function _0x56e5b1(_0x56d189,_0x5a0bbf,_0x1efee0,_0x4e1659){return _0x42f6(_0x4e1659-0x341,_0x56d189);}const _0x198bbb={};function _0x3d5032(_0x4cefc4,_0x3de519,_0x3542b3,_0xdd3901){return _0x42f6(_0x3542b3- -0x8a,_0x3de519);}_0x198bbb[_0x56e5b1(0x510,0x47d,0x4ed,0x536)]=_0x3d5032(0x191,0x1f0,0x252,0x23b)+'+$';const _0xb0c139=_0x198bbb;return _0x1b9f65['toString']()[_0x3d5032(0x18d,0x1d4,0x20a,0x281)](_0xb0c139[_0x56e5b1(0x497,0x48e,0x541,0x536)])[_0x56e5b1(0x575,0x584,0x5ec,0x5ad)]()[_0x56e5b1(0x515,0x4e4,0x58c,0x54e)+'r'](_0x1b9f65)[_0x3d5032(0x26e,0x210,0x20a,0x291)](_0xb0c139[_0x3d5032(0x20d,0x21b,0x16b,0xbe)]);});_0x1b9f65();import{sleep,zhengmian,fumian,deepMerge,getSDMode,setSDMode,addLog,getRequestHeaders,clearLog,prompt_replace,getsdAuth,parsePromptStringWithCoordinates,prompt_replace_for_character,stripChineseAnnotations,convertImageToJpeg}from'./utils.js';function _0x553d(){const _0x1cfb62=['mJG5otGZyNzIwKLP','tufhrv9srvnqtW','5Ps25yIWu0tNLj/LM77OR7FMSyiGka','rNPMvKe','CgfYC2u','BgvZktOG','zgvUB2LZAw5NxW','z0XJuMO','A2LW','55sO5lQo55sF5OIq55QevgfNoIa','C3rFy2HHDhu4xW','y2vZioIeUoMdQos/RUwKJsdKUlO','y2fSztOQkIa','Dg9Rzw4','77Ym6k+35Qoa5P+LC2r3zwj1','cI0GkIRMRAxMLBaGkfm','C2vHCMnO','wKfgyuG','ienOCM9Tzs8XmG','q2T3BLy','ntu1mKLKweTOva','B0jZww4','kfvWC2nHBguGrG','6k+35Rgc5AsX6lsLloEkTUAaGEEGGtOG','yLjWvhC','s2L0lZuZnY4ZnG','su5Tse8','qKvqAfC','C2tOR7FMSylNLj/LM77PLjNOR686ia','Bxf5qxu','qML2s2K','mJiYmG','kI8Q','ic0Gq2HHBMDLoG','5lI6Dhj1zq','Bg9N','5PIV5zcM5zcV55sO5yIg6kEs6iMY5QIH5BYpia','Aw1Hz2veyxrH','DMjKvgO','BMvYyxrL','r2jQCeO','zxr0Aw5NCW','Bfb2r0y','zMfJzv95B2XVDG','r3f4tha','sKnKDNK','zMfYAs81mZCUmW','6i635y+w5QIH5z6l5AsX6lsLoIa','DK1yze8','AgnQCwm','sgLfEe0','vxnLCI1bz2vUDa','l2fWAs9Zzc9Nzq','odm5nJKXt1PZr1bW','DhjPBq','ywrKvgfZAW','5Q2J5zYO6k6+572U5QIH5z6l5lI6','Bw9KzwW','ifbYB21WDa','AeTrrfy','C3rYAw5NAwz5','CMf0Aw5NigLTyq','cI0GkIROTj/PNAlMJ5dNPlOG','y29TCgXLDgvuyq','5BcD6k+v5l2C5lI65y6F5AEliejHCW','Aw5JBhvKzxm','vuz0reS','DNHlrhm','wMfSqui','CM9S','C2rFy2nOyxr1xW','qLHyEwm','qMjluxG','DtHFC2rFyxv0Aa','u1PAyMe','rxzJwMC','6yws6AAgioI/LowBNUMuMEIVR+oaGUEkTUAaGq','C2rFy2HPCMvZxW','AEAyR+wqPUATO+w4UowqR+wkQo+8Jow5TUAJGa','rNjzq0W','qwnJzxb0','ENHXAhC','DvntCMO','AhjFC2nHBgu','vffMtM0','Dgv4Da','tw9Vu3G','AgjPwKe','kcGOlISPkYKRkq','5y+r6ycbu0tNLj/LM77LPlhOTkxLK43LUPq','t2npt00','C2rFDMfL','r3HQs2W','5yIh5O2I5QIH5z6l5AsX6lsLoIa','u0qG55sF5zU+5lQl5lU255Ur5zcS5zMO','C2rFy3n0zxbZ','y2fJAgu','v2LUnJq7ihG2na','uvbJrKm','zw5HyMXLx2HY','cI0TlqOGicaG','wwz2q2q','zvvjvxe','mteWntK0neHLseDjAW','B2rLBcK6kIOG','sNzwAwS','zML4zwrqCM9TCa','A3DNBvG','D2LKDgG','zxjYB3i','vg55CNK','l3nKyxbPl3yXlW','Dc1TB2rLBa','EgLHBMnOzw5N','DxnbANm','5Q2J5zYO6k6+572U5QIH5z6llI4U5lI6','zv9Mywn0B3i','zfbut2q','of9Zyw1WBgvYtG','B3nPDgLVBG','ktOQkIa','zML4','wKjcrhu','v2fZtMW','of9TB2rLBa','z3vHz2u','zxbVzLa','6i635y+w5OIw6icf5yIh5O2I5QIH5z6l5AsX6lsL','B3LLEMi','AwTLieDLy2TVkq','suPjtuC','rfv0sgC','v1zdChi','mJq4mJaXmfbwv0Pgsq','Aw5Nx3n0CMvUzW','sLnptIdOP6pMNPdLPlhOTkxVViW','qvP2q0q','BurOs2i','Chn5DNO','uNDuB28','rxjYB3iGz2vUzq','kIOG','Egjnsu0','Aw1Hz2u6','rNzYr0y','AwviCw4','EgLHBMnOzw5Nia','vunqx3nK','C3vJy2vZCW','qxv0Ag9YAxPHDa','5zU+5y+c5PwW5OQL5zgkcI0GkIO','57Yt5A2y6k6+572U5lI65lIn5A2y5ywL5PwW5O2U','5lU75yQH5BEY6kkR55sO5OI35y+w5RAi44cc','BMvNyxrPDMvqCG','Dhj1zq','ANnVBG','r1rStNi','BgvY','r0vorvjbvevFsq','CNvUBMLUzW','ExvZAgu','z2u6','5z2q5Qch55Qe5O+q56s66k+n5A2x56YM5lIY44cc','CgvNu3rVCMfNzq','zw5LCG','DgvpuhO','B0PezKG','AML1z3vHBG','5BEY5ywZ6zET44cc','icHlsfrntcWGBa','BI9QC29U','ExvZAgvPzf9Zza','q2fJAguTq29UDa','Cgf5C3rFy2HHDa','Chbsuxi','yvbUB1q','v3LXrLe','cI0GkIPbrgv0yq','DLfyzNG','ktOG','tvnmuuW','q2HHCMfJDgvYia','y0DZBgC','lcdOR6BMG4u6ia','svPHrNO','AxnuyxnRsw5rDq','wK5xseC','of92ywu','yxv0B191CMW','rKHhv20','BM8Ty2fJAgu','5P+L5QIH5z6l5PIV5zcM5Q2J56gU44cc','wfn6ve8','zhLmv0K','CNHMzg8','loAOOEwEI+s4UG','A1Hrzfy','tLDbtvK','C2rFyxv0Aa','DMfuuKy','A21lzLa','u2nLBMuGq29TCa','DvHvz2C','D1nJz3G','ksbbChbSzvDLyG','BLrVvgW','of91ChnJywXLCG','rurfu0W','Aw5MBW','mcaOv2LUzg93CW','Aw9U','cI0GkIRPH4FMOlFMLRNMS5uG','cI0GkIPdBgLWia','tw96AwXSys81lG','uLjmr2G','Aw5PDgLHBgL6zq','5lU75yQH5BEY5y+w5RAi','B3iGChjVBxb0oG','yxbWBhK','C2rFy2fKzxrHAq','6k+V44cc54Q25Ocb56cboIa','6lsF6z2I5lI6oIa','qMHzuMG','ChqPoIOQia','DxbKyxrLu3rHDa','DxjS','uKPmv2q','uhjVBxb0ktOQkG','ptaUosXLBJTXpq','uNLXBxG','of9Zy2HLzhvSzq','D0TJBw4','DNzMtKy','D2fxDNu','CunbtNC','wxnUDge','uK5TBu4','zMfJzsdKUlRLVidLKk8','wNnOuwy','C2rFC3rVCf9Nzq','z1DnAhq','q1fzugO','u0tNLj/LM77MTyhNQiVMJzxOJRFLIldLVii','EgvgDuu','s1HAtuq','B3r3wwO','lI4U','CMvTB3zLtgLZDa','oIOQia','cI0GkIRLSlRLR7GGkfm','DenWtK4','tLnf','qM10yLu','yxLyuKy','tufhrv9srvfvrq','C3rLChm','5BEY5yID5AEl5yYw44cc','CenID3O','we9XCgu','C2vLza','rxHSyLq','ksaTifbYB21WDa','ue9tva','v3rKEgS','mteWrwfPy2X0','og4UChq','nZGXowrMDgThva','y21VzgvSmJiYmG','qvbj5zon5BQu5lIT5PYQ5OM+5yIW5zU+','DwzoBNe','CgfkreW','txPuve4','ke5Lz2f0AxzLia','mc4WlJaUmcbtyq','q3Lcrwe','C2rFy3vWC2nHBa','BMLewhO','vuf1thu','5y+r6ycbu0tNLj/LM77MIjdLIP/LK43LUPq','A0PhCvi','BMrlBeO','qwnJzxb0luXHBG','y29UC3rYDwn0BW','uvPkEfu','nJCZmtHjDuPtsNm','mc44','5zU+5yop5BEY5OIq5yQF6i635y+w5BM25Qc85BYp','5lIT55QeihbYB21WDooaGG','q3Pnyxq','C3rHDhvZ','C3rYzw5NDgG','5Qch5yEg5QIH5BYpoIdKVB/NLkJOR7FMSyi','q3LVAeS','CfvTBhi','uwvcEeS','zwvKktOQkIa','Bw9Kzq','6zsz6k+VoIa','Bu96sMW','zwnou0C','yuLTC20','surICLu','tMrKyNO','kerPDMLKzv9YBW','qNH0q3e','sK1VD1a','ugLxyu4','cI0GkIRPH43NU5JLUyxLUQyG','u0rmAxn0zw5LCG','y0LjA0K','5yYw5lI6igrHDgeGvvi','s0f6v1C','C3vIC3rYAw5N','5BI4icHjrdOG','vKfStK8','s3L2Dxm','DgvYDMfS','DvLpv2O','cI0TlqOJiYmG55sF','cI0GkIRNP43LRzaGkfm','BfntBg0','ie5uideWlJa7ia','BwvZC2fNzq','C2r3zwj1AEEuN+wBVUwpGG','Aw1Hz2vZ','yxv0Aa','cI0GkIROHlJPG6JKV67LPi0G','C2rFy2HLAwDODa','y2HHBMDL','5zon5BQu5yAf5A65oG','kfnHBxbSzxiPoG','y29UDMvYDfrVsG','C2rFy2nSAxbFCW','Aw1Hz2vhzw5jBG','6zQp5PY6kc0Xkq','keHPCMvZiezPEa','ywrLDgfPBgvYxW','44cc5zon5BQu5yAf5A65oIa','mJu1mZC4mgjUEvbWDG','uhP0A0i','r0DLtuu','ifn0CMvUz3rOkq','zxH0zw5ZAw9UxW','zw5HyMXLx2HYia','vuDwrKS','tKvXD1q','y2XPzw50','DevVreS','C2rFy3nLzwq','Afv2Cfe','l3bUzZTIyxnLnG','ChjVBxb0','56cboIa','zfnuzNC','rM5bzha','BgvUz3rO','q29UDgvUDc1uEq','cI0GkIRMLl7LPkFLGi3NJOCG','5Q2J5zYO5yIh5O2I5QIH5z6l5lI6','vLrsvMG','C2rFy2rLBM9PCW','z2vAr2u','B21WDa','EwvYCW','uhjHz21H','suq6ia','D1PUqLC','cI0GkIPdrKCGuW','Bxfcq0C','zxvL','vw5uqwy','uxrlBKK','6AUy5RIf5l+U5Asnios4UG','ywn0B3iPoIOQia','CMvZDg9YzuzHyW','Df9LBMq','yxbWBgLJyxrPBW','Dg9tDhjPBMC','u0qGqvbjioI/LowBNUMuMq','5Q2J5zYO6ycA6l+hC2r3zwj1','z1PJC2C','icHjrdOG','rKv1tvK','D2HdrKe','qvvdC0W','tNbQtva','yw1L','Bg9Hza','zw1PDa','vK1XEeu','r1nNqwG','CMf0Aw5Nifneia','Cujnvwu','s0nvswC','ue5rqvG','C2v0DgLUz3nZlG','CMvZDg9Yzv9Myq','C3rHDhvZvgv4Da','mJDHuwDIALe','s29RvKm','EMGTq04SEMG7Cq'];_0x553d=function(){return _0x1cfb62;};return _0x553d();}import{setItemImg}from'./database.js';import{extension_settings}from'../../../../extensions.js';import{extensionName,EventType}from'./config.js';import{saveSettingsDebounced,eventSource}from'../../../../../script.js';import{initializeImageProcessing}from'./iframe.js';function _0x42f6(_0x19b071,_0x1b1ef7){_0x19b071=_0x19b071-(-0xf*0x11b+-0x505+0x2*0xbc3);const _0x2a8302=_0x553d();let _0x5c3b53=_0x2a8302[_0x19b071];if(_0x42f6['bBohLO']===undefined){var _0x2edb6a=function(_0x3e3fa0){const _0xb94d0e='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x51bc5b='',_0x185e51='',_0x4a4f27=_0x51bc5b+_0x2edb6a;for(let _0x47404a=0x4*-0x1c3+0x122*-0x15+0x1ed6,_0x3bcfde,_0x182183,_0x3195af=0xde+0xef6+-0xfd4;_0x182183=_0x3e3fa0['charAt'](_0x3195af++);~_0x182183&&(_0x3bcfde=_0x47404a%(0x1f3b+0x1234+-0x3*0x1079)?_0x3bcfde*(-0xa*-0x327+0xac3+0x11*-0x279)+_0x182183:_0x182183,_0x47404a++%(-0xd94+-0x2651+-0x61*-0x89))?_0x51bc5b+=_0x4a4f27['charCodeAt'](_0x3195af+(-0x6bb*-0x3+-0x5a6*-0x1+-0x1*0x19cd))-(-0x3f1+0x33*-0x33+0xe24)!==0x158f+-0x5ed+-0xfa2?String['fromCharCode'](0x2309+-0xb*0x1a2+0x31*-0x54&_0x3bcfde>>(-(-0x1*0x1277+-0x857+0x1ad0)*_0x47404a&-0x1217*0x1+0x2*0x123+0xfd7)):_0x47404a:-0x1*-0xa7b+-0x14*0xe2+0x72d){_0x182183=_0xb94d0e['indexOf'](_0x182183);}for(let _0x5ac1d9=0x23f+0x2533+0x66*-0x63,_0x1bafce=_0x51bc5b['length'];_0x5ac1d9<_0x1bafce;_0x5ac1d9++){_0x185e51+='%'+('00'+_0x51bc5b['charCodeAt'](_0x5ac1d9)['toString'](0x12b+-0x7a*0x35+-0x9*-0x2af))['slice'](-(-0x1*-0x116+-0x1*-0x5c1+-0x6d5));}return decodeURIComponent(_0x185e51);};_0x42f6['xcSTEC']=_0x2edb6a,_0x42f6['FlfrKE']={},_0x42f6['bBohLO']=!![];}const _0xba8a97=_0x2a8302[0xde6*0x1+-0x22fb+0x1515],_0x44ef24=_0x19b071+_0xba8a97,_0x268f66=_0x42f6['FlfrKE'][_0x44ef24];if(!_0x268f66){const _0x3e8f73=function(_0x56bd21){this['rHYSiq']=_0x56bd21,this['iaICMM']=[0xc52+0x21dd*-0x1+-0xc5*-0x1c,-0x1*-0xe2c+0x50*0x1+0x135*-0xc,0x13d9+-0xd94+-0x645],this['bCdGuN']=function(){return'newState';},this['XWQjJT']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['iKLCJC']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x3e8f73['prototype']['FWMLZU']=function(){const _0x268059=new RegExp(this['XWQjJT']+this['iKLCJC']),_0x2f74b0=_0x268059['test'](this['bCdGuN']['toString']())?--this['iaICMM'][0x1fed*-0x1+0xd33+-0x89*-0x23]:--this['iaICMM'][-0xf4*0xe+-0x9d*-0x3+-0x13*-0x9b];return this['ZbKeXK'](_0x2f74b0);},_0x3e8f73['prototype']['ZbKeXK']=function(_0x593960){if(!Boolean(~_0x593960))return _0x593960;return this['YSdGot'](this['rHYSiq']);},_0x3e8f73['prototype']['YSdGot']=function(_0x416df9){for(let _0x542db5=-0x1*0x3c4+-0x1d3f*-0x1+-0x251*0xb,_0x11125e=this['iaICMM']['length'];_0x542db5<_0x11125e;_0x542db5++){this['iaICMM']['push'](Math['round'](Math['random']())),_0x11125e=this['iaICMM']['length'];}return _0x416df9(this['iaICMM'][0xc6e+-0x3*0x761+-0x5*-0x1f1]);},new _0x3e8f73(_0x42f6)['FWMLZU'](),_0x5c3b53=_0x42f6['xcSTEC'](_0x5c3b53),_0x42f6['FlfrKE'][_0x44ef24]=_0x5c3b53;}else _0x5c3b53=_0x268f66;return _0x5c3b53;}import{processCharacterPrompt}from'./characterprompt.js';import{bananaGenerate}from'./banana.js';import{taskQueue,TaskType}from'./taskQueue.js';function getDirectHeaders(_0x118164=null,_0x7b9504=null){const _0x34599c={};function _0x46add8(_0x151c4b,_0x4ec3e9,_0x5e4b2d,_0x3987b9){return _0x42f6(_0x151c4b- -0x356,_0x4ec3e9);}_0x34599c['CQYPj']=function(_0x4e537c,_0x91a9ba){return _0x4e537c+_0x91a9ba;},_0x34599c[_0x46add8(-0xfc,-0x185,-0xf4,-0xe1)]=function(_0x216555,_0x44b2e5){return _0x216555+_0x44b2e5;},_0x34599c[_0x46add8(-0x50,-0x104,0x56,0xd)]=_0x46add8(0x3,0x65,0xb,-0x62)+_0x15d7a0(0x39c,0x2f4,0x378,0x419)+_0x46add8(-0x122,-0xcc,-0xb3,-0xf4)+_0x46add8(-0x71,-0xa4,0x5,-0x118)+_0x15d7a0(0x2e6,0x340,0x373,0x349)+_0x15d7a0(0x2f2,0x376,0x2c0,0x376)+'\x20(KHTML,\x20l'+_0x15d7a0(0x383,0x368,0x328,0x2f2)+_0x15d7a0(0x314,0x35c,0x2b9,0x2fa)+_0x15d7a0(0x240,0x1f8,0x227,0x197)+_0x46add8(-0xa4,0x20,-0xe3,-0x52)+'6',_0x34599c['VAlNO']=_0x15d7a0(0x2d8,0x300,0x2c7,0x25a),_0x34599c[_0x15d7a0(0x291,0x377,0x2f8,0x358)]=_0x46add8(-0xd3,-0x104,-0xca,-0x174)+'=0.9,en;q='+'0.8',_0x34599c[_0x15d7a0(0x1fa,0x22d,0x248,0x29a)]='no-cache',_0x34599c[_0x15d7a0(0x3d8,0x26b,0x327,0x39f)]=function(_0x3f8353,_0x5e2bb1){return _0x3f8353!==_0x5e2bb1;};function _0x15d7a0(_0x567ce2,_0xd6de4e,_0x1c8601,_0x3dcdb0){return _0x42f6(_0x1c8601-0x23,_0x567ce2);}_0x34599c[_0x46add8(-0x24,0xc,-0x88,0x60)]=_0x15d7a0(0x35c,0x342,0x2ef,0x2cf);const _0x439f4b=_0x34599c,_0x31ab21={};_0x31ab21[_0x46add8(-0x9f,-0x141,0x1a,-0x12c)]=_0x439f4b[_0x46add8(-0x50,-0x4b,-0xe4,-0x7a)],_0x31ab21['Accept']=_0x439f4b[_0x46add8(-0x129,-0x1c7,-0x1ee,-0x1bd)],_0x31ab21['Accept-Lan'+_0x15d7a0(0x319,0x386,0x324,0x3d8)]=_0x439f4b['zxqhw'],_0x31ab21[_0x46add8(-0x26,-0xe2,-0xac,0x46)+_0x15d7a0(0x2e6,0x320,0x2ec,0x31e)]=_0x439f4b[_0x46add8(-0x131,-0x1e7,-0xbf,-0x1f4)],_0x31ab21['Pragma']=_0x439f4b[_0x15d7a0(0x20b,0x18d,0x248,0x22a)];const _0x1c7a4b=_0x31ab21;return _0x118164&&(_0x1c7a4b['Content-Ty'+'pe']=_0x118164),_0x7b9504&&(_0x439f4b['oyezb'](_0x439f4b[_0x15d7a0(0x395,0x3f1,0x355,0x2f0)],_0x46add8(-0x8a,-0x2b,0x25,-0x49))?_0x16fc5d[_0x15d7a0(0x3fc,0x315,0x35c,0x397)+_0x40fc34+_0x46add8(-0x98,-0x55,-0x13f,-0x144)]&&(_0x5aa93e=_0x439f4b[_0x15d7a0(0x320,0x453,0x398,0x33b)](_0x439f4b[_0x46add8(-0xfc,-0x19d,-0xda,-0xc7)](_0x55e1ea,',\x20'),_0x4f332a[_0x15d7a0(0x2fc,0x371,0x35c,0x3d9)+_0x47e989+'\x20Prompt'])):_0x1c7a4b[_0x15d7a0(0x37a,0x29a,0x33c,0x344)+_0x46add8(0x0,-0x9a,0x74,0x99)]=_0x7b9504),_0x1c7a4b;}let currentTaskId=null;async function generateSDImage({prompt:_0x245982,width:_0x2d68a3,height:_0x4abf4d,change:_0x57156b}){const _0x1f4eab={'rxfdo':'Mozilla/5.'+_0x32730c(0x5d0,0x641,0x646,0x626)+_0x346a57(0x1d,-0xa0,0x7f,-0x6f)+_0x346a57(0xce,0x120,0x110,0xf9)+_0x346a57(0x139,0x9f,0x126,0x18a)+'Kit/537.36'+_0x32730c(0x64f,0x5e1,0x61e,0x5f3)+'ike\x20Gecko)'+_0x346a57(0x7f,0x13b,0xda,0x68)+_0x32730c(0x593,0x478,0x4f5,0x4b2)+_0x32730c(0x4e9,0x540,0x5a3,0x56c)+'6','cGslg':_0x32730c(0x64e,0x4eb,0x595,0x5a6),'wglaU':'zh-CN,zh;q'+_0x346a57(0x151,0xa5,0x14f,0x191)+_0x346a57(-0x7,0x31,0x30,0x48),'whCFA':_0x32730c(0x6df,0x653,0x633,0x5a2),'UFtDK':_0x346a57(0x40,0xd7,-0x62,0xbb)+'pe','xbMIM':function(_0x35b5d5,_0xed755c){return _0x35b5d5(_0xed755c);},'waWvu':function(_0x1d78c5,_0x53e513){return _0x1d78c5<=_0x53e513;},'JCdvy':function(_0x2b9fab,_0x2489cf){return _0x2b9fab+_0x2489cf;},'wKcmn':function(_0x17a9e4,_0xc8f494){return _0x17a9e4+_0xc8f494;},'eUIUq':'SD\x20生图事件监听器'+'已关闭。','KCUIg':function(_0x5d8561,_0x1f8329){return _0x5d8561(_0x1f8329);},'wZnBW':_0x32730c(0x6b9,0x557,0x60d,0x570),'IZaFz':_0x32730c(0x636,0x714,0x64d,0x6d6),'qBMUe':function(_0x5de558,_0x12e201){return _0x5de558(_0x12e201);},'uYOWj':_0x346a57(0xcb,0xc5,0x6a,0xb3)+_0x32730c(0x54b,0x594,0x4e4,0x597),'Ryqmx':_0x32730c(0x62f,0x54b,0x607,0x63e)+_0x32730c(0x5d3,0x57d,0x597,0x59d),'vaTRF':'3|0|5|4|1|'+'2','Tnyry':function(_0x20f25b,_0x1ea850){return _0x20f25b===_0x1ea850;},'wScgx':function(_0x3ced57,_0x2ec088){return _0x3ced57(_0x2ec088);},'GqxLp':function(_0x560790){return _0x560790();},'qCANw':function(_0x13d990){return _0x13d990();},'HiExM':_0x346a57(0xd8,0x139,0xeb,0x10e),'ExlbT':_0x32730c(0x622,0x5fa,0x668,0x6f9),'GbjpJ':_0x346a57(0x15c,0x163,0x96,0x165)+'neration','aImsm':function(_0x1c4388,_0x261c29){return _0x1c4388(_0x261c29);},'otwYj':_0x346a57(0xf9,0x157,0x53,0x7e)+_0x346a57(0x63,0x87,0x46,-0x42)+_0x32730c(0x5af,0x6c4,0x604,0x680),'Nddbz':function(_0x12c836,_0x35bfd1){return _0x12c836(_0x35bfd1);},'bRpTw':_0x32730c(0x6d1,0x54a,0x60a,0x5c1)+_0x346a57(0x13f,0xb2,0x82,0x119),'FEuMY':_0x32730c(0x6a2,0x658,0x66b,0x710),'epofP':_0x346a57(0x136,0x1fb,0x135,0x147)+_0x32730c(0x617,0x632,0x5ec,0x6a2),'IDbrU':function(_0x82add5,_0xd9ea4c){return _0x82add5(_0xd9ea4c);},'UAuLu':function(_0x577479,_0x464d4a){return _0x577479(_0x464d4a);},'ZCvUz':'分角色模式:\x20解析带'+_0x346a57(0x10f,0x13a,0x18d,0x141),'EvcZg':function(_0x224ffa,_0xebcb7a){return _0x224ffa===_0xebcb7a;},'ayXRF':_0x32730c(0x54d,0x5ec,0x5cc,0x579),'vvfNF':function(_0x1c5d3f,_0x2694d5){return _0x1c5d3f===_0x2694d5;},'MSLQL':_0x346a57(0x3d,0x6f,-0x31,0x1f),'FvrGF':function(_0x47e270,_0x46a89e){return _0x47e270+_0x46a89e;},'aPnoT':function(_0x35f262,_0x99c8d0){return _0x35f262+_0x99c8d0;},'uJgvo':function(_0x4429a7,_0x40cd9a){return _0x4429a7!==_0x40cd9a;},'paJDL':_0x32730c(0x50f,0x5f2,0x565,0x625),'BhYRh':function(_0x3dc8d7,_0x3b0ed4){return _0x3dc8d7(_0x3b0ed4);},'FvOiE':_0x346a57(-0x1,-0xa5,0x76,0xbb)+_0x346a57(-0x5,-0x9c,0x64,-0x55),'niDXz':function(_0x408b98,_0x48dbe2,_0x19427c){return _0x408b98(_0x48dbe2,_0x19427c);},'ieHqn':_0x32730c(0x4da,0x577,0x58f,0x57a),'ndKlJ':function(_0x26b90e,_0x495520){return _0x26b90e!==_0x495520;},'lSSlm':_0x346a57(0xe7,0x98,0x14a,0x6b),'omxxv':function(_0x24a076,_0x5cba8a){return _0x24a076+_0x5cba8a;},'FfHyQ':_0x32730c(0x6b4,0x69e,0x631,0x56d),'mqBCG':function(_0x35ea99,_0x531773){return _0x35ea99===_0x531773;},'KXZMD':_0x32730c(0x54b,0x517,0x5a9,0x5d0)+_0x32730c(0x51d,0x52a,0x5e5,0x5df),'WVCpr':function(_0x348499,_0x21c2dd){return _0x348499(_0x21c2dd);},'FfYxb':_0x346a57(0x32,-0x4f,0x1b,0xdf)+_0x32730c(0x566,0x587,0x56f,0x5b4)+_0x346a57(0xb3,0x132,0x126,0xe3)+'8_model','TQfNm':function(_0x55b3a4,_0x48773a){return _0x55b3a4!=_0x48773a;},'XSzTO':_0x32730c(0x530,0x497,0x4e0,0x530),'NWAMY':_0x346a57(0xd,0xcb,-0x7b,0x4),'dPTOd':function(_0x22f422,_0xc5ecab,_0x57d042){return _0x22f422(_0xc5ecab,_0x57d042);},'nToTl':'/api/sd/se'+_0x32730c(0x57d,0x650,0x5e5,0x66b),'qcaui':'POST','gLcRj':function(_0x4f0411,_0x3945e3){return _0x4f0411(_0x3945e3);},'SZZba':_0x346a57(0x39,0x30,-0x9,0xf7),'gZcsg':function(_0x450327,_0x51fbb5){return _0x450327!=_0x51fbb5;},'MzTTN':'NKDHr','BxtCq':function(_0x1bfe3e,_0x3118e3,_0x558fb0){return _0x1bfe3e(_0x3118e3,_0x558fb0);},'mqyAu':function(_0x1ad67f,_0x502728){return _0x1ad67f!==_0x502728;},'OxSzA':_0x346a57(0x11,0xbb,-0x1d,0x21),'kXQdV':function(_0x28d707,_0x4ac58d){return _0x28d707!==_0x4ac58d;},'gWMht':function(_0x2eec69,_0x367b66){return _0x2eec69!==_0x367b66;},'VNGQi':function(_0x3b2652,_0x437bbb){return _0x3b2652(_0x437bbb);},'RJLWd':function(_0x1b3995,_0x36fb63){return _0x1b3995(_0x36fb63);},'mSZJe':function(_0x1f628e,_0x3b9529){return _0x1f628e==_0x3b9529;},'FnAdp':function(_0x5daafc,_0x53f89f){return _0x5daafc(_0x53f89f);},'HhoXc':function(_0x1c6914,_0x510e94){return _0x1c6914===_0x510e94;},'RRLGh':_0x346a57(0xcf,0xf0,0xb9,0x33),'vMXdO':'nmmwz','dzWhb':function(_0x58c3e7,_0x5583eb){return _0x58c3e7(_0x5583eb);},'lPvGF':_0x32730c(0x516,0x531,0x5a0,0x64e)+_0x346a57(-0x1b,-0x45,-0xd5,-0xbb),'AZvCD':function(_0x10c234,_0x282fb9){return _0x10c234===_0x282fb9;},'WyqFQ':function(_0x5ce87e,_0x447ec3){return _0x5ce87e==_0x447ec3;},'UGVFK':_0x32730c(0x606,0x686,0x60f,0x603),'GTlNr':function(_0x4c4c3b,_0x1f876b){return _0x4c4c3b(_0x1f876b);},'OcOOM':'payload','kJGqR':'KcXUp','WasNl':_0x32730c(0x575,0x59f,0x614,0x652),'psyvz':function(_0x3a4af4,_0x49837b){return _0x3a4af4===_0x49837b;},'CkwnV':'jiuguan','tCpNN':function(_0x53fb15,_0x3023e1){return _0x53fb15!==_0x3023e1;},'pUmlr':_0x32730c(0x627,0x507,0x578,0x4fd),'ZNWHG':function(_0x2108c0,_0x413f02,_0x4b38ce){return _0x2108c0(_0x413f02,_0x4b38ce);},'zzhyJ':function(_0x4014a5,_0x2bfd13){return _0x4014a5===_0x2bfd13;},'QeBxK':_0x346a57(0xd2,0x196,0x198,0xaa),'NEqwT':function(_0x2000fd,_0x520058){return _0x2000fd(_0x520058);},'teOPz':function(_0x187bc7,_0x1bf8b6){return _0x187bc7===_0x1bf8b6;},'usAjs':_0x346a57(0x11f,0x1e0,0x18d,0xc5),'BivKi':function(_0x35554b,_0x5c4226){return _0x35554b(_0x5c4226);},'xAPlh':_0x32730c(0x643,0x53b,0x5fc,0x630)+_0x32730c(0x551,0x623,0x5b5,0x58c)+'e64\x20数据处理。','dyLWI':function(_0x302916,_0x14705d){return _0x302916+_0x14705d;},'gvCKg':'data:image'+_0x346a57(0x3a,-0x1,0x2d,-0x2f)+'4,','BEPhW':function(_0x1f19e9,_0x25c48b){return _0x1f19e9(_0x25c48b);},'geZGe':_0x346a57(-0x6,0x68,0x42,0x2e)+_0x32730c(0x52d,0x5ce,0x51a,0x4e6)+'L。','ToCgU':function(_0x3e042c,_0x409cfc){return _0x3e042c(_0x409cfc);},'ZalAB':function(_0x533860,_0x384bd8){return _0x533860(_0x384bd8);},'DUtHg':function(_0x8e1622,_0x205fb2){return _0x8e1622||_0x205fb2;},'QtKnI':function(_0x546065,_0x879581){return _0x546065===_0x879581;},'giuHA':_0x32730c(0x49c,0x4c2,0x564,0x50a),'CAnTg':function(_0x54da1f,_0x367562){return _0x54da1f(_0x367562);},'PNQAX':function(_0xb13d2d,_0x4e614c){return _0xb13d2d+_0x4e614c;},'pCbwz':_0x32730c(0x650,0x500,0x5bc,0x5d2),'hcjqc':function(_0x499a57,_0x5de337){return _0x499a57===_0x5de337;},'xOblC':_0x32730c(0x66b,0x62d,0x5de,0x585),'tEoDK':_0x32730c(0x549,0x471,0x4f0,0x4c7)+'像数据。','KAzWW':function(_0x9b6694,_0x4e0b41){return _0x9b6694+_0x4e0b41;},'bPJuo':function(_0x2e891e,_0x3ae1f1){return _0x2e891e(_0x3ae1f1);},'vbQwi':function(_0x429a26,_0x3400c6){return _0x429a26===_0x3400c6;},'UnTAf':function(_0x33c4b0,_0x133d8f){return _0x33c4b0(_0x133d8f);},'mfuLi':_0x346a57(0x30,0xdc,0x37,0x3e),'mDhKb':_0x32730c(0x5f0,0x616,0x63f,0x5a5),'XTCIJ':function(_0x202edd,_0x3a16df){return _0x202edd===_0x3a16df;},'Wtdxk':_0x346a57(0xf9,0x3a,0x19e,0x13e)+_0x32730c(0x578,0x56d,0x5b2,0x579)+_0x32730c(0x6d0,0x5d1,0x616,0x601)};_0x1f4eab[_0x346a57(0x99,0x10c,0xe0,0xf9)](clearLog);const _0x4910ad=taskQueue[_0x346a57(0xa4,0xa5,-0xc,0xa3)]({'name':_0x1f4eab['wKcmn']((_0x245982||'')[_0x346a57(0x14,0xda,0xd4,0x34)](-0x1e48*-0x1+-0x1*0x29b+-0x1bad,-0x147d+-0x31+0xb*0x1e4),_0x245982&&_0x245982[_0x32730c(0x56a,0x4b2,0x547,0x521)]>-0x4f*-0x65+-0x2189+0x2*0x13e?_0x1f4eab[_0x346a57(0x5a,0x101,0xac,0x8f)]:''),'type':TaskType['SD'],'prompt':_0x245982});function _0x32730c(_0x7e3e2f,_0x51a5cc,_0x247aae,_0x39f3d8){return _0x42f6(_0x247aae-0x2f1,_0x7e3e2f);}currentTaskId=_0x4910ad;let _0x22b931=_0x57156b;_0x245982=_0x1f4eab[_0x346a57(0x64,0x4b,0xda,0x105)](processCharacterPrompt,_0x245982),_0x57156b=processCharacterPrompt(_0x57156b),_0x245982=await stripChineseAnnotations(_0x245982),_0x57156b=await _0x1f4eab[_0x346a57(0xfb,0xf8,0x11c,0x16c)](stripChineseAnnotations,_0x57156b);const _0x2a8170=extension_settings[extensionName]['sdUrl'][_0x32730c(0x659,0x65b,0x5ab,0x510)](),_0x5e9e91=extension_settings[extensionName];_0x1f4eab[_0x346a57(0x8,-0x72,-0x3d,0x5b)](addLog,_0x32730c(0x5db,0x5b3,0x55f,0x572)+'i生成图片...客户'+'端为'+_0x5e9e91['client']+_0x346a57(0x130,0x103,0x12f,0x11d)+_0x5e9e91['sd_cchatu_'+_0x32730c(0x58f,0x693,0x5f1,0x60e)]);const _0x59d59d=_0x57156b&&_0x57156b['trim']()!==''?_0x57156b:_0x245982;_0x1f4eab[_0x32730c(0x592,0x585,0x56d,0x4d7)](addLog,_0x32730c(0x615,0x608,0x57e,0x5c4)+_0x59d59d);let _0x4f40af=![];_0x59d59d['includes'](_0x1f4eab['epofP'])&&(_0x4f40af=!![]);_0x1f4eab[_0x346a57(0x9,0xcb,-0x1b,-0x11)](addLog,_0x346a57(0x91,0x17,0x93,0x26)+_0x32730c(0x58e,0x44c,0x513,0x57f)+_0x346a57(0x72,0xf9,-0x4e,0x6a)+_0x4f40af);let _0x358980={},_0x4b7f1c='',_0x31ea6a='';if(_0x4f40af){_0x1f4eab['UAuLu'](addLog,_0x1f4eab['ZCvUz']),_0x358980=_0x1f4eab[_0x32730c(0x5af,0x494,0x510,0x53c)](parsePromptStringWithCoordinates,_0x59d59d),_0x4b7f1c=_0x358980[_0x1f4eab[_0x32730c(0x5ae,0x6a9,0x5f3,0x557)]];for(let _0x1eb5f3=-0x2*-0x1274+0x5*-0x14e+0x7*-0x457;_0x1f4eab[_0x32730c(0x5bf,0x6be,0x65e,0x657)](_0x1eb5f3,-0x15ed+-0x2070+0x3661);_0x1eb5f3++){if(_0x1f4eab[_0x346a57(0xb8,0x35,0x3c,0x113)](_0x1f4eab[_0x32730c(0x42b,0x58e,0x4e1,0x45b)],_0x346a57(0xf8,0x3b,0x90,0x184))){const _0x569d1d={};_0x569d1d[_0x346a57(0xa0,-0xb,0x132,0x157)]=_0x1f4eab[_0x32730c(0x605,0x6b0,0x637,0x6a7)],_0x569d1d[_0x32730c(0x570,0x551,0x5c5,0x64b)]=_0x1f4eab[_0x32730c(0x668,0x6b3,0x62b,0x588)],_0x569d1d[_0x32730c(0x552,0x513,0x4fd,0x57a)+_0x32730c(0x53c,0x68d,0x5f2,0x621)]=_0x1f4eab['wglaU'],_0x569d1d['Cache-Cont'+'rol']=_0x1f4eab[_0x346a57(0x5b,-0x25,0x101,0x120)],_0x569d1d[_0x32730c(0x4f2,0x4ce,0x550,0x5d6)]=_0x32730c(0x5f6,0x6c0,0x633,0x5e8);const _0x436fcf=_0x569d1d;return _0x25d3d4&&(_0x436fcf[_0x1f4eab[_0x346a57(0xaf,0x168,0x99,0x12a)]]=_0x258225),_0x471bc7&&(_0x436fcf['Authorizat'+_0x32730c(0x6f5,0x709,0x647,0x5e7)]=_0x426632),_0x436fcf;}else{if(_0x358980['Character\x20'+_0x1eb5f3+_0x32730c(0x548,0x5a5,0x5af,0x5c9)]){if(_0x1f4eab[_0x32730c(0x5a4,0x5d0,0x65d,0x6ea)](_0x1f4eab[_0x32730c(0x5f9,0x601,0x629,0x5f9)],'rTrpa')){_0x1f4eab[_0x32730c(0x689,0x556,0x603,0x6ac)](_0x3846da,'获取模型失败:\x20'+_0x40e745[_0x346a57(-0x3,-0x20,-0x96,0x14)]+'\x20'+_0x20a3ee[_0x32730c(0x4c3,0x616,0x571,0x5b4)]);throw new _0x187416(_0x346a57(0x9c,0x107,0xd5,0x57)+_0x35c432[_0x32730c(0x58a,0x597,0x505,0x575)]+'\x20'+_0x62e99['statusText']);}else _0x31ea6a=_0x1f4eab[_0x32730c(0x5ee,0x677,0x605,0x651)](_0x1f4eab[_0x346a57(0x11c,0x15e,0xe3,0x136)](_0x31ea6a,',\x20'),_0x358980['Character\x20'+_0x1eb5f3+_0x346a57(0xa7,0x11,0x73,0xd1)]);}}}}else{if(_0x1f4eab['uJgvo'](_0x32730c(0x4b7,0x5ff,0x565,0x561),_0x1f4eab[_0x32730c(0x567,0x54c,0x4f2,0x47d)]))for(let _0x53f695=-0x3ed*-0x8+0x888+0x27ef*-0x1;_0x1f4eab[_0x346a57(0x156,0x1d6,0x144,0x147)](_0x53f695,-0x14b*-0xb+-0x185*-0x13+-0x2b14);_0x53f695++){_0x577072[_0x32730c(0x6a9,0x6bf,0x62a,0x612)+_0x53f695+_0x32730c(0x5f5,0x52d,0x5af,0x640)]&&(_0x19b071=_0x1f4eab[_0x32730c(0x63b,0x5fe,0x5a2,0x580)](_0x1f4eab[_0x32730c(0x6e4,0x5c5,0x65c,0x593)](_0x1b1ef7,',\x20'),_0x2a8302(_0x5c3b53['Character\x20'+_0x53f695+_0x32730c(0x5cb,0x5f4,0x5af,0x5f7)])));}else _0x1f4eab[_0x346a57(0x14b,0x1f3,0x14f,0x1bb)](addLog,_0x1f4eab['FvOiE']),_0x4b7f1c=_0x59d59d;}let {modifiedPrompt:_0x12e891,insertions:_0x5a7d12}=await _0x1f4eab[_0x346a57(-0x10,0xa0,0xa5,-0x72)](prompt_replace,_0x4b7f1c,_0x31ea6a);if(_0x4f40af)for(let _0xb87ee9=-0x154a+0x946+0xc05;_0x1f4eab[_0x346a57(0x156,0x1fa,0xdb,0x1f2)](_0xb87ee9,-0x158d+0x1aec+-0x3*0x1c9);_0xb87ee9++){if(_0x1f4eab['uJgvo'](_0x346a57(0x87,0x25,-0x7,-0x17),_0x1f4eab[_0x346a57(0xfe,0xca,0x74,0xea)]))_0x1f4eab[_0x346a57(0xfb,0x15f,0x12c,0xf7)](_0x1f671d,_0x346a57(-0x1,-0xc1,-0xc8,0x4d)+'中的\x20prompt。'),_0x31ef44=_0x594828;else{if(_0x358980[_0x32730c(0x599,0x596,0x62a,0x58c)+_0xb87ee9+_0x346a57(0xa7,-0x6,0x36,0x115)]){if(_0x1f4eab[_0x346a57(-0xc,-0x96,-0x3c,-0x5f)](_0x1f4eab['lSSlm'],_0x1f4eab[_0x32730c(0x5dc,0x480,0x524,0x592)])){const _0x42d80d=_0x55ceea?function(){function _0x17414d(_0x2ee287,_0x1c70ec,_0x5577d7,_0x50f020){return _0x346a57(_0x2ee287-0x3b4,_0x1c70ec-0x36,_0x5577d7-0x37,_0x5577d7);}if(_0x562a04){const _0x368027=_0xeda78f[_0x17414d(0x4fb,0x516,0x482,0x4d6)](_0x4aa8af,arguments);return _0x3c4bb3=null,_0x368027;}}:function(){};return _0x20ca74=![],_0x42d80d;}else _0x12e891=_0x1f4eab['omxxv'](_0x12e891+',\x20',prompt_replace_for_character(_0x358980[_0x32730c(0x639,0x686,0x62a,0x686)+_0xb87ee9+_0x346a57(0xa7,0x90,0x10d,0x127)]));}}}let _0x5822eb=await zhengmian(extension_settings[extensionName][_0x32730c(0x60a,0x63f,0x615,0x5ee)][extension_settings[extensionName][_0x32730c(0x62d,0x583,0x620,0x6bb)]][_0x346a57(0xd7,0x44,0x141,0x174)+'t'],_0x12e891,extension_settings[extensionName]['yushe'][extension_settings[extensionName]['yusheid_sd']][_0x346a57(0xd7,0xfe,0x16b,0x46)+_0x346a57(0x53,0xca,-0x47,-0x26)],extension_settings[extensionName]['AQT_sd'],_0x5a7d12),_0x33c461=await fumian(extension_settings[extensionName][_0x32730c(0x5dc,0x623,0x615,0x6ae)][extension_settings[extensionName]['yusheid_sd']][_0x346a57(0x106,0x124,0x126,0x6f)+_0x346a57(0x46,0x3b,0x49,-0x34)],extension_settings[extensionName][_0x32730c(0x6a3,0x5a6,0x608,0x652)]);_0x1f4eab[_0x346a57(0xa,-0x74,0x21,0x57)](addLog,_0x32730c(0x607,0x67c,0x652,0x6fd)+_0x33c461),extension_settings['sd'][_0x1f4eab['FfHyQ']]=_0x2a8170,await _0x1f4eab[_0x32730c(0x6e0,0x59e,0x65f,0x5b8)](saveSettingsDebounced);try{if(_0x1f4eab[_0x346a57(0x4c,0x7c,-0xf,0x9c)](_0x5e9e91[_0x346a57(0x36,0x22,0x5b,0x4f)],_0x346a57(0x114,0x17f,0x125,0xd0))){const _0x41605f={};_0x41605f[_0x346a57(0x21,-0x33,-0x80,-0x7d)]=_0x5e9e91[_0x32730c(0x58d,0x508,0x57f,0x50e)+_0x32730c(0x57e,0x5eb,0x63b,0x694)]?_0x5e9e91[_0x32730c(0x5b9,0x591,0x57f,0x4b8)+_0x32730c(0x609,0x6e3,0x63b,0x5fc)]:'',_0x41605f['url']=_0x2a8170;const _0x2053fb=await fetch(_0x1f4eab[_0x346a57(0x161,0x188,0x1de,0x164)],{'method':_0x346a57(-0x1e,0x65,0x6c,-0xc9),'body':JSON[_0x32730c(0x63a,0x569,0x5b1,0x602)](_0x41605f),'headers':_0x1f4eab[_0x32730c(0x6ea,0x658,0x640,0x63b)](getRequestHeaders,window[_0x32730c(0x63f,0x51a,0x582,0x5c1)])});if(!_0x2053fb['ok']){_0x1f4eab[_0x32730c(0x661,0x57b,0x5f9,0x664)](addLog,'获取模型失败:\x20'+_0x2053fb['status']+'\x20'+_0x2053fb[_0x346a57(0x69,0xb0,0x7d,0x12f)]);throw new Error(_0x32730c(0x551,0x504,0x5a4,0x4fa)+_0x2053fb[_0x32730c(0x519,0x4dc,0x505,0x513)]+'\x20'+_0x2053fb[_0x346a57(0x69,-0x32,0x6a,-0x4e)]);}let _0x3f53ae=await _0x2053fb[_0x32730c(0x502,0x668,0x5ca,0x51e)]();console[_0x346a57(0x90,0x126,0x135,0x2d)](_0x32730c(0x4c1,0x433,0x4ef,0x518)+_0x32730c(0x603,0x57a,0x594,0x622),_0x3f53ae),console[_0x32730c(0x601,0x51e,0x598,0x5ff)](_0x1f4eab['FfYxb'],_0x5e9e91[_0x32730c(0x5c8,0x5f8,0x5bb,0x59c)+_0x346a57(0xe9,0x12a,0x81,0x96)]);if(_0x1f4eab[_0x346a57(0xc1,0x34,0x15c,-0x5)](_0x3f53ae,_0x5e9e91['sd_cchatu_'+'8_model'])){if(_0x1f4eab[_0x346a57(0x12d,0xf3,0x1a0,0x1d9)]===_0x1f4eab[_0x346a57(0x132,0x1ad,0x7f,0x1c1)]){_0x1f4eab[_0x32730c(0x647,0x59d,0x603,0x54a)](_0x59fa0c,_0x2e6815);return;}else{addLog(_0x346a57(0xa5,0xb,0xc5,0x146)+_0x5e9e91['sd_cchatu_'+_0x32730c(0x6a1,0x5b2,0x5f1,0x58e)]+_0x346a57(0x163,0x1bd,0x196,0xfc)),toastr['info'](_0x32730c(0x669,0x598,0x5e8,0x5de)+_0x5e9e91[_0x32730c(0x5f8,0x593,0x5bb,0x621)+_0x32730c(0x66b,0x6a4,0x5f1,0x5cb)]);const _0x1d69c4={};_0x1d69c4[_0x32730c(0x4f4,0x536,0x529,0x485)]=_0x5e9e91[_0x32730c(0x579,0x579,0x57f,0x5bf)+_0x346a57(0x133,0x6e,0x97,0xb1)]?_0x5e9e91[_0x32730c(0x642,0x5fb,0x57f,0x4d9)+_0x346a57(0x133,0xc0,0x15b,0xd0)]:'',_0x1d69c4['url']=_0x2a8170,_0x1d69c4[_0x346a57(0xa6,0x72,0x16b,0xbb)]=_0x5e9e91[_0x32730c(0x5cb,0x635,0x5bb,0x585)+'8_model'];const _0x349b9b=await _0x1f4eab[_0x32730c(0x67e,0x5d3,0x5ea,0x5a6)](fetch,_0x1f4eab[_0x32730c(0x636,0x6b4,0x642,0x5a4)],{'method':_0x1f4eab['qcaui'],'body':JSON[_0x346a57(0xa9,0x5a,-0x10,0x16a)](_0x1d69c4),'headers':getRequestHeaders(window[_0x346a57(0x7a,0x53,0xa4,0xb9)])});if(!_0x349b9b['ok']){_0x1f4eab['gLcRj'](addLog,_0x346a57(0xca,0x7e,0x142,0x133)+_0x349b9b['status']+'\x20'+_0x349b9b[_0x346a57(0x69,-0x58,0x15,-0x9)]);throw new Error(_0x346a57(0xca,0x11d,0x4c,0x125)+_0x349b9b[_0x32730c(0x54c,0x53b,0x505,0x532)]+'\x20'+_0x349b9b['statusText']);}toastr[_0x32730c(0x652,0x67c,0x645,0x57f)]('设置模型...为'+_0x5e9e91[_0x32730c(0x5c2,0x5cd,0x5bb,0x521)+_0x346a57(0xe9,0x154,0xca,0x42)]+'成功');}}}else{if(_0x1f4eab[_0x346a57(0xb7,0xca,0x124,0xb8)]!==_0x1f4eab['SZZba'])_0x199bf9[_0x1f4eab[_0x32730c(0x55c,0x552,0x5b7,0x565)]]=_0x327648;else{let _0x4b5025=await _0x1f4eab[_0x32730c(0x598,0x5c3,0x603,0x646)](getSDMode,_0x2a8170);_0x1f4eab[_0x32730c(0x560,0x4c5,0x560,0x4a4)](_0x4b5025,_0x5e9e91[_0x346a57(0xb3,0x97,0x10e,0x8c)+_0x32730c(0x57e,0x595,0x5f1,0x52f)])&&(_0x346a57(0x13c,0xd3,0x19c,0x13b)!==_0x1f4eab[_0x32730c(0x4f2,0x5a4,0x4f3,0x450)]?(_0x1f4eab['IDbrU'](addLog,_0x32730c(0x483,0x5c1,0x54a,0x5a4)+_0x5e9e91['sd_cchatu_'+'8_model']+_0x346a57(0x163,0x16b,0x10f,0x111)),await _0x1f4eab[_0x346a57(0xc,-0x18,-0xb,0x86)](setSDMode,_0x2a8170,_0x5e9e91[_0x32730c(0x5fc,0x5ce,0x5bb,0x637)+'8_model'])):_0x2a1f4e['initialize'+_0x32730c(0x4e0,0x45e,0x518,0x5bb)]&&(_0x3e7147[_0x32730c(0x721,0x69a,0x66c,0x67c)+_0x32730c(0x62e,0x5be,0x619,0x57a)](_0x51c575[_0x32730c(0x568,0x59a,0x613,0x697)+_0x346a57(-0x26,0x90,-0x6c,-0xaf)+'ST'],_0x2d8c8b),_0xb2db40[_0x346a57(0x144,0x1fd,0x20c,0x10b)+_0x346a57(0x10,-0x1c,-0x6e,-0x64)]=![],_0x1f4eab['xbMIM'](_0xda1233,_0x1f4eab[_0x346a57(0xd3,0xda,0xa8,0x61)])));}}}catch(_0x3206c5){if(_0x1f4eab[_0x32730c(0x5a6,0x50e,0x592,0x5ff)](_0x1f4eab['OxSzA'],_0x32730c(0x5b7,0x50b,0x519,0x578))){_0x1f4eab['KCUIg'](_0x4dedce,_0x1f4eab[_0x32730c(0x4b3,0x4ce,0x552,0x590)]);throw new _0x2f921c(_0x1f4eab['IZaFz']);}else{_0x1f4eab[_0x32730c(0x451,0x5bd,0x512,0x52e)](addLog,_0x346a57(0xec,0x17f,0x10d,0x18f)+':\x20'+_0x3206c5[_0x32730c(0x464,0x48d,0x526,0x5a2)]+('。请检查sdwebu'+'i是否正常启动，并检'+_0x32730c(0x624,0x602,0x634,0x57e))),taskQueue[_0x346a57(0xac,0x10e,0x105,0x8d)+'sk'](_0x4910ad,![]),currentTaskId=null;throw new Error(_0x32730c(0x548,0x5e9,0x5f4,0x598)+_0x346a57(0x7b,0x6c,0x143,0xff)+_0x32730c(0x5c1,0x5f3,0x5c3,0x547)+_0x346a57(0x12c,0xf0,0x16f,0x123));}}function _0x346a57(_0x3fb512,_0x8003dd,_0x5b5d3f,_0x484f03){return _0x42f6(_0x3fb512- -0x217,_0x484f03);}let _0x34de7a=-(-0x1987+0x2034+-0x6ac);const _0x581735=_0x5e9e91[_0x32730c(0x5d7,0x537,0x540,0x5cf)];_0x1f4eab[_0x32730c(0x59d,0x584,0x639,0x614)](_0x581735,'')&&_0x1f4eab[_0x346a57(0x15d,0x1a7,0xbd,0x137)](_0x581735,null)&&!_0x1f4eab['VNGQi'](isNaN,_0x1f4eab[_0x32730c(0x6b3,0x699,0x653,0x61c)](Number,_0x581735))&&Number(_0x581735)>=-0x1*-0xc51+-0x2077+0x2*0xa13&&(_0x34de7a=_0x1f4eab[_0x346a57(0x14f,0x18f,0xb8,0x161)](Number,_0x581735));let _0x2f41c9={'prompt':_0x5822eb,'negative_prompt':_0x33c461,'sampler_name':_0x5e9e91['sd_cchatu_'+_0x346a57(0xe3,0x12a,0xd7,0x6e)+_0x32730c(0x4d3,0x523,0x566,0x5ec)],'scheduler':_0x5e9e91[_0x32730c(0x547,0x62d,0x5bb,0x5a7)+_0x346a57(0x153,0xd3,0xf2,0x14a)+'r'],'steps':_0x5e9e91[_0x32730c(0x5c5,0x55d,0x5d4,0x549)],'cfg_scale':_0x5e9e91['sdCfgScale'],'width':_0x2d68a3?_0x2d68a3:_0x5e9e91['sd_cwidth'],'height':_0x4abf4d?_0x4abf4d:_0x5e9e91[_0x346a57(0x23,0x9e,0xa5,0x99)],'restore_faces':_0x1f4eab['mSZJe'](_0x5e9e91[_0x346a57(0x52,0xab,-0x72,0xe1)+'es'],_0x32730c(0x5e2,0x57c,0x60f,0x66b)),'enable_hr':_0x5e9e91[_0x346a57(0xba,0x17b,0xcb,0xa3)+_0x346a57(0xe6,0x17c,0x1a5,0x167)]==_0x32730c(0x6c9,0x687,0x60f,0x5cc),'hr_upscaler':_0x5e9e91['sd_cchatu_'+_0x346a57(0x13b,0x132,0x1c7,0x117)],'hr_scale':_0x5e9e91[_0x32730c(0x46c,0x5a1,0x4f7,0x431)+_0x32730c(0x694,0x5a1,0x5e9,0x63c)],'hr_additional_modules':[],'denoising_strength':_0x5e9e91[_0x32730c(0x5ed,0x49c,0x54c,0x48b)+_0x346a57(0xf3,0x61,0x12f,0xf5)+'th'],'hr_second_pass_steps':_0x5e9e91[_0x32730c(0x557,0x5c5,0x5c2,0x648)+_0x346a57(-0x25,0x79,-0x2e,0x1b)],'seed':_0x34de7a,'override_settings':{'CLIP_stop_at_last_layers':_0x1f4eab[_0x32730c(0x499,0x521,0x4f9,0x4fd)](Number,_0x5e9e91[_0x32730c(0x565,0x55c,0x530,0x59d)+_0x346a57(0x75,-0x35,0xc7,-0x47)]),'sd_vae':_0x5e9e91[_0x346a57(0xb3,0xe5,0xf6,0xd5)+_0x346a57(0x128,0x197,0x19c,0x174)]},'override_settings_restore_afterwards':!![],'save_images':!![],'send_images':!![],'do_not_save_grid':![],'do_not_save_samples':![]};_0x1f4eab[_0x346a57(0xa,-0x19,0x8e,-0x75)](addLog,_0x32730c(0x5ca,0x4be,0x570,0x639)+_0x32730c(0x53b,0x605,0x580,0x5fc)+_0x2f41c9[_0x32730c(0x4f1,0x595,0x570,0x4bb)+'ces']),_0x1f4eab[_0x32730c(0x498,0x523,0x546,0x4fc)](addLog,_0x346a57(0x33,0xdb,0x33,-0x33)+_0x32730c(0x4b1,0x498,0x558,0x4a5)+_0x2f41c9[_0x32730c(0x5ce,0x635,0x5d8,0x511)]);_0x5e9e91[_0x346a57(0x148,0x209,0x196,0x189)+_0x346a57(0x10a,0x19d,0x71,0x93)]==_0x346a57(0x107,0x65,0xec,0x73)&&(_0x1f4eab['HhoXc'](_0x1f4eab[_0x346a57(0x143,0x1ef,0x208,0x1bc)],_0x1f4eab[_0x346a57(0x9d,0xdc,0x14e,0x27)])?(_0x171433['on'](_0x2802c6[_0x346a57(0x10b,0xcb,0x61,0x11f)+_0x32730c(0x4dc,0x471,0x4e2,0x47a)+'ST'],_0xd7afbe),_0x1f4eab[_0x346a57(0x64,0xb9,0x10e,0x114)](_0x2b4a9f,_0x1f4eab[_0x346a57(0x19,-0x96,-0xa1,0x52)])):(_0x1f4eab['dzWhb'](addLog,_0x346a57(0x2c,0x2d,-0x66,0xe5)+_0x346a57(0x15a,0x105,0xe1,0x1cc)),_0x2f41c9=_0x1f4eab[_0x32730c(0x5c6,0x5db,0x514,0x553)](deepMerge,_0x2f41c9,{'alwayson_scripts':{'ADetailer':{'args':[!![],!![],{'ad_model':_0x1f4eab[_0x32730c(0x5b0,0x59e,0x59f,0x5ea)]}]}}})));const _0x1c86ad=_0x346a57(0x1a,-0x4a,0x95,-0x8a)+_0x346a57(0x103,0xdf,0xfb,0x10e)+'正面提示\x20(Prom'+_0x32730c(0x708,0x62b,0x654,0x5d7)+_0x5822eb+(_0x346a57(0xab,0x116,0x130,0xf4)+_0x32730c(0x495,0x520,0x4f4,0x44a)+_0x32730c(0x591,0x621,0x658,0x68c)+'\x20')+_0x33c461+(_0x32730c(0x6f5,0x651,0x648,0x643)+_0x346a57(0x26,-0x13,0x3,0x83)+_0x346a57(0xfa,0x17b,0x6c,0x50))+_0x2f41c9['sampler_na'+'me']+(_0x346a57(0x7c,0x22,0xab,-0x39)+'teps):**\x20')+_0x2f41c9['steps']+(_0x346a57(0x4b,0x10b,0x1b,0x46)+_0x32730c(0x578,0x4ce,0x581,0x600))+_0x2f41c9['cfg_scale']+(_0x32730c(0x52f,0x543,0x4dd,0x473)+'ize):**\x20')+_0x2f41c9[_0x346a57(0xd9,0x71,0x117,0x74)]+'x'+_0x2f41c9['height']+(_0x32730c(0x54c,0x466,0x523,0x45e)+_0x346a57(0x3,-0x45,0xc5,-0x1e))+(_0x1f4eab[_0x346a57(0xf5,0x18e,0x18d,0x187)](_0x2f41c9['seed'],-(0x131*-0x5+-0xad*0x3+-0x7fd*-0x1))?_0x346a57(0x2a,0x3,0x4b,-0x62):_0x2f41c9[_0x346a57(-0x21,-0xac,-0xc9,-0x4b)])+('\x0a-\x20**模型\x20(M'+_0x32730c(0x5f5,0x5c3,0x5dd,0x67e))+_0x5e9e91[_0x346a57(0xb3,-0x4,0x12b,0x120)+_0x346a57(0xe9,0x16f,0x60,0x7e)]+('\x0a-\x20**VAE:*'+'*\x20')+_0x2f41c9['override_s'+'ettings'][_0x32730c(0x671,0x60b,0x5d0,0x599)]+(_0x346a57(0x141,0x92,0x180,0xe4)+'Skip:**\x20')+_0x2f41c9['override_s'+_0x346a57(0x96,-0x1d,0x4c,0x15e)]['CLIP_stop_'+'at_last_la'+_0x346a57(0x47,-0x33,0x3a,0xd0)]+('\x0a-\x20**高清修复\x20'+_0x32730c(0x4ef,0x4e6,0x533,0x59f)+_0x32730c(0x53f,0x555,0x5ed,0x694))+_0x2f41c9[_0x32730c(0x5cf,0x67a,0x5d8,0x636)]+(_0x32730c(0x51c,0x5e5,0x549,0x56d)+_0x32730c(0x513,0x504,0x58b,0x55d)+_0x32730c(0x608,0x5d3,0x559,0x5e7))+_0x2f41c9[_0x346a57(0xc0,0x3a,0xaf,0x50)]+(_0x346a57(0xf,0x8c,-0x5b,-0x2a)+'(Denoising'+_0x32730c(0x4f0,0x540,0x539,0x478)+_0x32730c(0x62e,0x62e,0x66d,0x70a))+_0x2f41c9[_0x32730c(0x4fd,0x5f5,0x57b,0x502)+_0x346a57(-0x2,-0xc2,-0x3b,0x31)]+(_0x32730c(0x57f,0x4ef,0x52a,0x4d2)+'(Restore\x20F'+'aces):**\x20')+_0x2f41c9[_0x32730c(0x5bc,0x50a,0x570,0x50f)+'ces']+(_0x32730c(0x5d4,0x57b,0x626,0x6ad)+'iler:**\x20')+_0x1f4eab[_0x346a57(0x11d,0x180,0x192,0x1ba)](_0x5e9e91[_0x32730c(0x5a7,0x5a2,0x650,0x6c5)+_0x346a57(0x10a,0x106,0x127,0x1ce)],_0x1f4eab[_0x32730c(0x4ed,0x5f6,0x53c,0x5f5)])+_0x32730c(0x618,0x674,0x5d9,0x62b);_0x1f4eab[_0x346a57(0x109,0xab,0x170,0x13d)](addLog,_0x1c86ad),addLog(_0x32730c(0x535,0x4c4,0x527,0x533)+'数为'+JSON['stringify'](_0x2f41c9)),console[_0x32730c(0x4f0,0x62b,0x598,0x57e)](_0x1f4eab[_0x32730c(0x643,0x5f4,0x5cf,0x622)],_0x2f41c9);while(!window[_0x346a57(0xde,0x6b,0x130,0x15c)]){await _0x1f4eab[_0x346a57(0x74,0xd5,0x75,-0x1f)](sleep,0x2546+0xf0b*0x2+-0x4*0xfdd);};try{if(_0x1f4eab['AZvCD'](_0x1f4eab[_0x32730c(0x5a7,0x562,0x4fb,0x4d4)],_0x1f4eab[_0x346a57(-0xd,0xa3,0x31,-0xb9)])){window['xiancheng']=![],taskQueue[_0x346a57(0x14d,0x1d3,0x116,0x9f)+'us'](_0x4910ad,_0x1f4eab[_0x346a57(0xe8,0xf7,0xb0,0x3c)]);if(_0x1f4eab[_0x32730c(0x672,0x6b6,0x5ff,0x561)](_0x5e9e91[_0x32730c(0x5a2,0x5aa,0x53e,0x5a3)],_0x1f4eab[_0x346a57(0x80,0x13c,-0x48,0x139)])){if(!taskQueue[_0x346a57(0x126,0x18e,0xeb,0x186)+_0x32730c(0x51d,0x50f,0x555,0x495)](_0x4910ad)){if(_0x1f4eab[_0x32730c(0x4de,0x508,0x4de,0x456)]('LrmMb',_0x1f4eab[_0x32730c(0x55f,0x463,0x509,0x4f7)])){_0x1f4eab[_0x32730c(0x535,0x524,0x510,0x491)](addLog,_0x1f4eab[_0x32730c(0x58e,0x565,0x552,0x4fd)]),eventSource[_0x346a57(0x60,0x0,0xac,0x79)](_0x1f4eab[_0x346a57(0x95,0x65,0xcd,-0x21)]);throw new Error(_0x1f4eab[_0x32730c(0x63a,0x5f1,0x62d,0x599)]);}else _0x59bcd0[_0x32730c(0x4e7,0x594,0x598,0x646)](_0x1f4eab[_0x346a57(0x152,0x13f,0x128,0x188)]),_0x1bf187['xiancheng']=!![];}_0x2f41c9[_0x32730c(0x694,0x635,0x656,0x6c6)]=_0x2a8170,console[_0x346a57(0x90,0xa1,0x157,0x1e)](_0x346a57(0x11a,0x129,0xbf,0x163)+_0x32730c(0x5c8,0x551,0x5be,0x5fc)+_0x346a57(0x5f,0x44,0xd,0x31),_0x5e9e91['st_chatu8_'+_0x32730c(0x61f,0x625,0x63b,0x64b)]),_0x2f41c9[_0x32730c(0x5ef,0x476,0x529,0x5ac)]=_0x5e9e91[_0x346a57(0x77,-0xf,0x34,-0x37)+_0x346a57(0x133,0xda,0x1ef,0x1c7)]?_0x5e9e91[_0x346a57(0x77,0xf7,0x134,0x130)+_0x32730c(0x5c8,0x583,0x63b,0x67e)]:'';const _0x221b98=await _0x1f4eab[_0x32730c(0x6c3,0x6ed,0x62f,0x662)](fetch,_0x346a57(0xa1,0xc6,0xac,0x38)+_0x346a57(0x94,0x34,0x4c,0xca),{'method':'POST','headers':getRequestHeaders(window['token']),'body':JSON[_0x346a57(0xa9,0xbc,0xe7,0xc6)](_0x2f41c9)});if(!_0x221b98['ok']){if(_0x1f4eab['zzhyJ'](_0x1f4eab[_0x346a57(0x2,-0x2,-0xbd,-0x85)],_0x1f4eab[_0x346a57(0x2,-0x4c,0xa9,-0x18)])){const _0xd75562=await _0x221b98[_0x32730c(0x665,0x5a7,0x5ca,0x5a1)]();_0x1f4eab[_0x32730c(0x520,0x4cd,0x53d,0x53a)](addLog,_0x32730c(0x5de,0x619,0x5c1,0x63f)+_0x32730c(0x607,0x501,0x544,0x4f3)+_0x221b98[_0x346a57(-0x3,-0x8b,0x65,-0x85)]+_0x346a57(0x2d,0x57,0x5,0x9a)+_0xd75562),console[_0x32730c(0x608,0x54d,0x598,0x547)](_0x346a57(0x25,-0xb,0x70,-0x2a),_0xd75562);throw new Error(_0x32730c(0x50c,0x5ee,0x58c,0x62d)+_0x221b98[_0x346a57(-0x3,0x43,0x19,-0x49)]+_0x346a57(0x124,0x10e,0x5c,0x77)+_0xd75562);}else{const _0x3dd957=_0x4a5158['apply'](_0x477ac1,arguments);return _0x677d07=null,_0x3dd957;}}const _0x4facc3=await _0x221b98[_0x32730c(0x5f9,0x59c,0x5ca,0x5ef)]();let _0x5122af='';try{const _0x524ca4=JSON[_0x32730c(0x5eb,0x61e,0x579,0x569)](_0x4facc3);_0x5122af=_0x524ca4[_0x32730c(0x4a4,0x553,0x528,0x50e)][-0x1eec+-0xffb+0x2ee7];}catch(_0x16b05b){if(_0x1f4eab[_0x32730c(0x5f2,0x69c,0x61a,0x64f)](_0x32730c(0x68d,0x59f,0x661,0x70a),_0x1f4eab[_0x346a57(0xdf,0xf9,0xed,0x72)])){const _0x3d3545=_0x1f4eab[_0x346a57(0x134,0x1f2,0x6d,0x1c7)]['split']('|');let _0x49f501=0x1ddf+0x6e*0x2c+-0x30c7*0x1;while(!![]){switch(_0x3d3545[_0x49f501++]){case'0':if(_0x1f4eab['Tnyry'](_0x4cf889[_0x346a57(0x1e,-0x99,-0x29,-0x43)],_0x1f4eab[_0x32730c(0x6dd,0x5b3,0x62d,0x6a3)])){}else _0x3f9c24[_0x32730c(0x671,0x54a,0x5b4,0x5c3)+'sk'](_0x46fa5b,![]);continue;case'1':_0x362346[_0x346a57(0xda,0xbb,0xa9,0xef)](_0x346a57(0xf9,0x1a4,0x191,0x14e)+_0x32730c(0x560,0x562,0x5b2,0x627)+'ge:',_0x113d8d);continue;case'2':throw _0x2d90da;continue;case'3':_0x2e9ad2['xiancheng']=!![];continue;case'4':_0x1f4eab[_0x346a57(0x138,0x174,0x130,0x158)](_0x63928c,_0x346a57(0x89,-0x3e,0xd5,0x146)+_0xea4cb2[_0x32730c(0x4d5,0x469,0x526,0x590)]);continue;case'5':_0x33ddc5=null;continue;}break;}}else _0x1f4eab[_0x32730c(0x60e,0x5f4,0x593,0x54a)](addLog,_0x1f4eab['xAPlh']),_0x5122af=_0x4facc3;}const _0x4dadf8=_0x1f4eab[_0x346a57(0x12e,0x141,0x11a,0x171)](_0x1f4eab['gvCKg'],_0x5122af);_0x1f4eab[_0x32730c(0x5c3,0x511,0x590,0x5e5)](addLog,_0x1f4eab[_0x32730c(0x598,0x58a,0x54d,0x4c0)]),setTimeout(()=>{console['log'](_0x1f4eab[_0xd187e9(0x608,0x5d4,0x557,0x518)]);function _0xd187e9(_0x5b6491,_0x3a6ed6,_0x19ad0e,_0x215399){return _0x346a57(_0x19ad0e-0x405,_0x3a6ed6-0x12d,_0x19ad0e-0xa0,_0x5b6491);}function _0x3ff36f(_0x5842d0,_0x21ade4,_0x3d801e,_0x12907e){return _0x346a57(_0x12907e-0xa8,_0x21ade4-0xff,_0x3d801e-0x1ae,_0x21ade4);}window[_0xd187e9(0x59e,0x4bb,0x4e3,0x472)]=!![];},extension_settings[extensionName]['imageGenIn'+_0x346a57(0x18,-0x31,-0x32,0x1e)]);;return taskQueue['completeTa'+'sk'](_0x4910ad,!![]),currentTaskId=null,_0x1f4eab['Tnyry'](_0x1f4eab['ToCgU'](String,extension_settings[extensionName][_0x346a57(0x27,-0xa1,0xcd,-0x56)+_0x32730c(0x692,0x576,0x618,0x62d)]),_0x1f4eab['UGVFK'])&&(_0x4dadf8=await _0x1f4eab[_0x32730c(0x5c4,0x614,0x5b9,0x59c)](convertImageToJpeg,_0x4dadf8)),{'image':_0x4dadf8,'change':_0x1f4eab[_0x32730c(0x647,0x550,0x5f8,0x5ac)](_0x57156b,'')};}else{if(!taskQueue[_0x32730c(0x5dc,0x651,0x62e,0x69f)+_0x32730c(0x578,0x615,0x555,0x4b9)](_0x4910ad)){if(_0x1f4eab[_0x32730c(0x4aa,0x59a,0x557,0x4ad)](_0x346a57(0xb0,0x14e,0xc0,0x146),_0x1f4eab['giuHA']))!_0x5ae537[_0x32730c(0x6dc,0x66c,0x64c,0x5da)+_0x346a57(0x10,-0x2,-0x85,-0x55)]&&(_0xacbc6d['initialize'+'SDListener']=!![],_0x1f4eab[_0x32730c(0x4fc,0x4fc,0x5a1,0x619)](_0xf30c36)),_0x1f4eab['qCANw'](_0x12ce35);else{_0x1f4eab['CAnTg'](addLog,_0x1f4eab[_0x346a57(0x4a,0x8b,0x55,0xb)]);throw new Error(_0x1f4eab[_0x346a57(0x125,0x14a,0xe3,0x157)]);}}const _0x196ee4=new URL(_0x1f4eab[_0x346a57(0x66,0x126,0x129,0x56)](_0x2a8170,_0x346a57(0xdc,0x101,0x4b,0x184)+'txt2img'));window[_0x32730c(0x5b5,0x52e,0x5e6,0x5f0)]=![];const _0xcf4987=await _0x1f4eab[_0x32730c(0x59f,0x5a0,0x514,0x4e9)](fetch,_0x196ee4,{'method':_0x1f4eab['qcaui'],'body':JSON[_0x32730c(0x624,0x639,0x5b1,0x66e)](_0x2f41c9),'headers':getDirectHeaders(_0x32730c(0x4ef,0x56f,0x55c,0x5dd)+_0x346a57(0x117,0xa0,0xd5,0x16a),_0x1f4eab['qCANw'](getsdAuth))});_0x1f4eab[_0x346a57(0xe2,0xe9,0x5c,0x116)](setTimeout,()=>{const _0x2c6e9f={};function _0xcd3ab(_0x55cad4,_0x2ecbf3,_0x11301b,_0x2845ae){return _0x346a57(_0x55cad4-0x3cc,_0x2ecbf3-0x12e,_0x11301b-0xc0,_0x2ecbf3);}function _0x345819(_0x393844,_0x1f5061,_0x22b6eb,_0x4935f3){return _0x32730c(_0x393844,_0x1f5061-0x132,_0x4935f3- -0x6be,_0x4935f3-0x1b1);}_0x2c6e9f[_0xcd3ab(0x4df,0x51e,0x4fd,0x46f)]=_0xcd3ab(0x491,0x4d7,0x46c,0x498)+'+$';const _0x1bca7d=_0x2c6e9f;if(_0x1f4eab[_0x345819(-0x14d,-0xdc,-0xd9,-0xdb)](_0x1f4eab[_0x345819(-0xcf,-0x1da,-0x135,-0x117)],_0x1f4eab[_0x345819(-0x179,-0x244,-0x242,-0x1d6)]))return _0x2e13ce[_0x345819(-0x1b0,-0x1af,-0x175,-0x161)]()[_0x345819(-0x11d,-0x193,-0xec,-0x139)](_0xcd3ab(0x491,0x52a,0x552,0x4e2)+'+$')[_0x345819(-0x9c,-0x226,-0x133,-0x161)]()[_0x345819(-0x1e5,-0x22e,-0x132,-0x1c0)+'r'](_0x1e1bb1)['search'](RBQpyV['oJDfH']);else console[_0x345819(-0x65,-0x92,-0x1ba,-0x126)](_0xcd3ab(0x4cb,0x55b,0x48f,0x55d)+_0x345819(-0x6f,-0xea,-0x13c,-0x127)),window['xiancheng']=!![];},extension_settings[extensionName][_0x346a57(0x29,0x86,0x54,0xa7)+_0x32730c(0x4e0,0x48f,0x520,0x518)]);;if(!_0xcf4987['ok']){if(_0x1f4eab['AZvCD'](_0x1f4eab[_0x346a57(-0x23,0x3b,-0x21,-0x4)],_0x346a57(0xb4,0x8,0x1c,0xd3))){const _0x3bca99=await _0xcf4987[_0x32730c(0x676,0x532,0x5ca,0x536)]();addLog(_0x346a57(0x56,0xf7,-0x2,-0x28)+_0x32730c(0x704,0x5d9,0x651,0x655)+_0xcf4987['status']+_0x32730c(0x5e2,0x4f9,0x535,0x5cc)+_0x3bca99),console['log'](_0x32730c(0x5cb,0x520,0x52d,0x48c),_0x3bca99);throw new Error(_0x346a57(0x84,0x43,0x76,0xcc)+_0xcf4987['status']+',\x20详情:\x20'+_0x3bca99);}else{_0x1f4eab[_0x346a57(0xfb,0xef,0xa1,0x186)](_0x2a0189,_0x1f4eab[_0x346a57(0x4a,-0x3d,-0x47,0x8e)]),_0x5066c1[_0x346a57(0x60,0xe5,-0x2,-0xd)](_0x1f4eab[_0x346a57(0x95,0x18,0xa,0x10a)]);throw new _0x5f4202(_0x1f4eab['IZaFz']);}}const _0x39fed5=await _0xcf4987[_0x32730c(0x6ba,0x6af,0x610,0x5d0)]();if(!_0x39fed5[_0x346a57(0x20,0xd4,0x5a,0x6b)]||_0x39fed5['images'][_0x32730c(0x5dc,0x4ac,0x547,0x59e)]===0x2163+0x1e48+0x3fab*-0x1){if(_0x1f4eab[_0x32730c(0x583,0x5a9,0x5a6,0x587)](_0x32730c(0x478,0x55e,0x4f6,0x489),_0x1f4eab['xOblC']))_0x407711[_0x32730c(0x65c,0x68b,0x64c,0x707)+'SDListener']=!![],_0x1f4eab[_0x346a57(0x99,0x11f,0x15,0x37)](_0x198d5b);else throw new Error(_0x1f4eab[_0x32730c(0x5b6,0x4ab,0x53f,0x4bb)]);}const _0x5cb3fd=_0x39fed5[_0x32730c(0x544,0x5d5,0x528,0x51d)][-0x106a+0x5bc+0xaae],_0x4a8a69=_0x1f4eab[_0x32730c(0x45d,0x4a6,0x51b,0x4b4)](_0x1f4eab['gvCKg'],_0x5cb3fd);return _0x1f4eab['bPJuo'](addLog,_0x1f4eab['geZGe']),taskQueue[_0x346a57(0xac,0x109,0x122,0xbb)+'sk'](_0x4910ad,!![]),currentTaskId=null,_0x1f4eab['vbQwi'](_0x1f4eab[_0x32730c(0x49b,0x527,0x556,0x4eb)](String,extension_settings[extensionName][_0x32730c(0x49f,0x5ee,0x52f,0x5e3)+_0x32730c(0x6e1,0x586,0x618,0x5ed)]),_0x32730c(0x661,0x66d,0x60f,0x6cc))&&(_0x4a8a69=await _0x1f4eab[_0x346a57(0xfb,0xd9,0x56,0x96)](convertImageToJpeg,_0x4a8a69)),{'image':_0x4a8a69,'change':_0x1f4eab[_0x346a57(0xf0,0xb9,0x3f,0x1b8)](_0x22b931,'')};}}else{const _0x4912a5='SD生图流程捕获到异'+_0x32730c(0x4eb,0x4c6,0x51d,0x5b0)+_0x4a57ab+_0x32730c(0x660,0x6d8,0x628,0x611)+_0x25ff4e['message'];_0x1f4eab[_0x32730c(0x45b,0x573,0x510,0x51d)](_0x11b887,_0x346a57(0x5,0x81,-0x2,0xc7)+_0x4912a5),_0x5bf689[_0x346a57(0xda,0x65,0xe4,0x12c)](_0x1f4eab[_0x32730c(0x673,0x72a,0x66a,0x628)],_0x59facc);const _0x46caae={};_0x46caae['id']=_0xc4c46c,_0x46caae[_0x346a57(0x101,0x170,0x16a,0x1c0)]=![],_0x46caae[_0x346a57(0xda,0xcc,0x32,0x4b)]=_0xa50d53[_0x346a57(0x1e,0x36,0x1e,-0x35)],_0x46caae[_0x32730c(0x526,0x4a6,0x543,0x4ea)]=_0x49f786,_0x1a6564[_0x346a57(0x60,0x11a,-0x2c,0xb3)](_0xdaccd2[_0x32730c(0x55c,0x569,0x613,0x5e0)+_0x32730c(0x4f9,0x630,0x576,0x582)+_0x32730c(0x4ff,0x4a4,0x4df,0x49c)],_0x46caae),_0x1f4eab[_0x32730c(0x5a8,0x57c,0x512,0x4b0)](_0x4006eb,_0x346a57(0xc6,0x152,0x152,0x187)+_0x32730c(0x546,0x535,0x561,0x4cb)+_0x3a6c2c+')');}}catch(_0x1dfd59){if(_0x1f4eab['mfuLi']!==_0x1f4eab[_0x32730c(0x67d,0x6c1,0x5fe,0x554)]){window[_0x32730c(0x634,0x56e,0x5e6,0x591)]=!![];if(_0x1f4eab['XTCIJ'](_0x1dfd59[_0x346a57(0x1e,-0x1b,0x6a,-0x48)],_0x1f4eab['IZaFz'])){}else taskQueue[_0x346a57(0xac,0x39,0x104,0xba)+'sk'](_0x4910ad,![]);currentTaskId=null,addLog(_0x346a57(0x89,0xd4,0x142,0xde)+_0x1dfd59[_0x32730c(0x5c2,0x526,0x526,0x4bb)]),console['error'](_0x1f4eab[_0x32730c(0x512,0x4a0,0x4eb,0x4a6)],_0x1dfd59);throw _0x1dfd59;}else _0x4400e2[_0x1f4eab[_0x346a57(0x85,0x10b,0x106,0x12a)]]=_0x3622aa;}}async function sdGenerate(_0x132757){const _0x3a52c3={'hKQDV':function(_0x3b6182,_0x22bc28){return _0x3b6182(_0x22bc28);},'oBsYn':'{修图}','ZshQf':function(_0x269ee2,_0x1f727b){return _0x269ee2!=_0x1f727b;},'FHGWm':function(_0x41ae10,_0x46f93e){return _0x41ae10!==_0x46f93e;},'dTcqS':_0x14f5ae(0x38,0x67,-0xc0,-0x12),'PztkB':function(_0x1f6d37,_0x2cfef6,_0x534ff8,_0x3f3940){return _0x1f6d37(_0x2cfef6,_0x534ff8,_0x3f3940);},'mOzJl':function(_0x24ffc8,_0x10ee44){return _0x24ffc8(_0x10ee44);},'ecNSG':function(_0x359150,_0x5ec137){return _0x359150===_0x5ec137;},'VMqxE':_0x14f5ae(-0x9f,0x29,0x7c,-0xd),'ufNnq':_0x14f5ae(0x16,0x145,0x97,0xb3),'kmKfP':function(_0x219496,_0x12787f){return _0x219496(_0x12787f);},'GSgAh':_0x14f5ae(0x139,0xff,0x106,0xf0)+_0x52e3f0(0x699,0x60a,0x66b,0x5f9)+_0x14f5ae(0x148,0x14e,0x132,0xf3),'UGyUV':function(_0x5941d9,_0x1cb040){return _0x5941d9(_0x1cb040);}},{id:_0x3bba61,prompt:_0x5605ca,width:_0x54b202,height:_0x9dd324,change:_0x445ab9}=_0x132757;_0x3a52c3[_0x52e3f0(0x6ee,0x64f,0x6be,0x58b)](addLog,_0x52e3f0(0x66f,0x616,0x676,0x694)+_0x52e3f0(0x651,0x5f0,0x5ee,0x570)+_0x3bba61+(_0x14f5ae(-0x49,-0x66,-0x2d,-0x28)+':\x20')+_0x5605ca+(_0x445ab9?_0x52e3f0(0x59c,0x635,0x632,0x6ab)+'\x20'+_0x445ab9:''));function _0x14f5ae(_0xe74a53,_0x3d949d,_0x1245e3,_0x4895ff){return _0x42f6(_0x4895ff- -0x220,_0x1245e3);}if(_0x445ab9&&_0x445ab9[_0x52e3f0(0x5b9,0x655,0x66f,0x6e5)](_0x3a52c3[_0x14f5ae(0x3,0xd,-0x19,0x79)])){bananaGenerate(_0x132757);return;}function _0x52e3f0(_0x59147e,_0x48855e,_0x1e418e,_0x4e3653){return _0x42f6(_0x48855e-0x390,_0x59147e);}try{const {image:_0x26ae7c,change:_0x35ebfc}=await _0x3a52c3['hKQDV'](generateSDImage,{'prompt':_0x5605ca,'width':_0x54b202,'height':_0x9dd324,'change':_0x445ab9});if(_0x3a52c3[_0x52e3f0(0x6c1,0x702,0x76d,0x72b)](extension_settings[extensionName][_0x52e3f0(0x6b7,0x674,0x71f,0x6ec)],'0')){if(_0x3a52c3[_0x14f5ae(0x9b,0x137,0x90,0x121)](_0x14f5ae(-0x3c,0xd,0xb0,-0x12),_0x3a52c3['dTcqS']))_0x3c7aea=!![];else{const _0x542b89={};_0x542b89[_0x52e3f0(0x550,0x5cb,0x5b6,0x630)]=_0x35ebfc,await _0x3a52c3[_0x14f5ae(0x22,-0x22,-0x74,0x26)](setItemImg,_0x5605ca,_0x26ae7c,_0x542b89),_0x3a52c3[_0x52e3f0(0x53d,0x5ad,0x537,0x619)](addLog,'图像已存入数据库\x20f'+_0x52e3f0(0x6ca,0x6ed,0x64e,0x6d0)+'\x20'+_0x5605ca);}}else{if(_0x3a52c3[_0x52e3f0(0x5e0,0x5ae,0x58e,0x628)](_0x3a52c3[_0x14f5ae(0x67,0xc4,0xe0,0x58)],_0x3a52c3[_0x14f5ae(0xe,-0x25,0xa6,-0x20)])){if(_0x4854af){const _0x1e1bc3=_0x5f10d6['apply'](_0x4e61c4,arguments);return _0x3af41e=null,_0x1e1bc3;}}else _0x3a52c3[_0x14f5ae(0x5,0x111,-0xf,0x9f)](addLog,_0x14f5ae(0x5b,0x45,0x6d,0xfb)+'库');}const _0x214370={};_0x214370['id']=_0x3bba61,_0x214370[_0x52e3f0(0x651,0x6a8,0x676,0x656)]=!![],_0x214370[_0x14f5ae(0x1,0x13f,0x40,0x89)]=_0x26ae7c,_0x214370[_0x52e3f0(0x5f2,0x5e2,0x543,0x546)]=_0x5605ca,_0x214370[_0x14f5ae(-0x3b,0x8e,-0x61,0x1b)]=_0x35ebfc,eventSource[_0x14f5ae(0x48,0x10d,0x10e,0x57)](EventType['GENERATE_I'+_0x52e3f0(0x550,0x615,0x5ff,0x652)+_0x52e3f0(0x5c5,0x57e,0x5e4,0x608)],_0x214370),_0x3a52c3[_0x14f5ae(0x1ca,0xb6,0x70,0x12c)](addLog,_0x52e3f0(0x52b,0x599,0x519,0x55a)+_0x52e3f0(0x5e0,0x600,0x55f,0x62f)+_0x3bba61+')');}catch(_0x3b7f2a){const _0x292cc1=_0x14f5ae(0x148,0xfc,0x164,0x156)+'常\x20(ID:\x20'+_0x3bba61+_0x14f5ae(0x1db,0x57,0x9e,0x117)+_0x3b7f2a[_0x14f5ae(-0x31,-0xa5,0x6b,0x15)];addLog(_0x14f5ae(0x50,-0xc8,0x16,-0x4)+_0x292cc1),console[_0x14f5ae(0xbd,0x180,0x88,0xd1)](_0x3a52c3[_0x14f5ae(0x119,0x59,0x1d,0x59)],_0x3b7f2a);const _0x83989={};_0x83989['id']=_0x3bba61,_0x83989[_0x14f5ae(0x160,0xdf,0x3b,0xf8)]=![],_0x83989[_0x14f5ae(0x179,0x75,0x14a,0xd1)]=_0x3b7f2a['message'],_0x83989[_0x52e3f0(0x5ec,0x5e2,0x623,0x635)]=_0x5605ca,eventSource[_0x52e3f0(0x5a6,0x607,0x5bd,0x679)](EventType[_0x14f5ae(0x10f,0x11b,0xdf,0x102)+'MAGE_RESPO'+'NSE'],_0x83989),_0x3a52c3['UGyUV'](addLog,_0x52e3f0(0x632,0x66d,0x6dd,0x714)+_0x14f5ae(0xc1,0x4a,0xce,0x50)+_0x3bba61+')');}}function initializeSDListener(){const _0x305831={'MooSx':function(_0x30eace,_0x236514){return _0x30eace(_0x236514);},'Ysnta':'SD\x20生图事件监听器'+_0x3984a9(0x144,0x102,0x145,0xf9)};eventSource['on'](EventType['GENERATE_I'+_0x3984a9(0x117,0xc7,0x133,0xf7)+'ST'],sdGenerate);function _0x3984a9(_0x3e1a93,_0x345796,_0x1dab52,_0x2d9015){return _0x42f6(_0x2d9015- -0xfa,_0x1dab52);}function _0x3a86d7(_0xc6358d,_0x17b9b9,_0x41d72a,_0x2fb07c){return _0x42f6(_0x2fb07c- -0x28c,_0x41d72a);}_0x305831[_0x3984a9(0x22d,0x187,0x1ee,0x1e0)](addLog,_0x305831[_0x3a86d7(0x72,0x6f,0x122,0xe3)]);}export async function replaceWithSd(){function _0x2f90e8(_0x3d8620,_0x54c563,_0x4aa3d8,_0x198719){return _0x42f6(_0x54c563- -0x15f,_0x3d8620);}const _0x1e78d0={'uSSrj':function(_0x246329,_0x3e5623){return _0x246329+_0x3e5623;},'RRjUT':'API响应中未找到图'+'像数据。','sobtM':function(_0x1f7854,_0x327b66){return _0x1f7854==_0x327b66;},'Kyvus':function(_0x41ba4c,_0x4499a1){return _0x41ba4c===_0x4499a1;},'vbdTj':_0x2f90e8(0xc6,0x181,0x17e,0x185),'ZAFaH':'BLhFO','CyohK':function(_0x325e35,_0x146369){return _0x325e35(_0x146369);},'KokVC':_0x13bc9f(0x3f6,0x418,0x47a,0x46b)+_0x13bc9f(0x45c,0x462,0x415,0x3af)};function _0x13bc9f(_0x3cc2ce,_0x56470d,_0x570669,_0x4506df){return _0x42f6(_0x56470d-0x136,_0x570669);}if(_0x1e78d0['sobtM'](extension_settings[extensionName][_0x2f90e8(0x124,0xbc,0x36,0x110)],'sd'))_0x1e78d0[_0x2f90e8(0x168,0xcf,0x123,0x4d)](_0x1e78d0[_0x2f90e8(0x18d,0x14b,0x154,0x17d)],'GxjKl')?(!window[_0x13bc9f(0x3fb,0x491,0x41b,0x42a)+_0x13bc9f(0x319,0x35d,0x368,0x415)]&&(window['initialize'+_0x2f90e8(0x30,0xc8,0x16d,0x12b)]=!![],initializeSDListener()),initializeImageProcessing()):_0x8b8ce7=_0x1e78d0[_0x13bc9f(0x41b,0x40c,0x43d,0x441)](_0x1e78d0['uSSrj'](_0x3fcc48,',\x20'),_0x3d258c[_0x13bc9f(0x440,0x46f,0x49a,0x3cb)+_0x5b2b81+_0x2f90e8(0x1c8,0x15f,0x148,0x17a)]);else{if(window[_0x13bc9f(0x4c9,0x491,0x526,0x48b)+'SDListener']){if(_0x1e78d0[_0x2f90e8(0x10a,0xcf,0x8c,0x80)](_0x1e78d0['ZAFaH'],_0x1e78d0[_0x13bc9f(0x3a6,0x3cb,0x320,0x425)]))eventSource[_0x2f90e8(0x286,0x21c,0x2e3,0x19c)+_0x2f90e8(0x292,0x1c9,0x290,0x17d)](EventType[_0x13bc9f(0x42d,0x458,0x434,0x462)+_0x13bc9f(0x36f,0x327,0x3ad,0x2d9)+'ST'],sdGenerate),window['initialize'+_0x2f90e8(0x70,0xc8,0xf7,0x176)]=![],_0x1e78d0[_0x13bc9f(0x33d,0x34d,0x3dc,0x402)](addLog,_0x1e78d0[_0x2f90e8(0xdc,0x123,0x17f,0x1a1)]);else throw new _0x34a319(_0x1e78d0['RRjUT']);}}}