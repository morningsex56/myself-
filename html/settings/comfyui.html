<div id="ch-tab-comfyui">
    <div class="ch-prompts-section st-chatu8-settings-section">
        <h3>固定提示词</h3>
        <div class="st-chatu8-field">
            <label for="yusheid_comfyui">提示词预设</label>
            <div class="st-chatu8-profile-controls">
                <select id="yusheid_comfyui" class="st-chatu8-select"></select>
                <button class="st-chatu8-icon-btn" id="st_chatu8_tishici_visual_select_comfyui" title="可视化选择"><i class="fa-solid fa-grip"></i></button>
                <button class="st-chatu8-icon-btn" id="st_chatu8_tishici_update_style_comfyui" title="保存"><i class="fa-solid fa-save"></i></button>
                <button class="st-chatu8-icon-btn" id="st_chatu8_tishici_save_style_comfyui" title="另存为"><i class="fa-solid fa-file-export"></i></button>
                <button class="st-chatu8-icon-btn" id="st_chatu8_tishici_export_current_comfyui" title="导出当前"><i class="fa-solid fa-upload"></i></button>
                <button class="st-chatu8-icon-btn" id="st_chatu8_tishici_export_all_comfyui" title="导出全部"><i class="fa-solid fa-file-export"></i></button>
                <button class="st-chatu8-icon-btn" id="st_chatu8_tishici_import_comfyui" title="导入"><i class="fa-solid fa-download"></i></button>
                <button class="st-chatu8-icon-btn danger" id="st_chatu8_tishici_delete_style_comfyui" title="删除"><i class="fa-solid fa-trash"></i></button>
            </div>
        </div>
        <div class="st-chatu8-field-col">
            <label for="fixedPrompt_comfyui">固定正面提示词 <span class="st-chatu8-unsaved-warning" title="设置尚未保存" style="display: none;"><i class="fa-solid fa-triangle-exclamation"></i></span></label>
            <button class="st-chatu8-icon-btn" id="translate_fixedPrompt_comfyui" title="翻译" style="align-self: flex-end; margin: 4px 0;"><i class="fa-solid fa-language"></i></button>
            <textarea id="fixedPrompt_comfyui" class="st-chatu8-textarea" rows="4"></textarea>
            <div id="fixedPrompt_comfyui-results" class="ch-autocomplete-results"></div>
        </div>
        <div class="st-chatu8-field-col">
            <label for="fixedPrompt_end_comfyui">后置固定正面提示词 <span class="st-chatu8-unsaved-warning" title="设置尚未保存" style="display: none;"><i class="fa-solid fa-triangle-exclamation"></i></span></label>
            <button class="st-chatu8-icon-btn" id="translate_fixedPrompt_end_comfyui" title="翻译" style="align-self: flex-end; margin: 4px 0;"><i class="fa-solid fa-language"></i></button>
            <textarea id="fixedPrompt_end_comfyui" class="st-chatu8-textarea" rows="4"></textarea>
            <div id="fixedPrompt_end_comfyui-results" class="ch-autocomplete-results"></div>
        </div>
        <div class="st-chatu8-field-col">
            <label for="negativePrompt_comfyui">固定负面提示词 <span class="st-chatu8-unsaved-warning" title="设置尚未保存" style="display: none;"><i class="fa-solid fa-triangle-exclamation"></i></span></label>
            <textarea id="negativePrompt_comfyui" class="st-chatu8-textarea" rows="4"></textarea>
            <div id="negativePrompt_comfyui-results" class="ch-autocomplete-results"></div>
        </div>
        
        <h3>LORA</h3>
        <div class="st-chatu8-field">
            <label for="ComfyuiLORA">添加 LORA</label>
            <div class="st-chatu8-profile-controls">
                <select id="ComfyuiLORA" class="st-chatu8-select"></select>
                <button class="st-chatu8-icon-btn" id="ComfyuiaddLORA" title="添加"><i class="fa-solid fa-plus"></i></button>
            </div>
        </div>
        
    </div>
    <div class="st-chatu8-settings-section">
        <h3>提示词替换</h3>

        <div class="st-chatu8-field">
            <label for="prompt_replace_id_comfyui">提示词替换</label>
            <div class="st-chatu8-profile-controls">
                <select id="prompt_replace_id_comfyui" class="st-chatu8-select"></select>
                <button class="st-chatu8-icon-btn" id="prompt_replace_update_style_comfyui" title="保存"><i class="fa-solid fa-save"></i></button>
                <button class="st-chatu8-icon-btn" id="prompt_replace_save_style_comfyui" title="另存为"><i class="fa-solid fa-file-export"></i></button>
                <button class="st-chatu8-icon-btn" id="prompt_replace_export_current_comfyui" title="导出当前"><i class="fa-solid fa-upload"></i></button>
                <button class="st-chatu8-icon-btn" id="prompt_replace_export_all_comfyui" title="导出全部"><i class="fa-solid fa-file-export"></i></button>
                <button class="st-chatu8-icon-btn" id="prompt_replace_import_comfyui" title="导入"><i class="fa-solid fa-download"></i></button>
                <button class="st-chatu8-icon-btn danger" id="prompt_replace_delete_style_comfyui" title="删除"><i class="fa-solid fa-trash"></i></button>
            </div>
        </div>
        <div class="st-chatu8-field-col">
            <label for="prompt_replace_text_comfyui">替换规则 <span class="st-chatu8-unsaved-warning" title="设置尚未保存" style="display: none;"><i class="fa-solid fa-triangle-exclamation"></i></span></label>
            <textarea id="prompt_replace_text_comfyui" class="st-chatu8-textarea" rows="4"></textarea>
        </div>
    </div>
    <div class="st-chatu8-settings-section"> 
        <div class="st-chatu8-field">
            <label for="AQT_comfyui">正面质量预设</label>
            <select id="AQT_comfyui" class="st-chatu8-select">
                <option value="best quality, amazing quality, very aesthetic, absurdres">启用</option>
                <option value="">禁用</option>
            </select>
        </div>
        <div class="st-chatu8-field">
            <label for="UCP_comfyui">负面质量预设</label>
            <select id="UCP_comfyui" class="st-chatu8-select">
<option value="">无</option>
<option value="bad proportions, out of focus, username, text, bad anatomy, lowres, worstquality, watermark, cropped, bad body, deformed, mutated, disfigured, poorly drawn face, malformed hands, extra arms, extra limb, missing limb, too many fingers, extra legs, bad feet, missing fingers, fused fingers, acnes, floating limbs, disconnected limbs, long neck, long body, mutation, ugly, blurry, low quality, sketches, normal quality, monochrome, grayscale, signature, logo, jpeg artifacts, unfinished, displeasing, chromatic aberration, extra digits, artistic error, scan, abstract, photo, realism, screencap">作者预设</option>
<option value="negativeXL_D, negativeXL, source_furry, extra limbs, deformations, long fingers, fused fingers, inaccurate_anatomy, bad proportions, poorly drawn hands, bad hands, extra_fingers, extra_hand, extra_arm, distorted fingers, ugly hands, creepy hands, six fingers, malformed fingers, long_fingers, interlocked fingers:1.2, ugly, deformed, uneven, asymmetrical, unnatural, missing fingers, extra digit, fewer digits, opaque eyes, small eyes, ugly eyes, blurred eyes, bad face, (bad anatomy, ugly face:1.2), (worst quality, low quality, not detailed, low resolution:1.2), motion_blur, blur, blur_censor, blurry, simple_background, text, error, cropped, normal quality, jpeg artifacts, watermark, logo, signature, username, artist name">作者预set 2</option>
            </select>
        </div>
    </div>
    <div class="st-chatu8-settings-section">
        <h3>配置档案</h3>
        <div class="st-chatu8-field">
            <label for="comfyui_profile_id">当前配置</label>
            <div class="st-chatu8-profile-controls">
                <select id="comfyui_profile_id" class="st-chatu8-select"></select>
                <button class="st-chatu8-icon-btn" id="comfyui_profile_load" title="读取">
                    <i class="fa-solid fa-folder-open"></i>
                </button>
                <button class="st-chatu8-icon-btn" id="comfyui_profile_new" title="新建">
                    <i class="fa-solid fa-plus"></i>
                </button>
                <button class="st-chatu8-icon-btn danger" id="comfyui_profile_delete" title="删除">
                    <i class="fa-solid fa-trash"></i>
                </button>
            </div>
        </div>
    </div>
    <div class="st-chatu8-settings-section">
        <h3>工作流</h3>
        <div class="st-chatu8-field">
            <label for="workerid">工作流预设</label>
            <div class="st-chatu8-profile-controls">
                <select id="workerid" class="st-chatu8-select"></select>
                <button class="st-chatu8-icon-btn" id="worker_update_style" title="保存"><i class="fa-solid fa-save"></i></button>
                <button class="st-chatu8-icon-btn" id="worker_save_style" title="另存为"><i class="fa-solid fa-file-export"></i></button>
                <button class="st-chatu8-icon-btn" id="worker_export_current" title="导出当前"><i class="fa-solid fa-upload"></i></button>
                <button class="st-chatu8-icon-btn" id="worker_export_all" title="导出全部"><i class="fa-solid fa-file-export"></i></button>
                <button class="st-chatu8-icon-btn" id="worker_import" title="导入"><i class="fa-solid fa-download"></i></button>
                <button class="st-chatu8-icon-btn danger" id="worker_delete_style" title="删除"><i class="fa-solid fa-trash"></i></button>
            </div>
        </div>
        <div class="st-chatu8-field-col">
            <label for="worker">工作流 (JSON)</label>
            <textarea id="worker" class="st-chatu8-textarea" rows="5"></textarea>
            <div style="display: flex; gap: 10px; align-self: flex-end; margin-top: 10px;">
                <button id="eidtwork" class="st-chatu8-btn">简易修改</button>
                <button id="visualize_workflow" class="st-chatu8-btn"><i class="fa-solid fa-diagram-project"></i> 可视化</button>
            </div>
        </div>
    </div>
    <div class="st-chatu8-settings-section">
        <h3>修图预设</h3>
        <div class="st-chatu8-field">
            <label for="editWorkerid">修图工作流预设</label>
            <div class="st-chatu8-profile-controls">
                <select id="editWorkerid" class="st-chatu8-select"></select>
                <button class="st-chatu8-icon-btn" id="edit_worker_update_style" title="保存"><i class="fa-solid fa-save"></i></button>
                <button class="st-chatu8-icon-btn" id="edit_worker_save_style" title="另存为"><i class="fa-solid fa-file-export"></i></button>
                <button class="st-chatu8-icon-btn" id="edit_worker_export_current" title="导出当前"><i class="fa-solid fa-upload"></i></button>
                <button class="st-chatu8-icon-btn" id="edit_worker_export_all" title="导出全部"><i class="fa-solid fa-file-export"></i></button>
                <button class="st-chatu8-icon-btn" id="edit_worker_import" title="导入"><i class="fa-solid fa-download"></i></button>
                <button class="st-chatu8-icon-btn danger" id="edit_worker_delete_style" title="删除"><i class="fa-solid fa-trash"></i></button>
            </div>
        </div>
        <div class="st-chatu8-field-col">
            <label for="editWorker">修图工作流 (JSON)</label>
            <textarea id="editWorker" class="st-chatu8-textarea" rows="5"></textarea>
        </div>
    </div>
    <div class="st-chatu8-settings-section">
        <h3>ComfyUI 设置</h3>
        <div class="st-chatu8-field">
            <label for="comfyuiUrl">API 地址</label>
            <div class="st-chatu8-input-group">
                <i class="fa-solid fa-exclamation-triangle st-chatu8-url-warning-icon" title="无效的URL格式"></i>
                <input type="text" id="comfyuiUrl" class="st-chatu8-text-input" placeholder="http://127.0.0.1:8188">
                <button id="testComfyui" class="st-chatu8-btn">连接刷新数据</button>
            </div>
        </div>
    </div>
    <div class="st-chatu8-settings-section">
        <h4>其他设置</h4>
        <div class="st-chatu8-field">
            <label for="MODEL_NAME">模型文件</label>
            <select id="MODEL_NAME" class="st-chatu8-select"></select>
        </div>
        <div class="st-chatu8-field">
            <label for="comfyuisamplerName">采样方法</label>
            <select id="comfyuisamplerName" class="st-chatu8-select"></select>
        </div>
        <div class="st-chatu8-field">
            <label for="comfyui_vae">VAE</label>
            <select id="comfyui_vae" class="st-chatu8-select"></select>
        </div>
        <div class="st-chatu8-field">
            <label for="comfyui_scheduler">调度器 (Scheduler)</label>
            <select id="comfyui_scheduler" class="st-chatu8-select"></select>
        </div>
        <div class="st-chatu8-field">
            <label for="comfyuiCLIPName">CLIP</label>
            <select id="comfyuiCLIPName" class="st-chatu8-select"></select>
        </div>
    </div>
    <div class="st-chatu8-settings-section">
        <h4>生成参数</h4>
        <div class="st-chatu8-grid">
            <div class="st-chatu8-field">
                <label for="comfyui_size">预设尺寸</label>
                <select id="comfyui_size" class="st-chatu8-select">
                    <option value="512x512">512x512 (1:1, 图标)</option>
                    <option value="640x640">640x640 (1:1, 图标)</option>
                    <option value="512x768">512x768 (2:3, 垂直)</option>
                    <option value="768x512">768x512 (3:2, 水平)</option>
                    <option value="1024x1024">1024x1024 (1:1, SDXL)</option>
                    <option value="1216x832">1216x832 (19:13, 超高清)</option>
                    <option value="832x1216">832x1216 (13:19, 超高清)</option>
                </select>
            </div>
            <div class="st-chatu8-field">
                <label for="comfyui_width">宽度 (width)</label>
                <input type="number" id="comfyui_width" class="st-chatu8-text-input">
            </div>
            <div class="st-chatu8-field">
                <label for="comfyui_height">高度 (height)</label>
                <input type="number" id="comfyui_height" class="st-chatu8-text-input">
            </div>
            <div class="st-chatu8-field">
                <label for="comfyui_steps">生成步数 (steps)</label>
                <input type="number" id="comfyui_steps" class="st-chatu8-text-input">
            </div>
            <div class="st-chatu8-field">
                <label for="comfyui_seed">种子 (seed)</label>
                <input type="number" id="comfyui_seed" class="st-chatu8-text-input">
            </div>
            <div class="st-chatu8-field">
                <label for="cfg_comfyui">CFG</label>
                <input type="number" id="cfg_comfyui" class="st-chatu8-text-input">
            </div>
        </div>
    </div>

     <div class="st-chatu8-settings-section">
        <h3>参考图</h3>
        <div class="st-chatu8-field-col">
            <label>图片预览</label>
            <div id="comfyui-image-preview-container" class="st-chatu8-image-preview-container">
                <div class="st-chatu8-image-placeholder">
                    <i class="fa-solid fa-image"></i>
                    <span>没有选择图片</span>
                </div>
                <img id="previewImage2" src="" alt="参考图预览">
            </div>
            <div class="st-chatu8-image-controls">
                <input type="file" id="imageInput2" accept="image/*" style="display:none;">
                <button type="button" class="st-chatu8-btn" id="comfyui-select-image-btn"><i class="fa-solid fa-upload"></i> 选择图片</button>
                <button type="button" class="st-chatu8-btn danger" id="comfyui-remove-image-btn" style="display: none;"><i class="fa-solid fa-trash"></i> 移除图片</button>
            </div>
        </div>
        <div class="st-chatu8-field">
            <label for="ipa">IPA 类型</label>
            <select id="ipa" class="st-chatu8-select">
                <option>STANDARD (medium strength)</option>
                <option>LIGHT - SD1.5 only (low strength)</option>
                <option>VIT-G (medium strength)</option>
                <option>PLUS (high strength)</option>
                <option>PLUS FACE (portraits)</option>
                <option>FULL FACE - SD1.5 only (portraits stronger)</option>
            </select>
        </div>
        <div class="st-chatu8-field">
            <label for="c_fenwei">氛围强度</label>
            <input type="number" id="c_fenwei" class="st-chatu8-text-input">
        </div>
        <div class="st-chatu8-field">
            <label for="c_xijie">细节强度</label>
            <input type="number" id="c_xijie" class="st-chatu8-text-input">
        </div>
        <div class="st-chatu8-field">
            <label for="c_quanzhong">权重</label>
            <input type="number" id="c_quanzhong" class="st-chatu8-text-input">
        </div>
        <div class="st-chatu8-field">
            <label for="c_idquanzhong">FaceID 权重</label>
            <input type="number" id="c_idquanzhong" class="st-chatu8-text-input">
        </div>
    </div>
</div>
